{"mappings":"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","sources":["node_modules/tweakpane/dist/tweakpane.js","node_modules/@swc/helpers/src/_class_private_field_get.js","node_modules/@swc/helpers/src/_class_private_field_set.js","node_modules/@swc/helpers/src/_class_private_method_get.js","node_modules/@swc/helpers/src/_define_property.js","node_modules/gl-matrix/esm/common.js","node_modules/gl-matrix/esm/mat4.js","node_modules/gl-matrix/esm/mat3.js","node_modules/gl-matrix/esm/vec3.js","node_modules/gl-matrix/esm/vec4.js","node_modules/gl-matrix/esm/quat.js","src/orbit-control.js","src/noise.js","src/hexagonal-bokeh.js","src/shader/draw.vert","src/shader/draw.frag","src/shader/portal.vert","src/shader/portal.frag","src/shader/hex-blur-1.vert","src/shader/hex-blur-1.frag","src/shader/hex-blur-2.vert","src/shader/hex-blur-2.frag","src/shader/composite.vert","src/shader/composite.frag","src/app.js"],"sourcesContent":["/*! Tweakpane 3.0.7 (c) 2016 cocopon, licensed under the MIT license. */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Tweakpane = {}));\n})(this, (function (exports) { 'use strict';\n\n    /***\n     * A simple semantic versioning perser.\n     */\n    class Semver {\n        /**\n         * @hidden\n         */\n        constructor(text) {\n            const [core, prerelease] = text.split('-');\n            const coreComps = core.split('.');\n            this.major = parseInt(coreComps[0], 10);\n            this.minor = parseInt(coreComps[1], 10);\n            this.patch = parseInt(coreComps[2], 10);\n            this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n        }\n        toString() {\n            const core = [this.major, this.minor, this.patch].join('.');\n            return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n        }\n    }\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n    class TpUpdateEvent extends TpEvent {\n        constructor(target, value, presetKey) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n        }\n    }\n    class TpFoldEvent extends TpEvent {\n        constructor(target, expanded) {\n            super(target);\n            this.expanded = expanded;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) {\n            return false;\n        }\n        for (let i = 0; i < a1.length; i++) {\n            if (a1[i] !== a2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n    }\n\n    class BindingTarget {\n        constructor(obj, key, opt_id) {\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        static isBindable(obj) {\n            if (obj === null) {\n                return false;\n            }\n            if (typeof obj !== 'object') {\n                return false;\n            }\n            return true;\n        }\n        get key() {\n            return this.key_;\n        }\n        get presetKey() {\n            return this.presetKey_;\n        }\n        read() {\n            return this.obj_[this.key_];\n        }\n        write(value) {\n            this.obj_[this.key_] = value;\n        }\n        writeProperty(name, value) {\n            const valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) {\n                throw TpError.notBindable();\n            }\n            if (!(name in valueObj)) {\n                throw TpError.propertyNotFound(name);\n            }\n            valueObj[name] = value;\n        }\n    }\n\n    class ButtonApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.valueController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.valueController.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.valueController.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$q = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$q());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$q('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$q('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const changed = !this.equals_(this.rawValue_, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            if (this.value_ === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$p = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return new Function('return this')();\n    }\n    function getWindowDocument() {\n        const globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function getCanvasContext(canvasElement) {\n        const win = canvasElement.ownerDocument.defaultView;\n        if (!win) {\n            return null;\n        }\n        const isBrowser = 'document' in win;\n        return isBrowser ? canvasElement.getContext('2d') : null;\n    }\n    const ICON_ID_TO_INNER_HTML_MAP = {\n        check: '<path d=\"M2 8l4 4l8 -8\"/>',\n        dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n        p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n    };\n    function createSvgIconElement(document, iconId) {\n        const elem = document.createElementNS(SVG_NS, 'svg');\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function removeElement(element) {\n        if (element.parentElement) {\n            element.parentElement.removeChild(element);\n        }\n    }\n    function removeChildElements(element) {\n        while (element.children.length > 0) {\n            element.removeChild(element.children[0]);\n        }\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$o = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$o());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$o('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$o(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$o(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$o('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    const ButtonBladePlugin = {\n        id: 'button',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('button'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonController(args.document, {\n                    props: ValueMap.fromObject({\n                        title: args.params.title,\n                    }),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonController)) {\n                return null;\n            }\n            return new ButtonApi(args.controller);\n        },\n    };\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    function createBlade() {\n        return new ValueMap({\n            positions: createValue([], {\n                equals: deepEqualsArray,\n            }),\n        });\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            bindValueMap(this, 'expanded', () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            });\n        }\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                foldable.set('expandedHeight', computeExpandedFolderHeight(foldable, elem));\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.set('shouldFixHeight', false);\n            foldable.set('expandedHeight', null);\n            foldable.set('completed', true);\n        });\n    }\n\n    class RackLikeApi extends BladeApi {\n        constructor(controller, rackApi) {\n            super(controller);\n            this.rackApi_ = rackApi;\n        }\n    }\n\n    function addButtonAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n    }\n    function addFolderAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n    }\n    function addSeparatorAsBlade(api, opt_params) {\n        const params = opt_params || {};\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'separator' }));\n    }\n    function addTabAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n    }\n\n    class NestedOrderedSet {\n        constructor(extract) {\n            this.emitter = new Emitter();\n            this.items_ = [];\n            this.cache_ = new Set();\n            this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n            this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n            this.extract_ = extract;\n        }\n        get items() {\n            return this.items_;\n        }\n        allItems() {\n            return Array.from(this.cache_);\n        }\n        find(callback) {\n            for (const item of this.allItems()) {\n                if (callback(item)) {\n                    return item;\n                }\n            }\n            return null;\n        }\n        includes(item) {\n            return this.cache_.has(item);\n        }\n        add(item, opt_index) {\n            if (this.includes(item)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.cache_.add(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.on('add', this.onSubListAdd_);\n                subList.emitter.on('remove', this.onSubListRemove_);\n                subList.allItems().forEach((item) => {\n                    this.cache_.add(item);\n                });\n            }\n            this.emitter.emit('add', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            this.cache_.delete(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.off('add', this.onSubListAdd_);\n                subList.emitter.off('remove', this.onSubListRemove_);\n            }\n            this.emitter.emit('remove', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        onSubListAdd_(ev) {\n            this.cache_.add(ev.item);\n            this.emitter.emit('add', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n        onSubListRemove_(ev) {\n            this.cache_.delete(ev.item);\n            this.emitter.emit('remove', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n    }\n\n    class InputBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingChange_ = this.onBindingChange_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('change', this.onBindingChange_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingChange_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('change', {\n                event: new TpChangeEvent(this, forceCast(value), this.controller_.binding.target.presetKey, ev.options.last),\n            });\n        }\n    }\n\n    class InputBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n        }\n    }\n\n    class MonitorBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingUpdate_ = this.onBindingUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('update', this.onBindingUpdate_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingUpdate_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(this, forceCast(value), this.controller_.binding.target.presetKey),\n            });\n        }\n    }\n\n    class MonitorBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n            this.viewProps.bindDisabled(this.binding.ticker);\n            this.viewProps.handleDispose(() => {\n                this.binding.dispose();\n            });\n        }\n    }\n\n    function findSubBladeApiSet(api) {\n        if (api instanceof RackApi) {\n            return api['apiSet_'];\n        }\n        if (api instanceof RackLikeApi) {\n            return api['rackApi_']['apiSet_'];\n        }\n        return null;\n    }\n    function getApiByController(apiSet, controller) {\n        const api = apiSet.find((api) => api.controller_ === controller);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return api;\n    }\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) {\n            throw TpError.notBindable();\n        }\n        return new BindingTarget(obj, key, opt_id);\n    }\n    class RackApi extends BladeApi {\n        constructor(controller, pool) {\n            super(controller);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.onRackInputChange_ = this.onRackInputChange_.bind(this);\n            this.onRackMonitorUpdate_ = this.onRackMonitorUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.apiSet_ = new NestedOrderedSet(findSubBladeApiSet);\n            this.pool_ = pool;\n            const rack = this.controller_.rack;\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            rack.emitter.on('inputchange', this.onRackInputChange_);\n            rack.emitter.on('monitorupdate', this.onRackMonitorUpdate_);\n            rack.children.forEach((bc) => {\n                this.setUpApi_(bc);\n            });\n        }\n        get children() {\n            return this.controller_.rack.children.map((bc) => getApiByController(this.apiSet_, bc));\n        }\n        addInput(object, key, opt_params) {\n            const params = opt_params || {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createInput(doc, createBindingTarget(object, key, params.presetKey), params);\n            const api = new InputBindingApi(bc);\n            return this.add(api, params.index);\n        }\n        addMonitor(object, key, opt_params) {\n            const params = opt_params || {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createMonitor(doc, createBindingTarget(object, key), params);\n            const api = new MonitorBindingApi(bc);\n            return forceCast(this.add(api, params.index));\n        }\n        addFolder(params) {\n            return addFolderAsBlade(this, params);\n        }\n        addButton(params) {\n            return addButtonAsBlade(this, params);\n        }\n        addSeparator(opt_params) {\n            return addSeparatorAsBlade(this, opt_params);\n        }\n        addTab(params) {\n            return addTabAsBlade(this, params);\n        }\n        add(api, opt_index) {\n            this.controller_.rack.add(api.controller_, opt_index);\n            const gapi = this.apiSet_.find((a) => a.controller_ === api.controller_);\n            if (gapi) {\n                this.apiSet_.remove(gapi);\n            }\n            this.apiSet_.add(api);\n            return api;\n        }\n        remove(api) {\n            this.controller_.rack.remove(api.controller_);\n        }\n        addBlade(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createBlade(doc, params);\n            const api = this.pool_.createBladeApi(bc);\n            return this.add(api, params.index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpApi_(bc) {\n            const api = this.apiSet_.find((api) => api.controller_ === bc);\n            if (!api) {\n                this.apiSet_.add(this.pool_.createBladeApi(bc));\n            }\n        }\n        onRackAdd_(ev) {\n            this.setUpApi_(ev.bladeController);\n        }\n        onRackRemove_(ev) {\n            if (ev.isRoot) {\n                const api = getApiByController(this.apiSet_, ev.bladeController);\n                this.apiSet_.remove(api);\n            }\n        }\n        onRackInputChange_(ev) {\n            const bc = ev.bladeController;\n            if (bc instanceof InputBindingController) {\n                const api = getApiByController(this.apiSet_, bc);\n                const binding = bc.binding;\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, forceCast(binding.target.read()), binding.target.presetKey, ev.options.last),\n                });\n            }\n            else if (bc instanceof ValueBladeController) {\n                const api = getApiByController(this.apiSet_, bc);\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, bc.value.rawValue, undefined, ev.options.last),\n                });\n            }\n        }\n        onRackMonitorUpdate_(ev) {\n            if (!(ev.bladeController instanceof MonitorBindingController)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = getApiByController(this.apiSet_, ev.bladeController);\n            const binding = ev.bladeController.binding;\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(api, forceCast(binding.target.read()), binding.target.presetKey),\n            });\n        }\n    }\n\n    class FolderApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.emitter_ = new Emitter();\n            this.controller_.foldable\n                .value('expanded')\n                .emitter.on('change', (ev) => {\n                this.emitter_.emit('fold', {\n                    event: new TpFoldEvent(this, ev.sender.rawValue),\n                });\n            });\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n        }\n        get expanded() {\n            return this.controller_.foldable.get('expanded');\n        }\n        set expanded(expanded) {\n            this.controller_.foldable.set('expanded', expanded);\n        }\n        get title() {\n            return this.controller_.props.get('title');\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            return this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class RackLikeController extends BladeController {\n        constructor(config) {\n            super({\n                blade: config.blade,\n                view: config.view,\n                viewProps: config.rackController.viewProps,\n            });\n            this.rackController = config.rackController;\n        }\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    function findInputBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof InputBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findMonitorBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof MonitorBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findValueBladeController(bcs, v) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof ValueBladeController && bc.value === v) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findSubRack(bc) {\n        if (bc instanceof RackController) {\n            return bc.rack;\n        }\n        if (bc instanceof RackLikeController) {\n            return bc.rackController.rack;\n        }\n        return null;\n    }\n    function findSubBladeControllerSet(bc) {\n        const rack = findSubRack(bc);\n        return rack ? rack['bcSet_'] : null;\n    }\n    class BladeRack {\n        constructor(blade) {\n            var _a;\n            this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n            this.onSetAdd_ = this.onSetAdd_.bind(this);\n            this.onSetRemove_ = this.onSetRemove_.bind(this);\n            this.onChildDispose_ = this.onChildDispose_.bind(this);\n            this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n            this.onChildInputChange_ = this.onChildInputChange_.bind(this);\n            this.onChildMonitorUpdate_ = this.onChildMonitorUpdate_.bind(this);\n            this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n            this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n            this.onDescendantLayout_ = this.onDescendantLayout_.bind(this);\n            this.onDescendantInputChange_ = this.onDescendantInputChange_.bind(this);\n            this.onDescendantMonitorUpdate_ =\n                this.onDescendantMonitorUpdate_.bind(this);\n            this.emitter = new Emitter();\n            this.blade_ = blade !== null && blade !== void 0 ? blade : null;\n            (_a = this.blade_) === null || _a === void 0 ? void 0 : _a.value('positions').emitter.on('change', this.onBladePositionsChange_);\n            this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n            this.bcSet_.emitter.on('add', this.onSetAdd_);\n            this.bcSet_.emitter.on('remove', this.onSetRemove_);\n        }\n        get children() {\n            return this.bcSet_.items;\n        }\n        add(bc, opt_index) {\n            if (bc.parent) {\n                bc.parent.remove(bc);\n            }\n            bc['parent_'] = this;\n            this.bcSet_.add(bc, opt_index);\n        }\n        remove(bc) {\n            bc['parent_'] = null;\n            this.bcSet_.remove(bc);\n        }\n        find(controllerClass) {\n            return forceCast(this.bcSet_.allItems().filter((bc) => {\n                return bc instanceof controllerClass;\n            }));\n        }\n        onSetAdd_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('add', {\n                bladeController: ev.item,\n                index: ev.index,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n            bc.blade\n                .value('positions')\n                .emitter.on('change', this.onChildPositionsChange_);\n            bc.viewProps.handleDispose(this.onChildDispose_);\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.on('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.on('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.on('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.on('layout', this.onDescendantLayout_);\n                    emitter.on('inputchange', this.onDescendantInputChange_);\n                    emitter.on('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        onSetRemove_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('remove', {\n                bladeController: ev.item,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.off('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.off('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.off('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.off('layout', this.onDescendantLayout_);\n                    emitter.off('inputchange', this.onDescendantInputChange_);\n                    emitter.off('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        updatePositions_() {\n            const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n            const firstVisibleItem = visibleItems[0];\n            const lastVisibleItem = visibleItems[visibleItems.length - 1];\n            this.bcSet_.items.forEach((bc) => {\n                const ps = [];\n                if (bc === firstVisibleItem) {\n                    ps.push('first');\n                    if (!this.blade_ ||\n                        this.blade_.get('positions').includes('veryfirst')) {\n                        ps.push('veryfirst');\n                    }\n                }\n                if (bc === lastVisibleItem) {\n                    ps.push('last');\n                    if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                        ps.push('verylast');\n                    }\n                }\n                bc.blade.set('positions', ps);\n            });\n        }\n        onChildPositionsChange_() {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildViewPropsChange_(_ev) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildDispose_() {\n            const disposedUcs = this.bcSet_.items.filter((bc) => {\n                return bc.viewProps.get('disposed');\n            });\n            disposedUcs.forEach((bc) => {\n                this.bcSet_.remove(bc);\n            });\n        }\n        onChildInputChange_(ev) {\n            const bc = findInputBindingController(this.find(InputBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onChildMonitorUpdate_(ev) {\n            const bc = findMonitorBindingController(this.find(MonitorBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('monitorupdate', {\n                bladeController: bc,\n                sender: this,\n            });\n        }\n        onChildValueChange_(ev) {\n            const bc = findValueBladeController(this.find(ValueBladeController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantLayout_(_) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onDescendantInputChange_(ev) {\n            this.emitter.emit('inputchange', {\n                bladeController: ev.bladeController,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantMonitorUpdate_(ev) {\n            this.emitter.emit('monitorupdate', {\n                bladeController: ev.bladeController,\n                sender: this,\n            });\n        }\n        onBladePositionsChange_() {\n            this.updatePositions_();\n        }\n    }\n\n    class RackController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new PlainView(doc, {\n                    viewName: 'brk',\n                    viewProps: config.viewProps,\n                }) }));\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            const rack = new BladeRack(config.root ? undefined : config.blade);\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            this.rack = rack;\n            this.viewProps.handleDispose(() => {\n                for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                    const bc = this.rack.children[i];\n                    bc.viewProps.set('disposed', true);\n                }\n            });\n        }\n        onRackAdd_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            insertElementAt(this.view.element, ev.bladeController.view.element, ev.index);\n        }\n        onRackRemove_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            removeElement(ev.bladeController.view.element);\n        }\n    }\n\n    const bladeContainerClassName = ClassName('cnt');\n\n    class FolderView {\n        constructor(doc, config) {\n            this.className_ = ClassName(config.viewName || 'fld');\n            this.element = doc.createElement('div');\n            this.element.classList.add(this.className_(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            this.foldable_ = config.foldable;\n            this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n            bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(this.className_('b'));\n            bindValueMap(config.props, 'title', (title) => {\n                if (isEmpty(title)) {\n                    this.element.classList.add(this.className_(undefined, 'not'));\n                }\n                else {\n                    this.element.classList.remove(this.className_(undefined, 'not'));\n                }\n            });\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(this.className_('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(this.className_('m'));\n            this.buttonElement.appendChild(markElem);\n            const containerElem = config.containerElement;\n            containerElem.classList.add(this.className_('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n        }\n    }\n\n    class FolderController extends RackLikeController {\n        constructor(doc, config) {\n            var _a;\n            const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            const rc = new RackController(doc, {\n                blade: config.blade,\n                root: config.root,\n                viewProps: config.viewProps,\n            });\n            super(Object.assign(Object.assign({}, config), { rackController: rc, view: new FolderView(doc, {\n                    containerElement: rc.view.element,\n                    foldable: foldable,\n                    props: config.props,\n                    viewName: config.root ? 'rot' : undefined,\n                    viewProps: config.viewProps,\n                }) }));\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.props = config.props;\n            this.foldable = foldable;\n            bindFoldable(this.foldable, this.view.containerElement);\n            this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n        }\n        get document() {\n            return this.view.element.ownerDocument;\n        }\n        onTitleClick_() {\n            this.foldable.set('expanded', !this.foldable.get('expanded'));\n        }\n    }\n\n    const FolderBladePlugin = {\n        id: 'folder',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('folder'),\n                expanded: p.optional.boolean,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new FolderController(args.document, {\n                blade: args.blade,\n                expanded: args.params.expanded,\n                props: ValueMap.fromObject({\n                    title: args.params.title,\n                }),\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof FolderController)) {\n                return null;\n            }\n            return new FolderApi(args.controller, args.pool);\n        },\n    };\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class SeparatorApi extends BladeApi {\n    }\n\n    const className$n = ClassName('spr');\n    class SeparatorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$n());\n            config.viewProps.bindClassModifiers(this.element);\n            const hrElem = doc.createElement('hr');\n            hrElem.classList.add(className$n('r'));\n            this.element.appendChild(hrElem);\n        }\n    }\n\n    class SeparatorController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                    viewProps: config.viewProps,\n                }) }));\n        }\n    }\n\n    const SeparatorBladePlugin = {\n        id: 'separator',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('separator'),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new SeparatorController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof SeparatorController)) {\n                return null;\n            }\n            return new SeparatorApi(args.controller);\n        },\n    };\n\n    const className$m = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$m(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(opt_initialValue) {\n            var _a, _b;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            const coreObj = {\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new ViewProps(core);\n        }\n        bindClassModifiers(elem) {\n            bindValueMap(this, 'disabled', valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n    }\n\n    const className$l = ClassName('tbi');\n    class TabItemView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$l());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValueMap(config.props, 'selected', (selected) => {\n                if (selected) {\n                    this.element.classList.add(className$l(undefined, 'sel'));\n                }\n                else {\n                    this.element.classList.remove(className$l(undefined, 'sel'));\n                }\n            });\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$l('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$l('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n        }\n    }\n\n    class TabItemController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new TabItemView(doc, {\n                props: config.props,\n                viewProps: config.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class TabPageController {\n        constructor(doc, config) {\n            this.onItemClick_ = this.onItemClick_.bind(this);\n            this.ic_ = new TabItemController(doc, {\n                props: config.itemProps,\n                viewProps: ViewProps.create(),\n            });\n            this.ic_.emitter.on('click', this.onItemClick_);\n            this.cc_ = new RackController(doc, {\n                blade: createBlade(),\n                viewProps: ViewProps.create(),\n            });\n            this.props = config.props;\n            bindValueMap(this.props, 'selected', (selected) => {\n                this.itemController.props.set('selected', selected);\n                this.contentController.viewProps.set('hidden', !selected);\n            });\n        }\n        get itemController() {\n            return this.ic_;\n        }\n        get contentController() {\n            return this.cc_;\n        }\n        onItemClick_() {\n            this.props.set('selected', true);\n        }\n    }\n\n    class TabPageApi {\n        constructor(controller, contentRackApi) {\n            this.controller_ = controller;\n            this.rackApi_ = contentRackApi;\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.itemController.props.set('title', title);\n        }\n        get selected() {\n            return this.controller_.props.get('selected');\n        }\n        set selected(selected) {\n            this.controller_.props.set('selected', selected);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n    }\n\n    class TabApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.emitter_ = new Emitter();\n            this.pageApiMap_ = new Map();\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n            this.controller_.pageSet.emitter.on('add', this.onPageAdd_);\n            this.controller_.pageSet.emitter.on('remove', this.onPageRemove_);\n            this.controller_.pageSet.items.forEach((pc) => {\n                this.setUpPageApi_(pc);\n            });\n        }\n        get pages() {\n            return this.controller_.pageSet.items.map((pc) => {\n                const api = this.pageApiMap_.get(pc);\n                if (!api) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return api;\n            });\n        }\n        addPage(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const pc = new TabPageController(doc, {\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: params.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n            });\n            this.controller_.add(pc, params.index);\n            const api = this.pageApiMap_.get(pc);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n        removePage(index) {\n            this.controller_.remove(index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpPageApi_(pc) {\n            const rackApi = this.rackApi_['apiSet_'].find((api) => api.controller_ === pc.contentController);\n            if (!rackApi) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = new TabPageApi(pc, rackApi);\n            this.pageApiMap_.set(pc, api);\n        }\n        onPageAdd_(ev) {\n            this.setUpPageApi_(ev.item);\n        }\n        onPageRemove_(ev) {\n            const api = this.pageApiMap_.get(ev.item);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.pageApiMap_.delete(ev.item);\n        }\n    }\n\n    const className$k = ClassName('tab');\n    class TabView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$k(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.empty, valueToClassName(this.element, className$k(undefined, 'nop')));\n            const itemsElem = doc.createElement('div');\n            itemsElem.classList.add(className$k('i'));\n            this.element.appendChild(itemsElem);\n            this.itemsElement = itemsElem;\n            const contentsElem = config.contentsElement;\n            contentsElem.classList.add(className$k('c'));\n            this.element.appendChild(contentsElem);\n            this.contentsElement = contentsElem;\n        }\n    }\n\n    class TabController extends RackLikeController {\n        constructor(doc, config) {\n            const cr = new RackController(doc, {\n                blade: config.blade,\n                viewProps: config.viewProps,\n            });\n            const empty = createValue(true);\n            super({\n                blade: config.blade,\n                rackController: cr,\n                view: new TabView(doc, {\n                    contentsElement: cr.view.element,\n                    empty: empty,\n                    viewProps: config.viewProps,\n                }),\n            });\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.onPageSelectedChange_ = this.onPageSelectedChange_.bind(this);\n            this.pageSet_ = new NestedOrderedSet(() => null);\n            this.pageSet_.emitter.on('add', this.onPageAdd_);\n            this.pageSet_.emitter.on('remove', this.onPageRemove_);\n            this.empty_ = empty;\n            this.applyPages_();\n        }\n        get pageSet() {\n            return this.pageSet_;\n        }\n        add(pc, opt_index) {\n            this.pageSet_.add(pc, opt_index !== null && opt_index !== void 0 ? opt_index : this.pageSet_.items.length);\n        }\n        remove(index) {\n            this.pageSet_.remove(this.pageSet_.items[index]);\n        }\n        applyPages_() {\n            this.keepSelection_();\n            this.empty_.rawValue = this.pageSet_.items.length === 0;\n        }\n        onPageAdd_(ev) {\n            const pc = ev.item;\n            insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n            this.rackController.rack.add(pc.contentController, ev.index);\n            pc.props.value('selected').emitter.on('change', this.onPageSelectedChange_);\n            this.applyPages_();\n        }\n        onPageRemove_(ev) {\n            const pc = ev.item;\n            removeElement(pc.itemController.view.element);\n            this.rackController.rack.remove(pc.contentController);\n            pc.props\n                .value('selected')\n                .emitter.off('change', this.onPageSelectedChange_);\n            this.applyPages_();\n        }\n        keepSelection_() {\n            if (this.pageSet_.items.length === 0) {\n                return;\n            }\n            const firstSelIndex = this.pageSet_.items.findIndex((pc) => pc.props.get('selected'));\n            if (firstSelIndex < 0) {\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === 0);\n                });\n            }\n            else {\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === firstSelIndex);\n                });\n            }\n        }\n        onPageSelectedChange_(ev) {\n            if (ev.rawValue) {\n                const index = this.pageSet_.items.findIndex((pc) => pc.props.value('selected') === ev.sender);\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === index);\n                });\n            }\n            else {\n                this.keepSelection_();\n            }\n        }\n    }\n\n    const TabBladePlugin = {\n        id: 'tab',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                pages: p.required.array(p.required.object({ title: p.required.string })),\n                view: p.required.constant('tab'),\n            });\n            if (!result || result.pages.length === 0) {\n                return null;\n            }\n            return { params: result };\n        },\n        controller(args) {\n            const c = new TabController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n            args.params.pages.forEach((p) => {\n                const pc = new TabPageController(args.document, {\n                    itemProps: ValueMap.fromObject({\n                        selected: false,\n                        title: p.title,\n                    }),\n                    props: ValueMap.fromObject({\n                        selected: false,\n                    }),\n                });\n                c.add(pc);\n            });\n            return c;\n        },\n        api(args) {\n            if (!(args.controller instanceof TabController)) {\n                return null;\n            }\n            return new TabApi(args.controller, args.pool);\n        },\n    };\n\n    function createBladeController(plugin, args) {\n        const ac = plugin.accept(args.params);\n        if (!ac) {\n            return null;\n        }\n        const disabled = ParamsParsers.optional.boolean(args.params['disabled']).value;\n        const hidden = ParamsParsers.optional.boolean(args.params['hidden']).value;\n        return plugin.controller({\n            blade: createBlade(),\n            document: args.document,\n            params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: disabled, hidden: hidden })),\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class ListConstraint {\n        constructor(options) {\n            this.options = options;\n        }\n        constrain(value) {\n            const opts = this.options;\n            if (opts.length === 0) {\n                return value;\n            }\n            const matched = opts.filter((item) => {\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        }\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.maxValue = config.max;\n            this.minValue = config.min;\n        }\n        constrain(value) {\n            let result = value;\n            if (!isEmpty(this.minValue)) {\n                result = Math.max(result, this.minValue);\n            }\n            if (!isEmpty(this.maxValue)) {\n                result = Math.min(result, this.maxValue);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step) {\n            this.step = step;\n        }\n        constrain(value) {\n            const r = value < 0\n                ? -Math.round(-value / this.step)\n                : Math.round(value / this.step);\n            return r * this.step;\n        }\n    }\n\n    const className$j = ClassName('lst');\n    class ListView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.props_ = config.props;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$j());\n            config.viewProps.bindClassModifiers(this.element);\n            const selectElem = doc.createElement('select');\n            selectElem.classList.add(className$j('s'));\n            bindValueMap(this.props_, 'options', (opts) => {\n                removeChildElements(selectElem);\n                opts.forEach((item, index) => {\n                    const optionElem = doc.createElement('option');\n                    optionElem.dataset.index = String(index);\n                    optionElem.textContent = item.text;\n                    optionElem.value = String(item.value);\n                    selectElem.appendChild(optionElem);\n                });\n            });\n            config.viewProps.bindDisabled(selectElem);\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(className$j('m'));\n            markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            this.element.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value_ = config.value;\n            this.update_();\n        }\n        update_() {\n            this.selectElement.value = String(this.value_.rawValue);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ListController {\n        constructor(doc, config) {\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ListView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\n        }\n        onSelectChange_(e) {\n            const selectElem = forceCast(e.currentTarget);\n            const optElem = selectElem.selectedOptions.item(0);\n            if (!optElem) {\n                return;\n            }\n            const itemIndex = Number(optElem.dataset.index);\n            this.value.rawValue = this.props.get('options')[itemIndex].value;\n        }\n    }\n\n    const className$i = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$i());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$i(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$h = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$h());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$h('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    function boolToString(value) {\n        return String(value);\n    }\n    function boolFromUnknown(value) {\n        if (value === 'false') {\n            return false;\n        }\n        return !!value;\n    }\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        return (parseLiteral(text, cursor) || parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function numberToString(value) {\n        return String(value);\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    function formatString(value) {\n        return value;\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset$1(ev, elem) {\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((win && win.scrollX) || 0) + rect.left),\n            y: ev.pageY - (((win && win.scrollY) || 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_, {\n                passive: false,\n            });\n            element.addEventListener('touchmove', this.onTouchMove_, {\n                passive: true,\n            });\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return ((value % max) + max) % max;\n    }\n\n    const className$g = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g(), className$g(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$g(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$g('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$g());\n            this.inputElement.classList.add(className$g('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$g('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$g('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$g('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$g('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$g(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$g(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.originRawValue_ + dx * this.props.get('draggingScale');\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    const className$f = ClassName('sld');\n    class SliderView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$f());\n            config.viewProps.bindClassModifiers(this.element);\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$f('t'));\n            config.viewProps.bindTabIndex(trackElem);\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$f('k'));\n            this.trackElement.appendChild(knobElem);\n            this.knobElement = knobElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('minValue'), this.props_.get('maxValue'), 0, 100), 0, 100);\n            this.knobElement.style.width = `${p}%`;\n        }\n        onChange_() {\n            this.update_();\n        }\n    }\n\n    class SliderController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.props = config.props;\n            this.view = new SliderView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.trackElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n            this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('minValue'), this.props.get('maxValue')), opts);\n        }\n        onPointerDownOrMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$e = ClassName('sldtxt');\n    class SliderTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$e('s'));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$e('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    class SliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sliderC_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                props: config.sliderProps,\n                value: config.value,\n                viewProps: this.viewProps,\n            });\n            this.textC_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                parser: config.parser,\n                props: config.textProps,\n                value: config.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get sliderController() {\n            return this.sliderC_;\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function parseListOptions(value) {\n        const p = ParamsParsers;\n        if (Array.isArray(value)) {\n            return p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            }))(value).value;\n        }\n        if (typeof value === 'object') {\n            return p.required.raw(value)\n                .value;\n        }\n        return undefined;\n    }\n    function parsePickerLayout(value) {\n        if (value === 'inline' || value === 'popup') {\n            return value;\n        }\n        return undefined;\n    }\n    function parsePointDimensionParams(value) {\n        const p = ParamsParsers;\n        return p.required.object({\n            max: p.optional.number,\n            min: p.optional.number,\n            step: p.optional.number,\n        })(value).value;\n    }\n    function normalizeListOptions(options) {\n        if (Array.isArray(options)) {\n            return options;\n        }\n        const items = [];\n        Object.keys(options).forEach((text) => {\n            items.push({ text: text, value: options[text] });\n        });\n        return items;\n    }\n    function createListConstraint(options) {\n        return !isEmpty(options)\n            ? new ListConstraint(normalizeListOptions(forceCast(options)))\n            : null;\n    }\n    function findListItems(constraint) {\n        const c = constraint\n            ? findConstraint(constraint, ListConstraint)\n            : null;\n        if (!c) {\n            return null;\n        }\n        return c.options;\n    }\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    const className$d = ClassName('ckb');\n    class CheckboxView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className$d('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$d('i'));\n            inputElem.type = 'checkbox';\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.viewProps.bindDisabled(this.inputElement);\n            const wrapperElem = doc.createElement('div');\n            wrapperElem.classList.add(className$d('w'));\n            labelElem.appendChild(wrapperElem);\n            const markElem = createSvgIconElement(doc, 'check');\n            wrapperElem.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            this.inputElement.checked = this.value.rawValue;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class CheckboxController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n        }\n    }\n\n    function createConstraint$5(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const BooleanInputPlugin = {\n        id: 'input-bool',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n            constraint: (args) => createConstraint$5(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new CheckboxController(doc, {\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className$c = ClassName('col');\n    class ColorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.foldable.bindExpandedClass(this.element, className$c(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$c(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$c('h'));\n            this.element.appendChild(headElem);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$c('s'));\n            headElem.appendChild(swatchElem);\n            this.swatchElement = swatchElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$c('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$c('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    function rgbToHsl(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const c = cmax - cmin;\n        let h = 0;\n        let s = 0;\n        const l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = c / (1 - Math.abs(cmax + cmin - 1));\n            if (rp === cmax) {\n                h = (gp - bp) / c;\n            }\n            else if (gp === cmax) {\n                h = 2 + (bp - rp) / c;\n            }\n            else {\n                h = 4 + (rp - gp) / c;\n            }\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [h * 360, s * 100, l * 100];\n    }\n    function hslToRgb(h, s, l) {\n        const hp = ((h % 360) + 360) % 360;\n        const sp = constrainRange(s / 100, 0, 1);\n        const lp = constrainRange(l / 100, 0, 1);\n        const c = (1 - Math.abs(2 * lp - 1)) * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = lp - c / 2;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function rgbToHsv(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const d = cmax - cmin;\n        let h;\n        if (d === 0) {\n            h = 0;\n        }\n        else if (cmax === rp) {\n            h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n        }\n        else if (cmax === gp) {\n            h = 60 * ((bp - rp) / d + 2);\n        }\n        else {\n            h = 60 * ((rp - gp) / d + 4);\n        }\n        const s = cmax === 0 ? 0 : d / cmax;\n        const v = cmax;\n        return [h, s * 100, v * 100];\n    }\n    function hsvToRgb(h, s, v) {\n        const hp = loopRange(h, 360);\n        const sp = constrainRange(s / 100, 0, 1);\n        const vp = constrainRange(v / 100, 0, 1);\n        const c = vp * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = vp - c;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function hslToHsv(h, s, l) {\n        const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n        return [\n            h,\n            sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n            l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n        ];\n    }\n    function hsvToHsl(h, s, v) {\n        const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n        return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n    }\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n    function appendAlphaComponent(comps, alpha) {\n        return [comps[0], comps[1], comps[2], alpha];\n    }\n    const MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: (h, s, l) => [h, s, l],\n            hsv: hslToHsv,\n            rgb: hslToRgb,\n        },\n        hsv: {\n            hsl: hsvToHsl,\n            hsv: (h, s, v) => [h, s, v],\n            rgb: hsvToRgb,\n        },\n        rgb: {\n            hsl: rgbToHsl,\n            hsv: rgbToHsv,\n            rgb: (r, g, b) => [r, g, b],\n        },\n    };\n    function convertColorMode(components, fromMode, toMode) {\n        return MODE_CONVERTER_MAP[fromMode][toMode](...components);\n    }\n\n    const CONSTRAINT_MAP = {\n        hsl: (comps) => {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        hsv: (comps) => {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        rgb: (comps) => {\n            var _a;\n            return [\n                constrainRange(comps[0], 0, 255),\n                constrainRange(comps[1], 0, 255),\n                constrainRange(comps[2], 0, 255),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n    };\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== 'object' || isEmpty(obj)) {\n            return false;\n        }\n        return key in obj && typeof obj[key] === 'number';\n    }\n    class Color {\n        constructor(comps, mode) {\n            this.mode_ = mode;\n            this.comps_ = CONSTRAINT_MAP[mode](comps);\n        }\n        static black() {\n            return new Color([0, 0, 0], 'rgb');\n        }\n        static fromObject(obj) {\n            const comps = 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n            return new Color(comps, 'rgb');\n        }\n        static toRgbaObject(color) {\n            return color.toRgbaObject();\n        }\n        static isRgbColorObject(obj) {\n            return (isRgbColorComponent(obj, 'r') &&\n                isRgbColorComponent(obj, 'g') &&\n                isRgbColorComponent(obj, 'b'));\n        }\n        static isRgbaColorObject(obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n        }\n        static isColorObject(obj) {\n            return this.isRgbColorObject(obj);\n        }\n        static equals(v1, v2) {\n            if (v1.mode_ !== v2.mode_) {\n                return false;\n            }\n            const comps1 = v1.comps_;\n            const comps2 = v2.comps_;\n            for (let i = 0; i < comps1.length; i++) {\n                if (comps1[i] !== comps2[i]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        get mode() {\n            return this.mode_;\n        }\n        getComponents(opt_mode) {\n            return appendAlphaComponent(convertColorMode(removeAlphaComponent(this.comps_), this.mode_, opt_mode || this.mode_), this.comps_[3]);\n        }\n        toRgbaObject() {\n            const rgbComps = this.getComponents('rgb');\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3],\n            };\n        }\n    }\n\n    const className$b = ClassName('colp');\n    class ColorPickerView {\n        constructor(doc, config) {\n            this.alphaViews_ = null;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            const hsvElem = doc.createElement('div');\n            hsvElem.classList.add(className$b('hsv'));\n            const svElem = doc.createElement('div');\n            svElem.classList.add(className$b('sv'));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            const hElem = doc.createElement('div');\n            hElem.classList.add(className$b('h'));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            const rgbElem = doc.createElement('div');\n            rgbElem.classList.add(className$b('rgb'));\n            this.textView_ = config.textView;\n            rgbElem.appendChild(this.textView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text,\n                };\n                const aElem = doc.createElement('div');\n                aElem.classList.add(className$b('a'));\n                const apElem = doc.createElement('div');\n                apElem.classList.add(className$b('ap'));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                const atElem = doc.createElement('div');\n                atElem.classList.add(className$b('at'));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n        }\n        get allFocusableElements() {\n            const elems = [\n                this.svPaletteView_.element,\n                this.hPaletteView_.element,\n                this.textView_.modeSelectElement,\n                ...this.textView_.textViews.map((v) => v.inputElement),\n            ];\n            if (this.alphaViews_) {\n                elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n            }\n            return elems;\n        }\n    }\n\n    function parseColorInputParams(params) {\n        const p = ParamsParsers;\n        return parseParams(params, {\n            alpha: p.optional.boolean,\n            expanded: p.optional.boolean,\n            picker: p.optional.custom(parsePickerLayout),\n        });\n    }\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n\n    function parseCssNumberOrPercentage(text, maxValue) {\n        const m = text.match(/^(.+)%$/);\n        if (!m) {\n            return Math.min(parseFloat(text), maxValue);\n        }\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    const ANGLE_TO_DEG_MAP = {\n        deg: (angle) => angle,\n        grad: (angle) => (angle * 360) / 400,\n        rad: (angle) => (angle * 360) / (2 * Math.PI),\n        turn: (angle) => angle * 360,\n    };\n    function parseCssNumberOrAngle(text) {\n        const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) {\n            return parseFloat(text);\n        }\n        const angle = parseFloat(m[1]);\n        const unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    const NOTATION_TO_PARSER_MAP = {\n        'func.rgb': (text) => {\n            const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.rgba': (text) => {\n            const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.hsl': (text) => {\n            const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'func.hsla': (text) => {\n            const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'hex.rgb': (text) => {\n            const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1] + mRgb[1], 16),\n                    parseInt(mRgb[2] + mRgb[2], 16),\n                    parseInt(mRgb[3] + mRgb[3], 16),\n                ], 'rgb');\n            }\n            const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1], 16),\n                    parseInt(mRrggbb[2], 16),\n                    parseInt(mRrggbb[3], 16),\n                ], 'rgb');\n            }\n            return null;\n        },\n        'hex.rgba': (text) => {\n            const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1] + mRgb[1], 16),\n                    parseInt(mRgb[2] + mRgb[2], 16),\n                    parseInt(mRgb[3] + mRgb[3], 16),\n                    mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1], 16),\n                    parseInt(mRrggbb[2], 16),\n                    parseInt(mRrggbb[3], 16),\n                    mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            return null;\n        },\n    };\n    function getColorNotation(text) {\n        const notations = Object.keys(NOTATION_TO_PARSER_MAP);\n        return notations.reduce((result, notation) => {\n            if (result) {\n                return result;\n            }\n            const subparser = NOTATION_TO_PARSER_MAP[notation];\n            return subparser(text) ? notation : null;\n        }, null);\n    }\n    const CompositeColorParser = (text) => {\n        const notation = getColorNotation(text);\n        return notation ? NOTATION_TO_PARSER_MAP[notation](text) : null;\n    };\n    function hasAlphaComponent(notation) {\n        return (notation === 'func.hsla' ||\n            notation === 'func.rgba' ||\n            notation === 'hex.rgba');\n    }\n    function colorFromString(value) {\n        if (typeof value === 'string') {\n            const cv = CompositeColorParser(value);\n            if (cv) {\n                return cv;\n            }\n        }\n        return Color.black();\n    }\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = '#') {\n        const hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = '#') {\n        const rgbaComps = value.getComponents('rgb');\n        const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value) {\n        const formatter = createNumberFormatter(0);\n        const comps = removeAlphaComponent(value.getComponents('rgb')).map((comp) => formatter(comp));\n        return `rgb(${comps.join(', ')})`;\n    }\n    function colorToFunctionalRgbaString(value) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(0);\n        const comps = value.getComponents('rgb').map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n        return `hsl(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        const comps = value\n            .getComponents('hsl')\n            .map((comp, index) => formatters[index](comp));\n        return `hsla(${comps.join(', ')})`;\n    }\n    const NOTATION_TO_STRINGIFIER_MAP = {\n        'func.hsl': colorToFunctionalHslString,\n        'func.hsla': colorToFunctionalHslaString,\n        'func.rgb': colorToFunctionalRgbString,\n        'func.rgba': colorToFunctionalRgbaString,\n        'hex.rgb': colorToHexRgbString,\n        'hex.rgba': colorToHexRgbaString,\n    };\n    function getColorStringifier(notation) {\n        return NOTATION_TO_STRINGIFIER_MAP[notation];\n    }\n\n    const className$a = ClassName('apl');\n    class APaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a());\n            config.viewProps.bindTabIndex(this.element);\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$a('b'));\n            this.element.appendChild(barElem);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$a('c'));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$a('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$a('p'));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const rgbaComps = c.getComponents('rgb');\n            const leftColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n            const rightColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n            const gradientComps = [\n                'to right',\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor),\n            ];\n            this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class APaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const alpha = d.point.x / d.bounds.width;\n            const c = this.value.rawValue;\n            const [h, s, v] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, alpha], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, a + step], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$9 = ClassName('coltxt');\n    function createModeSelectElement(doc) {\n        const selectElem = doc.createElement('select');\n        const items = [\n            { text: 'RGB', value: 'rgb' },\n            { text: 'HSL', value: 'hsl' },\n            { text: 'HSV', value: 'hsv' },\n        ];\n        selectElem.appendChild(items.reduce((frag, item) => {\n            const optElem = doc.createElement('option');\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    class ColorTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            const modeElem = doc.createElement('div');\n            modeElem.classList.add(className$9('m'));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$9('ms'));\n            modeElem.appendChild(this.modeSelectElement);\n            const modeMarkerElem = doc.createElement('div');\n            modeMarkerElem.classList.add(className$9('mm'));\n            modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            const textsElem = doc.createElement('div');\n            textsElem.classList.add(className$9('w'));\n            this.element.appendChild(textsElem);\n            this.textsElem_ = textsElem;\n            this.textViews_ = config.textViews;\n            this.applyTextViews_();\n            bindValue(config.colorMode, (mode) => {\n                this.modeElem_.value = mode;\n            });\n        }\n        get modeSelectElement() {\n            return this.modeElem_;\n        }\n        get textViews() {\n            return this.textViews_;\n        }\n        set textViews(textViews) {\n            this.textViews_ = textViews;\n            this.applyTextViews_();\n        }\n        applyTextViews_() {\n            removeChildElements(this.textsElem_);\n            const doc = this.element.ownerDocument;\n            this.textViews_.forEach((v) => {\n                const compElem = doc.createElement('div');\n                compElem.classList.add(className$9('c'));\n                compElem.appendChild(v.element);\n                this.textsElem_.appendChild(compElem);\n            });\n        }\n    }\n\n    const FORMATTER = createNumberFormatter(0);\n    const MODE_TO_CONSTRAINT_MAP = {\n        rgb: () => {\n            return new RangeConstraint({ min: 0, max: 255 });\n        },\n        hsl: (index) => {\n            return index === 0\n                ? new RangeConstraint({ min: 0, max: 360 })\n                : new RangeConstraint({ min: 0, max: 100 });\n        },\n        hsv: (index) => {\n            return index === 0\n                ? new RangeConstraint({ min: 0, max: 360 })\n                : new RangeConstraint({ min: 0, max: 100 });\n        },\n    };\n    function createComponentController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n            baseStep: getBaseStepForColor(false),\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                draggingScale: 1,\n                formatter: FORMATTER,\n            }),\n            value: createValue(0, {\n                constraint: MODE_TO_CONSTRAINT_MAP[config.colorMode](index),\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class ColorTextController {\n        constructor(doc, config) {\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.colorMode = createValue(this.value.rawValue.mode);\n            this.ccs_ = this.createComponentControllers_(doc);\n            this.view = new ColorTextView(doc, {\n                colorMode: this.colorMode,\n                textViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n            });\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n        }\n        createComponentControllers_(doc) {\n            const cc = {\n                colorMode: this.colorMode.rawValue,\n                parser: this.parser_,\n                viewProps: this.viewProps,\n            };\n            const ccs = [\n                createComponentController(doc, cc, 0),\n                createComponentController(doc, cc, 1),\n                createComponentController(doc, cc, 2),\n            ];\n            ccs.forEach((cs, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: cs.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents(this.colorMode.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const pickedMode = this.colorMode.rawValue;\n                        const comps = p.rawValue.getComponents(pickedMode);\n                        comps[index] = s.rawValue;\n                        return new Color(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode);\n                    },\n                });\n            });\n            return ccs;\n        }\n        onModeSelectChange_(ev) {\n            const selectElem = ev.currentTarget;\n            this.colorMode.rawValue = selectElem.value;\n            this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n            this.view.textViews = [\n                this.ccs_[0].view,\n                this.ccs_[1].view,\n                this.ccs_[2].view,\n            ];\n        }\n    }\n\n    const className$8 = ClassName('hpl');\n    class HPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindTabIndex(this.element);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$8('c'));\n            this.element.appendChild(colorElem);\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$8('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const [h] = c.getComponents('hsv');\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([h, 100, 100], 'hsv'));\n            const left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class HPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const hue = mapRange(d.point.x, 0, d.bounds.width, 0, 360);\n            const c = this.value.rawValue;\n            const [, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([hue, s, v, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h + step, s, v, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$7 = ClassName('svp');\n    const CANVAS_RESOL = 64;\n    class SvPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindTabIndex(this.element);\n            const canvasElem = doc.createElement('canvas');\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$7('c'));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$7('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const hsvComps = c.getComponents('hsv');\n            const width = this.canvasElement.width;\n            const height = this.canvasElement.height;\n            const imgData = ctx.getImageData(0, 0, width, height);\n            const data = imgData.data;\n            for (let iy = 0; iy < height; iy++) {\n                for (let ix = 0; ix < width; ix++) {\n                    const s = mapRange(ix, 0, width, 0, 100);\n                    const v = mapRange(iy, 0, height, 100, 0);\n                    const rgbComps = hsvToRgb(hsvComps[0], s, v);\n                    const i = (iy * width + ix) * 4;\n                    data[i] = rgbComps[0];\n                    data[i + 1] = rgbComps[1];\n                    data[i + 2] = rgbComps[2];\n                    data[i + 3] = 255;\n                }\n            }\n            ctx.putImageData(imgData, 0, 0);\n            const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n            const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = `${top}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class SvPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n            const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n            const [h, , , a] = this.value.rawValue.getComponents('hsv');\n            this.value.setRawValue(new Color([h, saturation, value, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(new Color([h, s + ds, v + dv, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class ColorPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.hPaletteC_ = new HPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.svPaletteC_ = new SvPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.alphaIcs_ = config.supportsAlpha\n                ? {\n                    palette: new APaletteController(doc, {\n                        value: this.value,\n                        viewProps: this.viewProps,\n                    }),\n                    text: new NumberTextController(doc, {\n                        parser: parseNumber,\n                        baseStep: 0.1,\n                        props: ValueMap.fromObject({\n                            draggingScale: 0.01,\n                            formatter: createNumberFormatter(2),\n                        }),\n                        value: createValue(0, {\n                            constraint: new RangeConstraint({ min: 0, max: 1 }),\n                        }),\n                        viewProps: this.viewProps,\n                    }),\n                }\n                : null;\n            if (this.alphaIcs_) {\n                connectValues({\n                    primary: this.value,\n                    secondary: this.alphaIcs_.text.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents()[3];\n                    },\n                    backward: (p, s) => {\n                        const comps = p.rawValue.getComponents();\n                        comps[3] = s.rawValue;\n                        return new Color(comps, p.rawValue.mode);\n                    },\n                });\n            }\n            this.textC_ = new ColorTextController(doc, {\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_\n                    ? {\n                        palette: this.alphaIcs_.palette.view,\n                        text: this.alphaIcs_.text.view,\n                    }\n                    : null,\n                hPaletteView: this.hPaletteC_.view,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    const className$6 = ClassName('colsw');\n    class ColorSwatchView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$6('sw'));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$6('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            this.update_();\n        }\n        update_() {\n            const value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ColorSwatchController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ColorSwatchView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class ColorController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.swatchC_ = new ColorSwatchController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            const buttonElem = this.swatchC_.view.buttonElement;\n            buttonElem.addEventListener('blur', this.onButtonBlur_);\n            buttonElem.addEventListener('click', this.onButtonClick_);\n            this.textC_ = new TextController(doc, {\n                parser: config.parser,\n                props: ValueMap.fromObject({\n                    formatter: config.formatter,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n            });\n            this.view.swatchElement.appendChild(this.swatchC_.view.element);\n            this.view.textElement.appendChild(this.textC_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new ColorPickerController(doc, {\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(pickerC.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        get textController() {\n            return this.textC_;\n        }\n        onButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.swatchC_.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.swatchC_.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function colorFromObject(value) {\n        if (Color.isColorObject(value)) {\n            return Color.fromObject(value);\n        }\n        return Color.black();\n    }\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n            return (result << 8) | (Math.floor(comp) & 0xff);\n        }, 0);\n    }\n    function colorToRgbaNumber(value) {\n        return (value.getComponents('rgb').reduce((result, comp, index) => {\n            const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return (result << 8) | hex;\n        }, 0) >>> 0);\n    }\n    function numberToRgbColor(num) {\n        return new Color([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n    }\n    function numberToRgbaColor(num) {\n        return new Color([\n            (num >> 24) & 0xff,\n            (num >> 16) & 0xff,\n            (num >> 8) & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1),\n        ], 'rgb');\n    }\n    function colorFromRgbNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbColor(value);\n    }\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbaColor(value);\n    }\n\n    function createColorStringWriter(notation) {\n        const stringify = getColorStringifier(notation);\n        return (target, value) => {\n            writePrimitive(target, stringify(value));\n        };\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return (target, value) => {\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value) {\n        const obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n        target.writeProperty('a', obj.a);\n    }\n    function writeRgbColorObject(target, value) {\n        const obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha) {\n        return supportsAlpha ? writeRgbaColorObject : writeRgbColorObject;\n    }\n\n    function shouldSupportAlpha$1(inputParams) {\n        return 'alpha' in inputParams && inputParams.alpha === true;\n    }\n    function createFormatter$1(supportsAlpha) {\n        return supportsAlpha\n            ? (v) => colorToHexRgbaString(v, '0x')\n            : (v) => colorToHexRgbString(v, '0x');\n    }\n    const NumberColorInputPlugin = {\n        id: 'input-color-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            if (!('view' in params)) {\n                return null;\n            }\n            if (params.view !== 'color') {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => {\n                return shouldSupportAlpha$1(args.params)\n                    ? colorFromRgbaNumber\n                    : colorFromRgbNumber;\n            },\n            equals: Color.equals,\n            writer: (args) => {\n                return createColorNumberWriter(shouldSupportAlpha$1(args.params));\n            },\n        },\n        controller: (args) => {\n            const supportsAlpha = shouldSupportAlpha$1(args.params);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createFormatter$1(supportsAlpha),\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function shouldSupportAlpha(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    const ObjectColorInputPlugin = {\n        id: 'input-color-object',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Color.isColorObject(value)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => colorFromObject,\n            equals: Color.equals,\n            writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue)),\n        },\n        controller: (args) => {\n            const supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            const formatter = supportsAlpha\n                ? colorToHexRgbaString\n                : colorToHexRgbString;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: formatter,\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const StringColorInputPlugin = {\n        id: 'input-color-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            if ('view' in params && params.view === 'text') {\n                return null;\n            }\n            const notation = getColorNotation(value);\n            if (!notation) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => colorFromString,\n            equals: Color.equals,\n            writer: (args) => {\n                const notation = getColorNotation(args.initialValue);\n                if (!notation) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return createColorStringWriter(notation);\n            },\n        },\n        controller: (args) => {\n            const notation = getColorNotation(args.initialValue);\n            if (!notation) {\n                throw TpError.shouldNeverHappen();\n            }\n            const stringifier = getColorStringifier(notation);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: stringifier,\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: hasAlphaComponent(notation),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$5 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$5('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (('max' in params && !isEmpty(params.max)) ||\n            ('min' in params && !isEmpty(params.min))) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n    function createConstraint$4(params) {\n        const constraints = [];\n        const sc = createStepConstraint(params);\n        if (sc) {\n            constraints.push(sc);\n        }\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function findRange(constraint) {\n        const c = constraint ? findConstraint(constraint, RangeConstraint) : null;\n        if (!c) {\n            return [undefined, undefined];\n        }\n        return [c.minValue, c.maxValue];\n    }\n    function estimateSuitableRange(constraint) {\n        const [min, max] = findRange(constraint);\n        return [min !== null && min !== void 0 ? min : 0, max !== null && max !== void 0 ? max : 100];\n    }\n    const NumberInputPlugin = {\n        id: 'input-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                options: p.optional.custom(parseListOptions),\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            constraint: (args) => createConstraint$4(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a, _b;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            const formatter = (_b = ('format' in args.params ? args.params.format : undefined)) !== null && _b !== void 0 ? _b : createNumberFormatter(getSuitableDecimalDigits(c, value.rawValue));\n            if (c && findConstraint(c, RangeConstraint)) {\n                const [min, max] = estimateSuitableRange(c);\n                return new SliderTextController(args.document, {\n                    baseStep: getBaseStep(c),\n                    parser: parseNumber,\n                    sliderProps: ValueMap.fromObject({\n                        maxValue: max,\n                        minValue: min,\n                    }),\n                    textProps: ValueMap.fromObject({\n                        draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                        formatter: formatter,\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new NumberTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                props: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point2d {\n        constructor(x = 0, y = 0) {\n            this.x = x;\n            this.y = y;\n        }\n        getComponents() {\n            return [this.x, this.y];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            if (typeof x !== 'number' || typeof y !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n            };\n        }\n    }\n    const Point2dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point2d(...comps),\n    };\n\n    const className$4 = ClassName('p2d');\n    class Point2dView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.expanded, valueToClassName(this.element, className$4(undefined, 'expanded')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$4('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$4('b'));\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n            config.viewProps.bindDisabled(buttonElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$4('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$4('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$3 = ClassName('p2dp');\n    class Point2dPickerView {\n        constructor(doc, config) {\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            if (config.layout === 'popup') {\n                this.element.classList.add(className$3(undefined, 'p'));\n            }\n            const padElem = doc.createElement('div');\n            padElem.classList.add(className$3('p'));\n            config.viewProps.bindTabIndex(padElem);\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$3('g'));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n            xAxisElem.classList.add(className$3('ax'));\n            xAxisElem.setAttributeNS(null, 'x1', '0');\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\n            this.svgElem_.appendChild(xAxisElem);\n            const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n            yAxisElem.classList.add(className$3('ax'));\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\n            yAxisElem.setAttributeNS(null, 'y1', '0');\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\n            this.svgElem_.appendChild(yAxisElem);\n            const lineElem = doc.createElementNS(SVG_NS, 'line');\n            lineElem.classList.add(className$3('l'));\n            lineElem.setAttributeNS(null, 'x1', '50%');\n            lineElem.setAttributeNS(null, 'y1', '50%');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$3('m'));\n            this.padElement.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        get allFocusableElements() {\n            return [this.padElement];\n        }\n        update_() {\n            const [x, y] = this.value.rawValue.getComponents();\n            const max = this.maxValue_;\n            const px = mapRange(x, -max, +max, 0, 100);\n            const py = mapRange(y, -max, +max, 0, 100);\n            const ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n            this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n            this.markerElem_.style.left = `${px}%`;\n            this.markerElem_.style.top = `${ipy}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n        onFoldableChange_() {\n            this.update_();\n        }\n    }\n\n    function computeOffset(ev, baseSteps, invertsY) {\n        return [\n            getStepForKey(baseSteps[0], getHorizontalStepKeys(ev)),\n            getStepForKey(baseSteps[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n        ];\n    }\n    class Point2dPickerController {\n        constructor(doc, config) {\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPickerView(doc, {\n                invertsY: this.invertsY_,\n                layout: config.layout,\n                maxValue: this.maxValue_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.padElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n            this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const max = this.maxValue_;\n            const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n            const py = mapRange(this.invertsY_ ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n            this.value.setRawValue(new Point2d(px, py), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPadKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPadKeyUp_(ev) {\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class Point2dController {\n        constructor(doc, config) {\n            var _a, _b;\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const padC = new Point2dPickerController(doc, {\n                baseSteps: [config.axes[0].baseStep, config.axes[1].baseStep],\n                invertsY: config.invertsY,\n                layout: config.pickerLayout,\n                maxValue: config.maxValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            padC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = padC;\n            this.textC_ = new PointNdTextController(doc, {\n                assembly: Point2dAssembly,\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new Point2dView(doc, {\n                expanded: this.foldable_.value('expanded'),\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.textC_.view.element);\n            (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n            (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onPadButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onPadButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value)\n            ? new Point2d(value.x, value.y)\n            : new Point2d();\n    }\n    function writePoint2d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n    }\n\n    function createDimensionConstraint$2(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$3(params) {\n        return new PointNdConstraint({\n            assembly: Point2dAssembly,\n            components: [\n                createDimensionConstraint$2('x' in params ? params.x : undefined),\n                createDimensionConstraint$2('y' in params ? params.y : undefined),\n            ],\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        const rc = constraint && findConstraint(constraint, RangeConstraint);\n        if (rc) {\n            return Math.max(Math.abs(rc.minValue || 0), Math.abs(rc.maxValue || 0));\n        }\n        const step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    function getSuitableMaxValue(initialValue, constraint) {\n        const xc = constraint instanceof PointNdConstraint\n            ? constraint.components[0]\n            : undefined;\n        const yc = constraint instanceof PointNdConstraint\n            ? constraint.components[1]\n            : undefined;\n        const xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        const yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createAxis$2(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    function shouldInvertY(params) {\n        if (!('y' in params)) {\n            return false;\n        }\n        const yParams = params.y;\n        if (!yParams) {\n            return false;\n        }\n        return 'inverted' in yParams ? !!yParams.inverted : false;\n    }\n    const Point2dInputPlugin = {\n        id: 'input-point2d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point2d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                expanded: p.optional.boolean,\n                picker: p.optional.custom(parsePickerLayout),\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.object({\n                    inverted: p.optional.boolean,\n                    max: p.optional.number,\n                    min: p.optional.number,\n                    step: p.optional.number,\n                }),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point2dFromUnknown,\n            constraint: (args) => createConstraint$3(args.params),\n            equals: Point2d.equals,\n            writer: (_args) => writePoint2d,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new Point2dController(doc, {\n                axes: [\n                    createAxis$2(value.rawValue.x, c.components[0]),\n                    createAxis$2(value.rawValue.y, c.components[1]),\n                ],\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                invertsY: shouldInvertY(args.params),\n                maxValue: getSuitableMaxValue(value.rawValue, c),\n                parser: parseNumber,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point3d {\n        constructor(x = 0, y = 0, z = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n            };\n        }\n    }\n    const Point3dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point3d(...comps),\n    };\n\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value)\n            ? new Point3d(value.x, value.y, value.z)\n            : new Point3d();\n    }\n    function writePoint3d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n    }\n\n    function createDimensionConstraint$1(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$2(params) {\n        return new PointNdConstraint({\n            assembly: Point3dAssembly,\n            components: [\n                createDimensionConstraint$1('x' in params ? params.x : undefined),\n                createDimensionConstraint$1('y' in params ? params.y : undefined),\n                createDimensionConstraint$1('z' in params ? params.z : undefined),\n            ],\n        });\n    }\n    function createAxis$1(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point3dInputPlugin = {\n        id: 'input-point3d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point3d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point3dFromUnknown,\n            constraint: (args) => createConstraint$2(args.params),\n            equals: Point3d.equals,\n            writer: (_args) => writePoint3d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point3dAssembly,\n                axes: [\n                    createAxis$1(value.rawValue.x, c.components[0]),\n                    createAxis$1(value.rawValue.y, c.components[1]),\n                    createAxis$1(value.rawValue.z, c.components[2]),\n                ],\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point4d {\n        constructor(x = 0, y = 0, z = 0, w = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            this.w = w;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z, this.w];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            const w = obj.w;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number' ||\n                typeof w !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n                w: this.w,\n            };\n        }\n    }\n    const Point4dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point4d(...comps),\n    };\n\n    function point4dFromUnknown(value) {\n        return Point4d.isObject(value)\n            ? new Point4d(value.x, value.y, value.z, value.w)\n            : new Point4d();\n    }\n    function writePoint4d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n        target.writeProperty('w', value.w);\n    }\n\n    function createDimensionConstraint(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$1(params) {\n        return new PointNdConstraint({\n            assembly: Point4dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined),\n                createDimensionConstraint('y' in params ? params.y : undefined),\n                createDimensionConstraint('z' in params ? params.z : undefined),\n                createDimensionConstraint('w' in params ? params.w : undefined),\n            ],\n        });\n    }\n    function createAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point4dInputPlugin = {\n        id: 'input-point4d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point4d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n                w: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point4dFromUnknown,\n            constraint: (args) => createConstraint$1(args.params),\n            equals: Point4d.equals,\n            writer: (_args) => writePoint4d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point4dAssembly,\n                axes: value.rawValue\n                    .getComponents()\n                    .map((comp, index) => createAxis(comp, c.components[index])),\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function createConstraint(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const StringInputPlugin = {\n        id: 'input-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n            constraint: (args) => createConstraint(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new TextController(doc, {\n                parser: (v) => v,\n                props: ValueMap.fromObject({\n                    formatter: formatString,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    const className$2 = ClassName('mll');\n    class MultiLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            config.viewProps.bindClassModifiers(this.element);\n            const textareaElem = doc.createElement('textarea');\n            textareaElem.classList.add(className$2('i'));\n            textareaElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            textareaElem.readOnly = true;\n            config.viewProps.bindDisabled(textareaElem);\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const elem = this.textareaElem_;\n            const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            const lines = [];\n            this.value.rawValue.forEach((value) => {\n                if (value !== undefined) {\n                    lines.push(this.formatter_(value));\n                }\n            });\n            elem.textContent = lines.join('\\n');\n            if (shouldScroll) {\n                elem.scrollTop = elem.scrollHeight;\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class MultiLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$1 = ClassName('sgl');\n    class SingleLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$1('i'));\n            inputElem.readOnly = true;\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const values = this.value.rawValue;\n            const lastValue = values[values.length - 1];\n            this.inputElement.value =\n                lastValue !== undefined ? this.formatter_(lastValue) : '';\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class SingleLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const BooleanMonitorPlugin = {\n        id: 'monitor-bool',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            if (args.value.rawValue.length === 1) {\n                return new SingleLogController(args.document, {\n                    formatter: BooleanFormatter,\n                    value: args.value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class GraphCursor {\n        constructor() {\n            this.emitter = new Emitter();\n            this.index_ = -1;\n        }\n        get index() {\n            return this.index_;\n        }\n        set index(index) {\n            const changed = this.index_ !== index;\n            if (changed) {\n                this.index_ = index;\n                this.emitter.emit('change', {\n                    index: index,\n                    sender: this,\n                });\n            }\n        }\n    }\n\n    const className = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.minValue_ = config.minValue;\n            this.maxValue_ = config.maxValue;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.minValue_;\n            const max = this.maxValue_;\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.index];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.index, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className('t', 'a'))) {\n                tooltipElem.classList.add(className('t', 'a'), className('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = new GraphCursor();\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.index = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.index = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.index = -1;\n                return;\n            }\n            this.cursor_.index = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.index = -1;\n        }\n    }\n\n    function createFormatter(params) {\n        return 'format' in params && !isEmpty(params.format)\n            ? params.format\n            : createNumberFormatter(2);\n    }\n    function createTextMonitor(args) {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: createFormatter(args.params),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function createGraphMonitor(args) {\n        var _a, _b, _c;\n        return new GraphLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            maxValue: (_b = ('max' in args.params ? args.params.max : null)) !== null && _b !== void 0 ? _b : 100,\n            minValue: (_c = ('min' in args.params ? args.params.min : null)) !== null && _c !== void 0 ? _c : 0,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function shouldShowGraph(params) {\n        return 'view' in params && params.view === 'graph';\n    }\n    const NumberMonitorPlugin = {\n        id: 'monitor-number',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n                view: p.optional.string,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n            reader: (_args) => numberFromUnknown,\n        },\n        controller: (args) => {\n            if (shouldShowGraph(args.params)) {\n                return createGraphMonitor(args);\n            }\n            return createTextMonitor(args);\n        },\n    };\n\n    const StringMonitorPlugin = {\n        id: 'monitor-string',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n                multiline: p.optional.boolean,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const multiline = value.rawValue.length > 1 ||\n                ('multiline' in args.params && args.params.multiline);\n            if (multiline) {\n                return new MultiLogController(args.document, {\n                    formatter: formatString,\n                    lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new SingleLogController(args.document, {\n                formatter: formatString,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class InputBinding {\n        constructor(config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue !== undefined) {\n                this.value.rawValue = this.reader(targetValue);\n            }\n        }\n        write_(rawValue) {\n            this.writer(this.target, rawValue);\n        }\n        onValueChange_(ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit('change', {\n                options: ev.options,\n                rawValue: ev.rawValue,\n                sender: this,\n            });\n        }\n    }\n\n    function createInputBindingController(plugin, args) {\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const p = ParamsParsers;\n        const valueArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(valueArgs);\n        const constraint = plugin.binding.constraint\n            ? plugin.binding.constraint(valueArgs)\n            : undefined;\n        const value = createValue(reader(result.initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals,\n        });\n        const binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs),\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            constraint: constraint,\n            document: args.document,\n            initialValue: result.initialValue,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = p.optional.string(args.params.label).value;\n        return new InputBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label || args.target.key,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class MonitorBinding {\n        constructor(config) {\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on('tick', this.onTick_);\n            this.read();\n        }\n        dispose() {\n            this.ticker.dispose();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue === undefined) {\n                return;\n            }\n            const buffer = this.value.rawValue;\n            const newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit('update', {\n                rawValue: newValue,\n                sender: this,\n            });\n        }\n        onTick_(_) {\n            this.read();\n        }\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createMonitorBindingController(plugin, args) {\n        var _a, _b, _c;\n        const P = ParamsParsers;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const bindingArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(bindingArgs);\n        const bufferSize = (_b = (_a = P.optional.number(args.params.bufferSize).value) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n            plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n        const interval = P.optional.number(args.params.interval).value;\n        const binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, interval),\n            value: initializeBuffer(bufferSize),\n        });\n        const disabled = P.optional.boolean(args.params.disabled).value;\n        const hidden = P.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            document: args.document,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = (_c = P.optional.string(args.params.label).value) !== null && _c !== void 0 ? _c : args.target.key;\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class PluginPool {\n        constructor() {\n            this.pluginsMap_ = {\n                blades: [],\n                inputs: [],\n                monitors: [],\n            };\n        }\n        getAll() {\n            return [\n                ...this.pluginsMap_.blades,\n                ...this.pluginsMap_.inputs,\n                ...this.pluginsMap_.monitors,\n            ];\n        }\n        register(r) {\n            if (r.type === 'blade') {\n                this.pluginsMap_.blades.unshift(r);\n            }\n            else if (r.type === 'input') {\n                this.pluginsMap_.inputs.unshift(r);\n            }\n            else if (r.type === 'monitor') {\n                this.pluginsMap_.monitors.unshift(r);\n            }\n        }\n        createInput(document, target, params) {\n            const initialValue = target.read();\n            if (isEmpty(initialValue)) {\n                throw new TpError({\n                    context: {\n                        key: target.key,\n                    },\n                    type: 'nomatchingcontroller',\n                });\n            }\n            const bc = this.pluginsMap_.inputs.reduce((result, plugin) => result ||\n                createInputBindingController(plugin, {\n                    document: document,\n                    target: target,\n                    params: params,\n                }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createMonitor(document, target, params) {\n            const bc = this.pluginsMap_.monitors.reduce((result, plugin) => result ||\n                createMonitorBindingController(plugin, {\n                    document: document,\n                    params: params,\n                    target: target,\n                }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createBlade(document, params) {\n            const bc = this.pluginsMap_.blades.reduce((result, plugin) => result ||\n                createBladeController(plugin, {\n                    document: document,\n                    params: params,\n                }), null);\n            if (!bc) {\n                throw new TpError({\n                    type: 'nomatchingview',\n                    context: {\n                        params: params,\n                    },\n                });\n            }\n            return bc;\n        }\n        createBladeApi(bc) {\n            if (bc instanceof InputBindingController) {\n                return new InputBindingApi(bc);\n            }\n            if (bc instanceof MonitorBindingController) {\n                return new MonitorBindingApi(bc);\n            }\n            if (bc instanceof RackController) {\n                return new RackApi(bc, this);\n            }\n            const api = this.pluginsMap_.blades.reduce((result, plugin) => result ||\n                plugin.api({\n                    controller: bc,\n                    pool: this,\n                }), null);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n    }\n\n    function createDefaultPluginPool() {\n        const pool = new PluginPool();\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            Point4dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n            BooleanMonitorPlugin,\n            StringMonitorPlugin,\n            NumberMonitorPlugin,\n            ButtonBladePlugin,\n            FolderBladePlugin,\n            SeparatorBladePlugin,\n            TabBladePlugin,\n        ].forEach((p) => {\n            pool.register(p);\n        });\n        return pool;\n    }\n\n    class ListApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get options() {\n            return this.controller_.valueController.props.get('options');\n        }\n        set options(options) {\n            this.controller_.valueController.props.set('options', options);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class SliderApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get maxValue() {\n            return this.controller_.valueController.sliderController.props.get('maxValue');\n        }\n        set maxValue(maxValue) {\n            this.controller_.valueController.sliderController.props.set('maxValue', maxValue);\n        }\n        get minValue() {\n            return this.controller_.valueController.sliderController.props.get('minValue');\n        }\n        set minValue(minValue) {\n            this.controller_.valueController.sliderController.props.set('minValue', minValue);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class TextApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get formatter() {\n            return this.controller_.valueController.props.get('formatter');\n        }\n        set formatter(formatter) {\n            this.controller_.valueController.props.set('formatter', formatter);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    const ListBladePlugin = (function () {\n        return {\n            id: 'list',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    options: p.required.custom(parseListOptions),\n                    value: p.required.raw,\n                    view: p.required.constant('list'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                const ic = new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: normalizeListOptions(args.params.options),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof ListController)) {\n                    return null;\n                }\n                return new ListApi(args.controller);\n            },\n        };\n    })();\n\n    /**\n     * @hidden\n     */\n    function exportPresetJson(targets) {\n        return targets.reduce((result, target) => {\n            return Object.assign(result, {\n                [target.presetKey]: target.read(),\n            });\n        }, {});\n    }\n    /**\n     * @hidden\n     */\n    function importPresetJson(targets, preset) {\n        targets.forEach((target) => {\n            const value = preset[target.presetKey];\n            if (value !== undefined) {\n                target.write(value);\n            }\n        });\n    }\n\n    class RootApi extends FolderApi {\n        /**\n         * @hidden\n         */\n        constructor(controller, pool) {\n            super(controller, pool);\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        /**\n         * Imports a preset of all inputs.\n         * @param preset The preset object to import.\n         */\n        importPreset(preset) {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            importPresetJson(targets, preset);\n            this.refresh();\n        }\n        /**\n         * Exports a preset of all inputs.\n         * @return An exported preset object.\n         */\n        exportPreset() {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        }\n        /**\n         * Refreshes all bindings of the pane.\n         */\n        refresh() {\n            // Force-read all input bindings\n            this.controller_.rackController.rack\n                .find(InputBindingController)\n                .forEach((ibc) => {\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller_.rackController.rack\n                .find(MonitorBindingController)\n                .forEach((mbc) => {\n                mbc.binding.read();\n            });\n        }\n    }\n\n    class RootController extends FolderController {\n        constructor(doc, config) {\n            super(doc, {\n                expanded: config.expanded,\n                blade: config.blade,\n                props: config.props,\n                root: true,\n                viewProps: config.viewProps,\n            });\n        }\n    }\n\n    const SliderBladePlugin = {\n        id: 'slider',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                max: p.required.number,\n                min: p.required.number,\n                view: p.required.constant('slider'),\n                format: p.optional.function,\n                label: p.optional.string,\n                value: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const v = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n            const vc = new SliderTextController(args.document, {\n                baseStep: 1,\n                parser: parseNumber,\n                sliderProps: ValueMap.fromObject({\n                    maxValue: args.params.max,\n                    minValue: args.params.min,\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(undefined, v),\n                    formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n                }),\n                value: createValue(v),\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof SliderTextController)) {\n                return null;\n            }\n            return new SliderApi(args.controller);\n        },\n    };\n\n    const TextBladePlugin = (function () {\n        return {\n            id: 'text',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    parse: p.required.function,\n                    value: p.required.raw,\n                    view: p.required.constant('text'),\n                    format: p.optional.function,\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                var _a;\n                const ic = new TextController(args.document, {\n                    parser: args.params.parse,\n                    props: ValueMap.fromObject({\n                        formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof TextController)) {\n                    return null;\n                }\n                return new TextApi(args.controller);\n            },\n        };\n    })();\n\n    function createDefaultWrapperElement(doc) {\n        const elem = doc.createElement('div');\n        elem.classList.add(ClassName('dfw')());\n        if (doc.body) {\n            doc.body.appendChild(elem);\n        }\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n            return;\n        }\n        const styleElem = doc.createElement('style');\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    /**\n     * The root pane of Tweakpane.\n     */\n    class Pane extends RootApi {\n        constructor(opt_config) {\n            var _a;\n            const config = opt_config || {};\n            const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            const pool = createDefaultPluginPool();\n            const rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: createBlade(),\n                props: ValueMap.fromObject({\n                    title: config.title,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            super(rootController, pool);\n            this.pool_ = pool;\n            this.containerElem_ = config.container || createDefaultWrapperElement(doc);\n            this.containerElem_.appendChild(this.element);\n            this.doc_ = doc;\n            this.usesDefaultWrapper_ = !config.container;\n            this.setUpDefaultPlugins_();\n        }\n        get document() {\n            if (!this.doc_) {\n                throw TpError.alreadyDisposed();\n            }\n            return this.doc_;\n        }\n        dispose() {\n            const containerElem = this.containerElem_;\n            if (!containerElem) {\n                throw TpError.alreadyDisposed();\n            }\n            if (this.usesDefaultWrapper_) {\n                const parentElem = containerElem.parentElement;\n                if (parentElem) {\n                    parentElem.removeChild(containerElem);\n                }\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            super.dispose();\n        }\n        registerPlugin(bundle) {\n            const plugins = 'plugin' in bundle\n                ? [bundle.plugin]\n                : 'plugins' in bundle\n                    ? bundle.plugins\n                    : [];\n            plugins.forEach((p) => {\n                this.pool_.register(p);\n                this.embedPluginStyle_(p);\n            });\n        }\n        embedPluginStyle_(plugin) {\n            if (plugin.css) {\n                embedStyle(this.document, `plugin-${plugin.id}`, plugin.css);\n            }\n        }\n        setUpDefaultPlugins_() {\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            embedStyle(this.document, 'default', '.tp-lstv_s,.tp-btnv_b,.tp-p2dv_b,.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i,.tp-grlv_g,.tp-sglv_i,.tp-mllv_i,.tp-fldv_b,.tp-rotv_b,.tp-ckbv_i,.tp-coltxtv_ms,.tp-tbiv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-lstv_s,.tp-btnv_b,.tp-p2dv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-lstv_s:hover,.tp-btnv_b:hover,.tp-p2dv_b:hover{background-color:var(--btn-bg-h)}.tp-lstv_s:focus,.tp-btnv_b:focus,.tp-p2dv_b:focus{background-color:var(--btn-bg-f)}.tp-lstv_s:active,.tp-btnv_b:active,.tp-p2dv_b:active{background-color:var(--btn-bg-a)}.tp-lstv_s:disabled,.tp-btnv_b:disabled,.tp-p2dv_b:disabled{opacity:0.5}.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-colswv_sw:hover,.tp-p2dpv_p:hover,.tp-txtv_i:hover{background-color:var(--in-bg-h)}.tp-colswv_sw:focus,.tp-p2dpv_p:focus,.tp-txtv_i:focus{background-color:var(--in-bg-f)}.tp-colswv_sw:active,.tp-p2dpv_p:active,.tp-txtv_i:active{background-color:var(--in-bg-a)}.tp-colswv_sw:disabled,.tp-p2dpv_p:disabled,.tp-txtv_i:disabled{opacity:0.5}.tp-grlv_g,.tp-sglv_i,.tp-mllv_i{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);width:100%}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono,Source Code Pro,Menlo,Courier,monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #2f3137);--bs-sh: var(--tp-base-shadow-color, rgba(0,0,0,0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #2f3137);--cnt-bg: var(--tp-container-background-color, rgba(187,188,196,0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187,188,196,0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187,188,196,0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187,188,196,0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187,188,196,0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187,188,196,0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187,188,196,0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187,188,196,0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187,188,196,0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0,0,0,0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187,188,196,0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(0,0,0,0.2))}.tp-fldv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-rotv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-v-p))}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-rotv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-fldv_c>.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv{margin-left:4px}.tp-fldv_c>.tp-fldv>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c .tp-fldv>.tp-fldv_c,.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-tabv>.tp-tabv_i,.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-fldv_c .tp-tabv>.tp-tabv_c,.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_b,.tp-rotv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-fldv_b:hover,.tp-rotv_b:hover{background-color:var(--cnt-bg-h)}.tp-fldv_b:focus,.tp-rotv_b:focus{background-color:var(--cnt-bg-f)}.tp-fldv_b:active,.tp-rotv_b:active{background-color:var(--cnt-bg-a)}.tp-fldv_b:disabled,.tp-rotv_b:disabled{opacity:0.5}.tp-fldv_m,.tp-rotv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\\'\\';display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px) / 2 - 2px);margin:auto;opacity:0.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m,.tp-rotv.tp-rotv-expanded .tp-rotv_m{transform:none}.tp-fldv_c,.tp-rotv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c,.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c{display:none}.tp-fldv.tp-fldv-expanded>.tp-fldv_c,.tp-rotv.tp-rotv-expanded .tp-rotv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-coltxtv_m,.tp-lstv{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-coltxtv_mm,.tp-lstv_m{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-coltxtv_mm svg,.tp-lstv_m svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-coltxtv_mm svg path,.tp-lstv_m svg path{fill:currentColor}.tp-coltxtv_w,.tp-pndtxtv{display:flex}.tp-coltxtv_c,.tp-pndtxtv_a{width:100%}.tp-coltxtv_c+.tp-coltxtv_c,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-pndtxtv_a{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:0.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:\\'\\';height:2px;left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us) * 4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0,0,0,0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,0.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,0.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br)}.tp-colswv.tp-v-disabled{opacity:0.5}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,0.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:\\'\\';display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left 0.05s, top 0.05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:0.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:0.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:0.5}.tp-mllv_i{display:block;height:calc(var(--bld-us) * 3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:0.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:0.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\\'\\';display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\\'\\';display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:\\'\\';display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:0.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:\\'\\';height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:\\'\\';height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:0.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:0.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:0.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\\'\\';height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:0.1;position:absolute;top:0;transition:border-radius 0.1s, height 0.1s, transform 0.1s, width 0.1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:\\'\\';font-size:0.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}');\n            this.pool_.getAll().forEach((plugin) => {\n                this.embedPluginStyle_(plugin);\n            });\n            this.registerPlugin({\n                plugins: [\n                    SliderBladePlugin,\n                    ListBladePlugin,\n                    TabBladePlugin,\n                    TextBladePlugin,\n                ],\n            });\n        }\n    }\n\n    const VERSION = new Semver('3.0.7');\n\n    exports.BladeApi = BladeApi;\n    exports.ButtonApi = ButtonApi;\n    exports.FolderApi = FolderApi;\n    exports.InputBindingApi = InputBindingApi;\n    exports.ListApi = ListApi;\n    exports.MonitorBindingApi = MonitorBindingApi;\n    exports.Pane = Pane;\n    exports.SeparatorApi = SeparatorApi;\n    exports.SliderApi = SliderApi;\n    exports.TabApi = TabApi;\n    exports.TabPageApi = TabPageApi;\n    exports.TextApi = TextApi;\n    exports.TpChangeEvent = TpChangeEvent;\n    exports.VERSION = VERSION;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","export default function _classPrivateFieldGet(receiver, privateMap) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return privateMap.get(receiver).value;\n}\n","export default function _classPrivateFieldSet(receiver, privateMap, value) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to set private field on non-instance\");\n  }\n\n  var descriptor = privateMap.get(receiver);\n\n  if (!descriptor.writable) {\n    throw new TypeError(\"attempted to set read only private field\");\n  }\n\n  descriptor.value = value;\n  return value;\n}\n","export default function _classPrivateMethodGet(receiver, privateSet, fn) {\n  if (!privateSet.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return fn;\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\n * Returns a string representation of a quatenion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var clone = vec4.clone;\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var fromValues = vec4.fromValues;\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\n\nexport var copy = vec4.copy;\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\n\nexport var set = vec4.set;\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\n\nexport var add = vec4.add;\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\n\nexport var scale = vec4.scale;\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = vec4.dot;\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\n\nexport var lerp = vec4.lerp;\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport var length = vec4.length;\n/**\n * Alias for {@link quat.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\n\nexport var normalize = vec4.normalize;\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat} a The first vector.\n * @param {ReadonlyQuat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var equals = vec4.equals;\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import { mat4, quat, vec3 } from 'gl-matrix';\n\nexport class OrbitControl {\n\n    constructor(canvas, camera, updateCallback) {\n        this.pointerDown = false;\n        this.pointerDownPos = { x: 0, y: 0 };\n        this.pointerPos = { x: 0, y: 0 };\n        this.followPos = { x: 0, y: 0 };\n        this.prevFollowPos = {x: 0, y: 0};\n        this.phi = 0.;\n        this.theta = 0.;\n        this.camera = camera;\n        this.updateCallback = updateCallback;\n\n        canvas.style.touchAction = 'none';\n\n        canvas.addEventListener('pointerdown', e => {\n            this.pointerDownPos = { x: e.clientX, y: e.clientY }\n            this.followPos = { x: e.clientX, y: e.clientY }\n            this.pointerPos = { x: e.clientX, y: e.clientY }\n            this.prevFollowPos = { x: e.clientX, y: e.clientY }\n            this.pointerDownCameraUp = [...this.camera.up];\n            this.pointerDownRotation = [...this.camera.rotation];\n            this.pointerDown = true;\n        });\n        canvas.addEventListener('pointerup', e => {\n            this.pointerDown = false;\n        });\n        canvas.addEventListener('pointermove', e => {\n            if (this.pointerDown) {\n                this.pointerPos = { x: e.clientX, y: e.clientY }\n            }\n        });\n    }\n\n    update() {\n        if (this.pointerDown) {\n            const damping = 10;\n            this.followPos.x += (this.pointerPos.x - this.followPos.x) / damping;\n            this.followPos.y += (this.pointerPos.y - this.followPos.y) / damping;\n\n            const delta = {\n                x: this.followPos.x - this.prevFollowPos.x,\n                y: this.followPos.y - this.prevFollowPos.y\n            };\n            this.prevFollowPos = { ...this.followPos };\n\n            const speed = 0.2;\n            this.phi = delta.x * speed;\n            this.theta = delta.y * speed;\n        } else {\n            this.phi *= 0.96;\n            this.theta *= 0.96;\n        }\n\n        this.camera.rotation[0] -= this.theta;\n        this.camera.rotation[1] -= this.phi;\n\n        const thetaLimitUp = -8;\n        const thetaLimitDown = -80;\n        if (this.camera.rotation[0] > thetaLimitUp) {\n            this.camera.rotation[0] = thetaLimitUp;\n        } else if (this.camera.rotation[0] < thetaLimitDown) {\n            this.camera.rotation[0] = thetaLimitDown;\n        }\n\n        quat.fromEuler(this.camera.orbit, this.camera.rotation[0], this.camera.rotation[1], this.camera.rotation[2]);\n        vec3.transformQuat(this.camera.position, [0, 0, this.camera.distance], this.camera.orbit);\n\n        this.updateCallback();\n    }\n\n}","/*\n * A speed-improved perlin and simplex noise algorithms for 2D.\n *\n * Based on example code by Stefan Gustavson (stegu@itn.liu.se).\n * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\n * Better rank ordering method by Stefan Gustavson in 2012.\n * Converted to Javascript by Joseph Gentle.\n *\n * Version 2012-03-09\n *\n * This code was placed in the public domain by its original author,\n * Stefan Gustavson. You may use it as you see fit, but\n * attribution is appreciated.\n *\n */\n\nfunction Grad(x, y, z) {\n    this.x = x; this.y = y; this.z = z;\n}\n\nGrad.prototype.dot2 = function(x, y) {\n    return this.x*x + this.y*y;\n};\n\nGrad.prototype.dot3 = function(x, y, z) {\n    return this.x*x + this.y*y + this.z*z;\n};\n\nvar grad3 = [new Grad(1,1,0),new Grad(-1,1,0),new Grad(1,-1,0),new Grad(-1,-1,0),\n                new Grad(1,0,1),new Grad(-1,0,1),new Grad(1,0,-1),new Grad(-1,0,-1),\n                new Grad(0,1,1),new Grad(0,-1,1),new Grad(0,1,-1),new Grad(0,-1,-1)];\n\nvar p = [151,160,137,91,90,15,\n131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,\n190, 6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,\n88,237,149,56,87,174,20,125,136,171,168, 68,175,74,165,71,134,139,48,27,166,\n77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,\n102,143,54, 65,25,63,161, 1,216,80,73,209,76,132,187,208, 89,18,169,200,196,\n135,130,116,188,159,86,164,100,109,198,173,186, 3,64,52,217,226,250,124,123,\n5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,\n223,183,170,213,119,248,152, 2,44,154,163, 70,221,153,101,155,167, 43,172,9,\n129,22,39,253, 19,98,108,110,79,113,224,232,178,185, 112,104,218,246,97,228,\n251,34,242,193,238,210,144,12,191,179,162,241, 81,51,145,235,249,14,239,107,\n49,192,214, 31,181,199,106,157,184, 84,204,176,115,121,50,45,127, 4,150,254,\n138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];\n// To remove the need for index wrapping, double the permutation table length\nvar perm = new Array(512);\nvar gradP = new Array(512);\n\n// This isn't a very good seeding function, but it works ok. It supports 2^16\n// different seed values. Write something better if you need more seeds.\nexport const seed = function(seed) {\n    if(seed > 0 && seed < 1) {\n    // Scale the seed out\n    seed *= 65536;\n    }\n\n    seed = Math.floor(seed);\n    if(seed < 256) {\n    seed |= seed << 8;\n    }\n\n    for(var i = 0; i < 256; i++) {\n    var v;\n    if (i & 1) {\n        v = p[i] ^ (seed & 255);\n    } else {\n        v = p[i] ^ ((seed>>8) & 255);\n    }\n\n    perm[i] = perm[i + 256] = v;\n    gradP[i] = gradP[i + 256] = grad3[v % 12];\n    }\n};\n\nseed(0);\n\n/*\nfor(var i=0; i<256; i++) {\n    perm[i] = perm[i + 256] = p[i];\n    gradP[i] = gradP[i + 256] = grad3[perm[i] % 12];\n}*/\n\n// Skewing and unskewing factors for 2, 3, and 4 dimensions\nvar F2 = 0.5*(Math.sqrt(3)-1);\nvar G2 = (3-Math.sqrt(3))/6;\n\nvar F3 = 1/3;\nvar G3 = 1/6;\n\n// 2D simplex noise\nexport const simplex2 = function(xin, yin) {\n    var n0, n1, n2; // Noise contributions from the three corners\n    // Skew the input space to determine which simplex cell we're in\n    var s = (xin+yin)*F2; // Hairy factor for 2D\n    var i = Math.floor(xin+s);\n    var j = Math.floor(yin+s);\n    var t = (i+j)*G2;\n    var x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    var y0 = yin-j+t;\n    // For the 2D case, the simplex shape is an equilateral triangle.\n    // Determine which simplex we are in.\n    var i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n    if(x0>y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n    i1=1; j1=0;\n    } else {    // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n    i1=0; j1=1;\n    }\n    // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n    // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n    // c = (3-sqrt(3))/6\n    var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n    var y1 = y0 - j1 + G2;\n    var x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords\n    var y2 = y0 - 1 + 2 * G2;\n    // Work out the hashed gradient indices of the three simplex corners\n    i &= 255;\n    j &= 255;\n    var gi0 = gradP[i+perm[j]];\n    var gi1 = gradP[i+i1+perm[j+j1]];\n    var gi2 = gradP[i+1+perm[j+1]];\n    // Calculate the contribution from the three corners\n    var t0 = 0.5 - x0*x0-y0*y0;\n    if(t0<0) {\n    n0 = 0;\n    } else {\n    t0 *= t0;\n    n0 = t0 * t0 * gi0.dot2(x0, y0);  // (x,y) of grad3 used for 2D gradient\n    }\n    var t1 = 0.5 - x1*x1-y1*y1;\n    if(t1<0) {\n    n1 = 0;\n    } else {\n    t1 *= t1;\n    n1 = t1 * t1 * gi1.dot2(x1, y1);\n    }\n    var t2 = 0.5 - x2*x2-y2*y2;\n    if(t2<0) {\n    n2 = 0;\n    } else {\n    t2 *= t2;\n    n2 = t2 * t2 * gi2.dot2(x2, y2);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 70 * (n0 + n1 + n2);\n};\n\n// 3D simplex noise\nexport const simplex3 = function(xin, yin, zin) {\n    var n0, n1, n2, n3; // Noise contributions from the four corners\n\n    // Skew the input space to determine which simplex cell we're in\n    var s = (xin+yin+zin)*F3; // Hairy factor for 2D\n    var i = Math.floor(xin+s);\n    var j = Math.floor(yin+s);\n    var k = Math.floor(zin+s);\n\n    var t = (i+j+k)*G3;\n    var x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    var y0 = yin-j+t;\n    var z0 = zin-k+t;\n\n    // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n    // Determine which simplex we are in.\n    var i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n    var i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n    if(x0 >= y0) {\n    if(y0 >= z0)      { i1=1; j1=0; k1=0; i2=1; j2=1; k2=0; }\n    else if(x0 >= z0) { i1=1; j1=0; k1=0; i2=1; j2=0; k2=1; }\n    else              { i1=0; j1=0; k1=1; i2=1; j2=0; k2=1; }\n    } else {\n    if(y0 < z0)      { i1=0; j1=0; k1=1; i2=0; j2=1; k2=1; }\n    else if(x0 < z0) { i1=0; j1=1; k1=0; i2=0; j2=1; k2=1; }\n    else             { i1=0; j1=1; k1=0; i2=1; j2=1; k2=0; }\n    }\n    // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n    // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n    // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n    // c = 1/6.\n    var x1 = x0 - i1 + G3; // Offsets for second corner\n    var y1 = y0 - j1 + G3;\n    var z1 = z0 - k1 + G3;\n\n    var x2 = x0 - i2 + 2 * G3; // Offsets for third corner\n    var y2 = y0 - j2 + 2 * G3;\n    var z2 = z0 - k2 + 2 * G3;\n\n    var x3 = x0 - 1 + 3 * G3; // Offsets for fourth corner\n    var y3 = y0 - 1 + 3 * G3;\n    var z3 = z0 - 1 + 3 * G3;\n\n    // Work out the hashed gradient indices of the four simplex corners\n    i &= 255;\n    j &= 255;\n    k &= 255;\n    var gi0 = gradP[i+   perm[j+   perm[k   ]]];\n    var gi1 = gradP[i+i1+perm[j+j1+perm[k+k1]]];\n    var gi2 = gradP[i+i2+perm[j+j2+perm[k+k2]]];\n    var gi3 = gradP[i+ 1+perm[j+ 1+perm[k+ 1]]];\n\n    // Calculate the contribution from the four corners\n    var t0 = 0.6 - x0*x0 - y0*y0 - z0*z0;\n    if(t0<0) {\n    n0 = 0;\n    } else {\n    t0 *= t0;\n    n0 = t0 * t0 * gi0.dot3(x0, y0, z0);  // (x,y) of grad3 used for 2D gradient\n    }\n    var t1 = 0.6 - x1*x1 - y1*y1 - z1*z1;\n    if(t1<0) {\n    n1 = 0;\n    } else {\n    t1 *= t1;\n    n1 = t1 * t1 * gi1.dot3(x1, y1, z1);\n    }\n    var t2 = 0.6 - x2*x2 - y2*y2 - z2*z2;\n    if(t2<0) {\n    n2 = 0;\n    } else {\n    t2 *= t2;\n    n2 = t2 * t2 * gi2.dot3(x2, y2, z2);\n    }\n    var t3 = 0.6 - x3*x3 - y3*y3 - z3*z3;\n    if(t3<0) {\n    n3 = 0;\n    } else {\n    t3 *= t3;\n    n3 = t3 * t3 * gi3.dot3(x3, y3, z3);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 32 * (n0 + n1 + n2 + n3);\n\n};\n\n// ##### Perlin noise stuff\n\nfunction fade(t) {\n    return t*t*t*(t*(t*6-15)+10);\n}\n\nfunction lerp(a, b, t) {\n    return (1-t)*a + t*b;\n}\n\n// 2D Perlin Noise\nexport const perlin2 = function(x, y) {\n    // Find unit grid cell containing point\n    var X = Math.floor(x), Y = Math.floor(y);\n    // Get relative xy coordinates of point within that cell\n    x = x - X; y = y - Y;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255;\n\n    // Calculate noise contributions from each of the four corners\n    var n00 = gradP[X+perm[Y]].dot2(x, y);\n    var n01 = gradP[X+perm[Y+1]].dot2(x, y-1);\n    var n10 = gradP[X+1+perm[Y]].dot2(x-1, y);\n    var n11 = gradP[X+1+perm[Y+1]].dot2(x-1, y-1);\n\n    // Compute the fade curve value for x\n    var u = fade(x);\n\n    // Interpolate the four results\n    return lerp(\n        lerp(n00, n10, u),\n        lerp(n01, n11, u),\n        fade(y));\n};\n\n// 3D Perlin Noise\nexport const perlin3 = function(x, y, z) {\n    // Find unit grid cell containing point\n    var X = Math.floor(x), Y = Math.floor(y), Z = Math.floor(z);\n    // Get relative xyz coordinates of point within that cell\n    x = x - X; y = y - Y; z = z - Z;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255; Z = Z & 255;\n\n    // Calculate noise contributions from each of the eight corners\n    var n000 = gradP[X+  perm[Y+  perm[Z  ]]].dot3(x,   y,     z);\n    var n001 = gradP[X+  perm[Y+  perm[Z+1]]].dot3(x,   y,   z-1);\n    var n010 = gradP[X+  perm[Y+1+perm[Z  ]]].dot3(x,   y-1,   z);\n    var n011 = gradP[X+  perm[Y+1+perm[Z+1]]].dot3(x,   y-1, z-1);\n    var n100 = gradP[X+1+perm[Y+  perm[Z  ]]].dot3(x-1,   y,   z);\n    var n101 = gradP[X+1+perm[Y+  perm[Z+1]]].dot3(x-1,   y, z-1);\n    var n110 = gradP[X+1+perm[Y+1+perm[Z  ]]].dot3(x-1, y-1,   z);\n    var n111 = gradP[X+1+perm[Y+1+perm[Z+1]]].dot3(x-1, y-1, z-1);\n\n    // Compute the fade curve value for x, y, z\n    var u = fade(x);\n    var v = fade(y);\n    var w = fade(z);\n\n    // Interpolate\n    return lerp(\n        lerp(\n        lerp(n000, n100, u),\n        lerp(n001, n101, u), w),\n        lerp(\n        lerp(n010, n110, u),\n        lerp(n011, n111, u), w),\n        v);\n};","\nimport { mat4, quat, vec3 } from 'gl-matrix';\nimport { OrbitControl } from './orbit-control';\nimport { simplex2 } from './noise';\n\nimport drawVertShaderSource from './shader/draw.vert';\nimport drawFragShaderSource from './shader/draw.frag';\nimport portalVertShaderSource from './shader/portal.vert';\nimport portalFragShaderSource from './shader/portal.frag';\nimport compositeVertShaderSource from './shader/composite.vert';\nimport compositeFragShaderSource from './shader/composite.frag';\nimport hexBlur1VertShaderSource from './shader/hex-blur-1.vert';\nimport hexBlur1FragShaderSource from './shader/hex-blur-1.frag';\nimport hexBlur2VertShaderSource from './shader/hex-blur-2.vert';\nimport hexBlur2FragShaderSource from './shader/hex-blur-2.frag';\n\nexport class HexagonalBokeh {\n    oninit;\n\n    #time = 0;\n    #frames = 0;\n    #deltaTime = 0;\n    #isDestroyed = false;\n\n    camera = {\n        matrix: mat4.create(),\n        near: 80,\n        far: 350,\n        distance: 150,\n        orbit: quat.create(),\n        position: vec3.create(),\n        rotation: vec3.create(),\n        up: vec3.fromValues(0, 1, 0)\n    };\n\n    blur = {\n        radius: 7,\n        scale: 2\n    }\n\n    constructor(canvas, pane, oninit = null) {\n        this.canvas = canvas;\n        this.pane = pane;\n        this.oninit = oninit;\n\n        this.#init();\n    }\n\n    resize() {\n        const gl = this.gl;\n\n        this.#resizeCanvasToDisplaySize(gl.canvas);\n        \n        // When you need to set the viewport to match the size of the canvas's\n        // drawingBuffer this will always be correct\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n        // resize the framebuffer textures\n        this.#resizeTextures(gl);\n\n        this.#updateProjectionMatrix(gl);\n    }\n\n    run(time = 0) {\n        this.#deltaTime = time - this.#time;\n        this.#time = time;\n        this.#frames += this.#deltaTime / 16;\n\n        if (this.#isDestroyed) return;\n\n        this.control.update();\n\n        const worldInvers = mat4.create();\n        mat4.invert(worldInvers, this.drawUniforms.u_worldMatrix);\n        mat4.transpose(this.drawUniforms.u_worldInverseTransposeMatrix, worldInvers);\n\n        this.#render();\n\n        requestAnimationFrame((t) => this.run(t));\n    }\n\n    #render() {\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n        gl.enable(gl.DEPTH_TEST);\n        gl.disable(gl.CULL_FACE);\n\n        // draw depth and color \n        this.#setFramebuffer(gl, this.drawFramebuffer, this.drawFramebufferWidth, this.drawFramebufferHeight);\n        gl.useProgram(this.drawProgram);\n        gl.bindVertexArray(this.objectVAO);\n        gl.uniformMatrix4fv(this.drawLocations.u_worldMatrix, false, this.drawUniforms.u_worldMatrix);\n        gl.uniformMatrix4fv(this.drawLocations.u_viewMatrix, false, this.drawUniforms.u_viewMatrix);\n        gl.uniformMatrix4fv(this.drawLocations.u_projectionMatrix, false, this.drawUniforms.u_projectionMatrix);\n        gl.uniformMatrix4fv(this.drawLocations.u_worldInverseTransposeMatrix, false, this.drawUniforms.u_worldInverseTransposeMatrix);\n        gl.uniform3f(this.drawLocations.u_cameraPosition, this.camera.position[0], this.camera.position[1], this.camera.position[2]);\n        gl.uniform1f(this.drawLocations.u_frames, this.#frames);\n        gl.clearBufferfv(gl.COLOR, 0, [0.0, 0.0, 0.0, 0.0]);\n        gl.clearBufferfv(gl.DEPTH, 0, [1.]);\n        gl.drawElements(gl.TRIANGLES, this.objectBuffers.numElem, gl.UNSIGNED_SHORT, 0);\n        // draw the portal triangle on top\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, gl.SRC_COLOR);\n        gl.blendEquation(gl.FUNC_SUBTRACT);\n        gl.useProgram(this.portalProgram);\n        gl.bindVertexArray(this.centerObjectVAO);\n        gl.uniformMatrix4fv(this.portalLocations.u_worldMatrix, false, this.portalUniforms.u_worldMatrix);\n        gl.uniformMatrix4fv(this.portalLocations.u_viewMatrix, false, this.drawUniforms.u_viewMatrix);\n        gl.uniformMatrix4fv(this.portalLocations.u_projectionMatrix, false, this.drawUniforms.u_projectionMatrix);\n        gl.uniform1f(this.portalLocations.u_frames, this.#frames);\n        gl.drawArrays(gl.TRIANGLES, 0, this.centerObjectBuffers.numElem);\n        gl.disable(gl.BLEND);\n        this.#setFramebuffer(gl, null, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n        // blit depth and color\n        gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this.drawFramebuffer);\n        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this.blitFramebuffer);\n        gl.clearBufferfv(gl.COLOR, 0, [0.0, 0.0, 0.0, 1.0]);\n        gl.clearBufferfv(gl.DEPTH, 0, [0]);\n        gl.blitFramebuffer(0, 0, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, 0, this.drawFramebufferWidth, this.drawFramebufferHeight, gl.COLOR_BUFFER_BIT, gl.NEAREST);\n        gl.blitFramebuffer(0, 0, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, 0, this.drawFramebufferWidth, this.drawFramebufferHeight, gl.DEPTH_BUFFER_BIT, gl.NEAREST);\n        this.#setFramebuffer(gl, null, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n        // render first blur pass\n        this.#renderBlurPass(\n            this.hexBlur1Framebuffer, \n            this.drawFramebufferWidth, this.drawFramebufferHeight, \n            this.hexBlur1Program,\n            [\n                [this.hexBlur1Locations.u_colorTexture, this.colorTexture],\n                [this.hexBlur1Locations.u_depthTexture, this.depthTexture]\n            ],\n            [\n                [this.hexBlur1Locations.u_radiusScale, this.blur.scale]\n            ],\n            [\n                [this.hexBlur1Locations.u_maxCoCRadius, this.blur.radius]\n            ]\n        );\n\n        // render second blur pass\n        this.#renderBlurPass(\n            this.hexBlur2Framebuffer, \n            this.drawFramebufferWidth, this.drawFramebufferHeight, \n            this.hexBlur2Program,\n            [\n                [this.hexBlur2Locations.u_verticalBlurTexture, this.hex1VerticalBlurTexture],\n                [this.hexBlur2Locations.u_diagonalBlurTexture, this.hex1DiagonalBlurTexture],\n                [this.hexBlur2Locations.u_depthTexture, this.depthTexture]\n            ],\n            [\n                [this.hexBlur2Locations.u_radiusScale, this.blur.scale]\n            ],\n            [\n                [this.hexBlur2Locations.u_maxCoCRadius, this.blur.radius]\n            ]\n        );\n\n        // draw to the canvas\n        gl.clearColor(0, 0, 0, 1);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.useProgram(this.compositeProgram);\n        gl.bindVertexArray(this.quadVAO);\n        gl.uniform1i(this.compositeLocations.u_texture, 0);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex2BlurTexture);\n        gl.drawArrays(gl.TRIANGLES, 0, this.quadBuffers.numElem);\n    }\n\n    #renderBlurPass(fbo, w, h, program, locTex, locFloat = [], locInt = []) {\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n       this.#setFramebuffer(gl, fbo, w, h);\n       gl.useProgram(program);\n       gl.clearColor(0, 0, 0, 1);\n       gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n       gl.bindVertexArray(this.quadVAO);\n\n       locTex.forEach(([loc, texture], ndx) => {\n           gl.uniform1i(loc, ndx);\n           gl.activeTexture(gl[`TEXTURE${ndx}`]);\n           gl.bindTexture(gl.TEXTURE_2D, texture);\n       });\n\n       locFloat.forEach(([loc, value]) => {\n           gl.uniform1f(loc, value);\n       });\n\n       locInt.forEach(([loc, value]) => {\n           gl.uniform1i(loc, value);\n       });\n\n       gl.drawArrays(gl.TRIANGLES, 0, this.quadBuffers.numElem);\n       this.#setFramebuffer(gl, null, gl.drawingBufferWidth, gl.drawingBufferHeight);\n   }\n\n    destroy() {\n        this.#isDestroyed = true;\n    }\n\n    #init() {\n        this.gl = this.canvas.getContext('webgl2', { antialias: false, alpha: false });\n\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n        if (!gl) {\n            throw new Error('No WebGL 2 context!')\n        }\n\n        ///////////////////////////////////  PROGRAM SETUP\n\n        // setup programs\n        this.drawProgram = this.#createProgram(gl, [drawVertShaderSource, drawFragShaderSource], null, { a_position: 0, a_normal: 1, a_uv: 2 });\n        this.portalProgram = this.#createProgram(gl, [portalVertShaderSource, portalFragShaderSource], null, { a_position: 0, a_uv: 2 });\n        this.hexBlur1Program = this.#createProgram(gl, [hexBlur1VertShaderSource, hexBlur1FragShaderSource], null, { a_position: 0 });\n        this.hexBlur2Program = this.#createProgram(gl, [hexBlur2VertShaderSource, hexBlur2FragShaderSource], null, { a_position: 0 });\n        this.compositeProgram = this.#createProgram(gl, [compositeVertShaderSource, compositeFragShaderSource], null, { a_position: 0 });\n\n        // find the locations\n        this.drawLocations = {\n            a_position: gl.getAttribLocation(this.drawProgram, 'a_position'),\n            a_normal: gl.getAttribLocation(this.drawProgram, 'a_normal'),\n            a_uv: gl.getAttribLocation(this.drawProgram, 'a_uv'),\n            u_worldMatrix: gl.getUniformLocation(this.drawProgram, 'u_worldMatrix'),\n            u_viewMatrix: gl.getUniformLocation(this.drawProgram, 'u_viewMatrix'),\n            u_projectionMatrix: gl.getUniformLocation(this.drawProgram, 'u_projectionMatrix'),\n            u_worldInverseTransposeMatrix: gl.getUniformLocation(this.drawProgram, 'u_worldInverseTransposeMatrix'),\n            u_cameraPosition: gl.getUniformLocation(this.drawProgram, 'u_cameraPosition'),\n            u_frames: gl.getUniformLocation(this.drawProgram, 'u_frames')\n        };\n        this.portalLocations = {\n            a_position: gl.getAttribLocation(this.portalProgram, 'a_position'),\n            a_uv: gl.getAttribLocation(this.portalProgram, 'a_uv'),\n            u_worldMatrix: gl.getUniformLocation(this.portalProgram, 'u_worldMatrix'),\n            u_viewMatrix: gl.getUniformLocation(this.portalProgram, 'u_viewMatrix'),\n            u_projectionMatrix: gl.getUniformLocation(this.portalProgram, 'u_projectionMatrix'),\n            u_frames: gl.getUniformLocation(this.portalProgram, 'u_frames')\n        };\n        this.hexBlur1Locations = {\n            a_position: gl.getAttribLocation(this.hexBlur1Program, 'a_position'),\n            u_colorTexture: gl.getUniformLocation(this.hexBlur1Program, 'u_colorTexture'),\n            u_depthTexture: gl.getUniformLocation(this.hexBlur1Program, 'u_depthTexture'),\n            u_maxCoCRadius: gl.getUniformLocation(this.hexBlur1Program, 'u_maxCoCRadius'),\n            u_radiusScale: gl.getUniformLocation(this.hexBlur1Program, 'u_radiusScale')\n        };\n        this.hexBlur2Locations = {\n            a_position: gl.getAttribLocation(this.hexBlur2Program, 'a_position'),\n            u_verticalBlurTexture: gl.getUniformLocation(this.hexBlur2Program, 'u_verticalBlurTexture'),\n            u_diagonalBlurTexture: gl.getUniformLocation(this.hexBlur2Program, 'u_diagonalBlurTexture'),\n            u_depthTexture: gl.getUniformLocation(this.hexBlur2Program, 'u_depthTexture'),\n            u_maxCoCRadius: gl.getUniformLocation(this.hexBlur2Program, 'u_maxCoCRadius'),\n            u_radiusScale: gl.getUniformLocation(this.hexBlur2Program, 'u_radiusScale')\n        };\n        this.compositeLocations = {\n            a_position: gl.getAttribLocation(this.compositeProgram, 'a_position'),\n            u_texture: gl.getUniformLocation(this.compositeProgram, 'u_texture')\n        };\n\n        // setup uniforms\n        this.drawUniforms = {\n            u_worldMatrix: mat4.create(),\n            u_viewMatrix: mat4.create(),\n            u_projectionMatrix: mat4.create(),\n            u_worldInverseTransposeMatrix: mat4.create()\n        };\n        mat4.rotate(this.drawUniforms.u_worldMatrix, this.drawUniforms.u_worldMatrix, -Math.PI / 2, [1, 0, 0]);\n        mat4.scale(this.drawUniforms.u_worldMatrix, this.drawUniforms.u_worldMatrix, [50, 50, 50]);\n        mat4.translate(this.drawUniforms.u_worldMatrix, this.drawUniforms.u_worldMatrix, [0, 0, 0]);\n\n        this.portalUniforms = {\n            u_worldMatrix: mat4.create()\n        }\n        mat4.translate(this.portalUniforms.u_worldMatrix, this.portalUniforms.u_worldMatrix, [0, 5, 0]);\n\n        /////////////////////////////////// GEOMETRY / MESH SETUP\n\n        // create object VAO\n        const size = 8;\n        this.objectGeometry = this.#createXYPlaneGeometry(size, size, 110, 110, (p) => {\n            const maxHeight = 0.4;\n            const scale = 0.9;\n            const n = simplex2(p.x * scale, p.y * scale);\n            const l = vec3.length([p.x, p.y, p.z]);\n            let lw = (l / 4) * 1.;\n            const c = Math.sin(Math.acos(p.x / 5)) * Math.cos(Math.asin(p.y / 5));\n            return {x: p.x, y: p.y, z: n * maxHeight * lw - c * 6.5 + 5.3 } \n        });\n        this.objectBuffers = { \n            position: this.#createBuffer(gl, this.objectGeometry.vertices),\n            normal: this.#createBuffer(gl, this.objectGeometry.normals),\n            uv: this.#createBuffer(gl, this.objectGeometry.uvs),\n            numElem: this.objectGeometry.count\n        };\n        this.objectVAO = this.#makeVertexArray(gl, [\n            [this.objectBuffers.position, this.drawLocations.a_position, 3],\n            [this.objectBuffers.normal, this.drawLocations.a_normal, 3],\n            [this.objectBuffers.uv, this.drawLocations.a_uv, 2]\n        ], this.objectGeometry.indices);\n\n        // create quad VAO\n        const quadPositions = [\n            -1, -1,\n            3, -1,\n            -1, 3\n        ];\n        this.quadBuffers = {\n            position: this.#createBuffer(gl, quadPositions),\n            numElem: quadPositions.length / 2\n        };\n        this.quadVAO = this.#makeVertexArray(gl, [[this.quadBuffers.position, this.drawLocations.a_position, 2]]);\n\n        // create center triangle VAO\n        const pR = 30;\n        const rot = -Math.PI / 2;\n        const centerObjectPositions = [\n            Math.cos(0 + rot) * pR, Math.sin(0 + rot) * pR, 0,\n            Math.cos(2 * Math.PI / 3 + rot) * pR, Math.sin(2 * Math.PI / 3 + rot) * pR, 0,\n            Math.cos(4 * Math.PI / 3 + rot) * pR, Math.sin(4 * Math.PI / 3 + rot) * pR, 0\n        ];\n        this.centerObjectBuffers = {\n            position: this.#createBuffer(gl, centerObjectPositions),\n            uv: this.#createBuffer(gl, [0, 0, 0, 1, 1, 1]),\n            numElem: centerObjectPositions.length / 3\n        };\n        this.centerObjectVAO = this.#makeVertexArray(gl, [\n            [this.centerObjectBuffers.position, this.portalLocations.a_position, 3],\n            [this.centerObjectBuffers.uv, this.portalLocations.a_uv, 2]\n        ]);\n\n        // initial client dimensions\n        const clientWidth = gl.canvas.clientWidth;\n        const clientHeight = gl.canvas.clientHeight;\n\n         \n        /////////////////////////////////// INITIAL DRAW PASS SETUP\n\n        this.drawFramebufferWidth = clientWidth;\n        this.drawFramebufferHeight = clientHeight;\n\n        // the initial draw pass renders the scene using multisample renderbuffers for\n        // color and depth which are then blitted to separate textures\n\n        // draw framebuffer setup\n        this.drawFramebuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.drawFramebuffer);\n        // depth render buffer setup\n        this.depthRenderbuffer = gl.createRenderbuffer();\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.depthRenderbuffer);\n        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, gl.getParameter(gl.MAX_SAMPLES), gl.DEPTH_COMPONENT32F, this.drawFramebufferWidth, this.drawFramebufferHeight);\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, this.depthRenderbuffer);\n        // color renderbuffer setup\n        this.colorRenderbuffer = gl.createRenderbuffer();\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.colorRenderbuffer);\n        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, gl.getParameter(gl.MAX_SAMPLES), gl.RGBA8, this.drawFramebufferWidth, this.drawFramebufferHeight);\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.RENDERBUFFER, this.colorRenderbuffer);\n        if(gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE) {\n            console.error('could not complete render framebuffer setup')\n        }\n\n        // blit framebuffer setup\n        this.blitFramebuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.blitFramebuffer);\n        // depth texture setup\n        this.depthTexture = this.#createAndSetupTexture(gl, gl.NEAREST, gl.NEAREST);\n        gl.bindTexture(gl.TEXTURE_2D, this.depthTexture);\n        gl.texImage2D(this. gl.TEXTURE_2D, 0, gl.DEPTH_COMPONENT32F, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.DEPTH_COMPONENT, gl.FLOAT, null);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.TEXTURE_2D, this.depthTexture, 0);   \n        // color texture setup\n        this.colorTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.colorTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.colorTexture, 0);\n        if(gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE) {\n            console.error('could not complete render framebuffer setup')\n        }\n\n        /////////////////////////////////// FIRST BLUR PASS SETUP\n\n        this.hex1VerticalBlurTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex1VerticalBlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        this.hex1DiagonalBlurTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex1DiagonalBlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        this.hexBlur1Framebuffer = this.#createFramebuffer(gl, [this.hex1VerticalBlurTexture, this.hex1DiagonalBlurTexture]);\n        if(gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE) {\n            console.error('could not complete blur hexagonal first pass framebuffer setup')\n        }\n\n        /////////////////////////////////// SECOND BLUR PASS SETUP\n\n        this.hex2BlurTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex2BlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        this.hexBlur2Framebuffer = this.#createFramebuffer(gl, [this.hex2BlurTexture]);\n        if(gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE) {\n            console.error('could not complete blur hexagonal second pass framebuffer setup')\n        }\n\n        this.resize();\n\n        this.#updateCameraMatrix();\n        this.#updateProjectionMatrix(gl);\n\n        this.#initOrbitControls();\n        this.#initTweakpane();\n\n        if (this.oninit) this.oninit(this);\n    }\n\n    #createXYPlaneGeometry(w, h, wSegments, hSegments, distort) {\n        let sx = -w / 2;\n        let sy = -h / 2;\n        const dx = w / wSegments;\n        const dy = h / hSegments;\n        const count = wSegments * hSegments * 6;\n        const vertices = [];\n        const normals = [];\n        const uvs = [];\n        const indices = [];\n        const wOff = wSegments + 1;\n        const dd = Math.min(dx, dy) * 0.5;\n\n        for(let iy = 0; iy <= hSegments; ++iy) {\n            for(let ix = 0; ix <= wSegments; ++ix) {\n                let p = {\n                    x: sx + dx * ix,\n                    y: sy + dy * iy,\n                    z: 0\n                };\n                let n = {x: 0, y: 0, z: 1};\n\n                if (distort) {\n                    let x1 = {...p};\n                    let x2 = {...p};\n                    let y1 = {...p};\n                    let y2 = {...p};\n                    x1.x -= dd;\n                    x2.x += dd;\n                    y1.y -= dd;\n                    y2.y += dd;\n                    x1 = distort(x1);\n                    x2 = distort(x2);\n                    y1 = distort(y1);\n                    y2 = distort(y2);\n                    let t = vec3.fromValues(\n                        x2.x - x1.x,\n                        x2.y - x1.y,\n                        x2.z - x1.z\n                    );\n                    let b = vec3.fromValues(\n                        y2.x - y1.x,\n                        y2.y - y1.y,\n                        y2.z - y1.z\n                    );\n                    const normal = vec3.cross(vec3.create(), t, b);\n                    vec3.normalize(normal, normal);\n                    n.x = normal[0];\n                    n.y = normal[1];\n                    n.z = normal[2];\n\n                    p = distort(p);\n                }\n\n                vertices.push(p.x, p.y, p.z);\n                normals.push(n.x, n.y, n.z);\n                uvs.push(ix / wSegments, iy / hSegments);\n            }\n        }\n\n        for(let iy = 0; iy < hSegments; ++iy) {\n            for(let ix = 0; ix < wSegments; ++ix) {\n                indices.push(\n                    iy * wOff + ix,\n                    iy * wOff + ix + 1,\n                    (iy + 1) * wOff + ix + 1\n                );\n                indices.push(\n                    (iy + 1) * wOff + ix + 1,\n                    (iy + 1) * wOff + ix,\n                    iy * wOff + ix\n                );\n            }\n        }\n\n        return {\n            vertices,\n            normals,\n            uvs,\n            indices,\n            count\n        };\n    }\n\n    #createBuffer(gl, data) {\n        const buffer = this.gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        return buffer;\n    }\n\n    #initOrbitControls() {\n        this.control = new OrbitControl(this.canvas, this.camera, () => this.#updateCameraMatrix());\n    }\n\n    #createFramebuffer(gl, colorAttachements) {\n        const fbo = gl.createFramebuffer();\n        const drawBuffers = [];\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n        colorAttachements.forEach((texture, ndx) => {\n            const attachmentPoint = gl[`COLOR_ATTACHMENT${ndx}`];\n            gl.framebufferTexture2D(\n                gl.FRAMEBUFFER,\n                attachmentPoint,\n                gl.TEXTURE_2D, \n                texture,\n                0);\n            drawBuffers.push(attachmentPoint);\n        });\n        gl.drawBuffers(drawBuffers);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        return fbo;\n    }\n\n    #makeVertexArray(gl, bufLocNumElmPairs, indices) {\n        const va = gl.createVertexArray();\n        gl.bindVertexArray(va);\n        for (const [buffer, loc, numElem] of bufLocNumElmPairs) {\n            if (loc == -1) continue;\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n            gl.enableVertexAttribArray(loc);\n            gl.vertexAttribPointer(\n                loc,      // attribute location\n                numElem,        // number of elements\n                gl.FLOAT, // type of data\n                false,    // normalize\n                0,        // stride (0 = auto)\n                0,        // offset\n            );\n        }\n        if (indices) {\n            const indexBuffer = gl.createBuffer();\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);\n        }\n        gl.bindVertexArray(null);\n        return va;\n    }\n\n    #createShader(gl, type, source) {\n        const shader = gl.createShader(type);\n        gl.shaderSource(shader, source);\n        gl.compileShader(shader);\n        const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n        if (success) {\n            return shader;\n        }\n\n        console.error(gl.getShaderInfoLog(shader));\n        gl.deleteShader(shader);\n    }\n\n    #createProgram(gl, shaderSources, transformFeedbackVaryings, attribLocations) {\n        const program = gl.createProgram();\n\n        [gl.VERTEX_SHADER, gl.FRAGMENT_SHADER].forEach((type, ndx) => {\n            const shader = this.#createShader(gl, type, shaderSources[ndx]);\n            gl.attachShader(program, shader);\n        });\n\n        if (transformFeedbackVaryings) {\n            gl.transformFeedbackVaryings(program, transformFeedbackVaryings, gl.SEPARATE_ATTRIBS);\n        }\n\n        if (attribLocations) {\n            for(const attrib in attribLocations) {\n                gl.bindAttribLocation(program, attribLocations[attrib], attrib);\n            }\n        }\n\n        gl.linkProgram(program);\n        const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n\n        if (success) {\n            return program;\n        }\n\n        console.error(gl.getProgramInfoLog(program));\n        gl.deleteProgram(program);\n    }\n\n    #setFramebuffer(gl, fbo, width, height) {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo); // all draw commands will affect the framebuffer\n        gl.viewport(0, 0, width, height);\n    }\n\n    #createAndSetupTexture(gl, minFilter, magFilter) {\n        const texture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter);\n        return texture;\n    }\n\n    #resizeTextures(gl) {\n        const clientWidth = gl.canvas.clientWidth;\n        const clientHeight = gl.canvas.clientHeight;\n        this.drawFramebufferWidth = clientWidth;\n        this.drawFramebufferHeight = clientHeight;\n\n        // resize draw/blit textures and buffers\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.depthRenderbuffer);\n        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, 4, gl.DEPTH_COMPONENT32F, clientWidth, clientHeight);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.colorRenderbuffer);\n        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, gl.getParameter(gl.MAX_SAMPLES), gl.RGBA8, clientWidth, clientHeight);\n        gl.bindTexture(gl.TEXTURE_2D, this.depthTexture);\n        gl.texImage2D(this. gl.TEXTURE_2D, 0, gl.DEPTH_COMPONENT32F, clientWidth, clientHeight, 0, gl.DEPTH_COMPONENT, gl.FLOAT, null);\n        gl.bindTexture(gl.TEXTURE_2D, this.colorTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, clientWidth, clientHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n        // resize blur texture\n        gl.bindTexture(gl.TEXTURE_2D, this.hex1VerticalBlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex1DiagonalBlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex2BlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        \n        // reset bindings\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    }\n\n    #updateCameraMatrix() {\n        mat4.targetTo(this.camera.matrix, this.camera.position, [0, 0, 0], this.camera.up);\n        mat4.invert(this.drawUniforms.u_viewMatrix, this.camera.matrix);\n    }\n\n    #updateProjectionMatrix(gl) {\n        const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\n        mat4.perspective(this.drawUniforms.u_projectionMatrix, Math.PI / 4, aspect, this.camera.near, this.camera.far);\n    }\n\n    #resizeCanvasToDisplaySize(canvas) {\n        // Lookup the size the browser is displaying the canvas in CSS pixels.\n        const displayWidth  = canvas.clientWidth;\n        const displayHeight = canvas.clientHeight;\n       \n        // Check if the canvas is not the same size.\n        const needResize = canvas.width  !== displayWidth ||\n                           canvas.height !== displayHeight;\n       \n        if (needResize) {\n          // Make the canvas the same size\n          canvas.width  = displayWidth;\n          canvas.height = displayHeight;\n        }\n       \n        return needResize;\n    }\n\n    #initTweakpane() {\n        if (this.pane) {\n            const maxFar = 700;\n\n            const cameraFolder = this.pane.addFolder({ title: 'Camera' });\n            this.#createTweakpaneSlider(cameraFolder, this.camera, 'near', 'near', 1, maxFar, null, () => this.#updateProjectionMatrix(this.gl));\n            this.#createTweakpaneSlider(cameraFolder, this.camera, 'far', 'far', 1, maxFar, null, () => this.#updateProjectionMatrix(this.gl));\n            const blurSettings = this.pane.addFolder({ title: 'Blur Settings' });\n            this.#createTweakpaneSlider(blurSettings, this.blur, 'radius', 'radius', 0, 30, 1);\n            this.#createTweakpaneSlider(blurSettings, this.blur, 'scale', 'scale', 1, 5, 0.1);\n        }\n    }\n\n    #createTweakpaneSlider(folder, obj, propName, label, min, max, stepSize = null, callback) {\n        const slider = folder.addBlade({\n            view: 'slider',\n            label,\n            min,\n            max,\n            step: stepSize,\n            value: obj[propName],\n        });\n        slider.on('change', e => {\n            obj[propName] = e.value;\n            if(callback) callback();\n        });\n    }\n}\n","#version 300 es\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_worldInverseTransposeMatrix;\nuniform vec3 u_cameraPosition;\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec3 v_position;\nout vec3 v_viewPosition;\nout vec3 v_normal;\nout vec2 v_uv;\nout vec3 v_surfaceToView;\n\nvoid main() {\n    v_uv = a_uv;\n    v_normal = (u_worldInverseTransposeMatrix * vec4(a_normal, 0.)).xyz;\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n    v_surfaceToView = u_cameraPosition - worldPosition.xyz;\n    v_position = a_position.xyz;\n    v_viewPosition = viewPosition.xyz;\n}\n","#version 300 es\n\nprecision highp float;\n\nuniform float u_frames;\n\nin vec3 v_position;\nin vec3 v_normal;\nin vec2 v_uv;\nin vec3 v_surfaceToView;\nin vec3 v_viewPosition;\n\nout vec4 outColor;\n\nfloat hash(vec2 p) {\n    p = fract(p * vec2(153.343, 414.3234));\n    p += dot(p, p + 44.463);\n    return fract(p.x * p.y);\n}\n\n//\tSimplex 3D Noise \n//\tby Ian McEwan, Ashima Arts\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nfloat snoise(vec3 v){ \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  // First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //  x0 = x0 - 0. + 0.0 * C \n  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n  // Permutations\n  i = mod(i, 289.0 ); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  // Gradients\n  // ( N*N points uniformly over a square, mapped onto an octahedron.)\n  float n_ = 1.0/7.0; // N=7\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n  //Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n  // Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\nfloat sparkle(vec2 p, float seed) {\n    vec2 id = floor(p);\n    vec2 suv = fract(p) * 2. - 1.;\n    \n    float r = hash(id);\n    float x = fract(r * 54.32);\n    float y = fract(r * 432.33);\n    vec2 offs = vec2(x, y) * 2. - 1.;\n    \n    float d = length(suv - offs);\n    float m = 1. - smoothstep(.0, .12, d);\n    \n    m *= pow(sin(seed + r), 5.);\n    return abs(m);\n}\n\nvoid main() {\n    vec3 pos = v_position;\n    vec3 n = normalize(v_normal);\n    vec3 v = normalize(v_surfaceToView);\n    vec3 l = vec3(0., 1., 0.);\n\n    float nDL = dot(n, l);\n\n    // calculate the reflection vector\n    float nDv = dot(n, v);\n    vec3 r = nDv * n * 2. - v;\n    r = normalize(r);\n\n    // fade the color to black by the distance from the center\n    float fade = 1. - smoothstep(0.2, 1., length(pos.xy) * 0.25);\n    float sparkleFade = 1. - smoothstep(0.9, 1., length(pos.xy) * 0.25);\n\n    // surface shade\n    float shade = nDL * 0.8 + (snoise(r * .5)) * 0.3;\n    shade *= 0.7;\n\n    // create the sand sparkle effect\n    float t = u_frames * 0.0;\n    float sLayer1 = sparkle(pos.xy * 6., t + abs(dot(r + v_viewPosition * 0.01, vec3(10.))));\n    float sLayer2 = sparkle(pos.xy * 12., t + abs(dot(r + v_viewPosition * 0.01, vec3(9.))));\n\n    outColor = vec4(vec3(shade * shade * fade + sLayer1 * sparkleFade + sLayer2 * sparkleFade * 0.7), 1.);\n    outColor.rgb += r * 0.02;\n}\n","#version 300 es\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\n\nin vec3 a_position;\nin vec2 a_uv;\n\nout vec3 v_position;\nout vec2 v_uv;\n\nvoid main() {\n    v_uv = a_uv;\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n}\n","#version 300 es\n\nprecision highp float;\n\nuniform float u_frames;\n\nin vec3 v_position;\nin vec2 v_uv;\n\nout vec4 outColor;\n\nfloat hash(vec2 p) {\n    p = fract(p * vec2(153.343, 414.3234));\n    p += dot(p, p + 44.463);\n    return fract(p.x * p.y);\n}\n\n//\tSimplex 3D Noise \n//\tby Ian McEwan, Ashima Arts\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nfloat snoise(vec3 v){ \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  // First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //  x0 = x0 - 0. + 0.0 * C \n  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n  // Permutations\n  i = mod(i, 289.0 ); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  // Gradients\n  // ( N*N points uniformly over a square, mapped onto an octahedron.)\n  float n_ = 1.0/7.0; // N=7\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n  //Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n  // Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\n\nvoid main() {\n    vec3 pos = v_position;\n    float n = snoise(vec3(vec2(v_uv.x * 0.001, v_uv.y * 2. - u_frames * 0.008) * 2., u_frames * 0.01)) * 2. - 1.;\n    vec3 color = vec3(0.); //vec3(0.8, 0.9, 1.) * (n * 0.5);\n    outColor = vec4(color, .7);\n    outColor = vec4(0.6, 0.8, 0.8, 1.) * 0.7;\n}\n","#version 300 es\n\nin vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0., 1.);\n}","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D u_colorTexture;\nuniform sampler2D u_depthTexture;\nuniform int u_maxCoCRadius;\nuniform float u_radiusScale;\n\nlayout(location = 0) out vec4 verticalBlurColor;\nlayout(location = 1) out vec4 diagnoalBlurColor;\n\n#pragma glslify: blur = require('./hex-blur.glsl', tex=texture, texSize=textureSize)\n\n#define PI 3.141593\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / vec2(textureSize(u_colorTexture, 0));\n\n    blur(\n        uv,\n        vec2(0., -1.),\n        u_maxCoCRadius,\n        u_radiusScale,\n        u_colorTexture,\n        u_depthTexture,\n        vec2(0.5),\n        verticalBlurColor\n    );\n\n    blur(\n        uv,\n        vec2(cos(PI / 6.), sin(PI / 6.)),\n        u_maxCoCRadius,\n        u_radiusScale,\n        u_colorTexture,\n        u_depthTexture,\n        vec2(0.5),\n        diagnoalBlurColor\n    );\n\n    diagnoalBlurColor = verticalBlurColor + diagnoalBlurColor;\n}","#version 300 es\n\nin vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0., 1.);\n}","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D u_verticalBlurTexture;\nuniform sampler2D u_diagonalBlurTexture;\nuniform sampler2D u_depthTexture;\nuniform int u_maxCoCRadius;\nuniform float u_radiusScale;\n\nlayout(location = 0) out vec4 outColor;\n\n#pragma glslify: blur = require('./hex-blur.glsl', tex=texture, texSize=textureSize)\n\n#define PI 3.141593\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / vec2(textureSize(u_verticalBlurTexture, 0));\n    vec4 verticalBlurColor = texture(u_verticalBlurTexture, uv);\n    vec4 diagnoalBlurColor = texture(u_diagonalBlurTexture, uv);\n    float depth = texture(u_depthTexture, uv).x;\n    vec4 resultColor1;\n    vec4 resultColor2;\n\n    blur(\n        uv,\n        vec2(cos(PI / 6.), sin(PI / 6.)),\n        u_maxCoCRadius,\n        u_radiusScale,\n        u_verticalBlurTexture,\n        u_depthTexture,\n        vec2(0.5),\n        resultColor1\n    );\n\n    blur(\n        uv,\n        vec2(cos((5. * PI) / 6.), sin((5. * PI) / 6.)),\n        u_maxCoCRadius,\n        u_radiusScale,\n        u_diagonalBlurTexture,\n        u_depthTexture,\n        vec2(0.5),\n        resultColor2\n    );\n\n    diagnoalBlurColor = (resultColor1 + resultColor2) * .5;\n\n    outColor = diagnoalBlurColor;\n}","#version 300 es\n\nin vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0., 1.);\n}","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D u_texture;\n\nout vec4 outColor;\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / vec2(textureSize(u_texture, 0));\n    vec4 color = texture(u_texture, uv);\n    float s1 = 0.5;\n    float s2 = 0.8;\n    vec4 boost = smoothstep(s1, s2, color) - smoothstep(s2, s2 + 0.1 , color);\n    outColor = color + boost.rrra * 0.6;\n}","import { Pane } from 'tweakpane';\nimport { HexagonalBokeh } from './hexagonal-bokeh';\n\nconst queryString = window.location.search;\nconst urlParams = new URLSearchParams(queryString);\nconst debugParam = urlParams.get('debug');\n\nlet DEBUG = debugParam !== null;\n\nif (process.env.NODE_ENV !== 'production') {\n    // Only runs in development and will be stripped in production builds.\n    DEBUG = true;\n}\n\nlet sketch;\nlet resizeTimeoutId;\n\nwindow.addEventListener('load', () => {\n    const canvas = document.body.querySelector('#c');\n\n    let pane;\n    if (DEBUG) {\n        pane = new Pane({ title: 'Settings' });\n    }\n\n    sketch = new HexagonalBokeh(canvas, pane, (sketch) => {\n        sketch.run(); \n    });\n});\n\nwindow.addEventListener('resize', () => {\n    if (sketch) {\n        if (resizeTimeoutId)\n            clearTimeout(resizeTimeoutId);\n\n        resizeTimeoutId = setTimeout(() => {\n            resizeTimeoutId = null;\n            sketch.resize();\n        }, 300);\n    }\n});\n\n\n"],"names":["global","factory","receiver","privateMap","has","TypeError","get","value","descriptor","writable","privateSet","fn","obj","key","Object","defineProperty","enumerable","configurable","$3e4dfb3336db3303$exports","exports","BladeApi","disabled","this","controller_","viewProps","set","hidden","dispose","controller","TpEvent","target","TpChangeEvent","presetKey","last","super","TpUpdateEvent","TpFoldEvent","expanded","isEmpty","deepEqualsArray","a1","a2","length","i","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","context","name","nomatchingcontroller","nomatchingview","JSON","stringify","params","notbindable","propertynotfound","shouldneverhappen","TpError","type","config","_a","message","constructor","stack","Error","BindingTarget","key_","presetKey_","read","obj_","write","writeProperty","valueObj","isBindable","notBindable","propertyNotFound","opt_id","ButtonApi","label","props","title","valueController","on","eventName","handler","bh","bind","emitter","Emitter","observers","observers_","push","off","filter","observer","emit","event","forEach","PREFIX","ClassName","viewName","opt_elementName","opt_modifier","join","extractValue","ev","rawValue","bindValue","applyValue","h1","h2","input","bindValueMap","valueMap","valueToClassName","elem","className","active","classList","add","remove","applyClass","bindValueToTextContent","text","textContent","className$q","ButtonView","doc","element","createElement","bindClassModifiers","buttonElem","bindDisabled","appendChild","buttonElement","titleElem","ButtonController","onClick_","sender","view","addEventListener","BoundValue","constraint","constraint_","rawValue_","setRawValue","forceEmit","options","opts","constrainedValue","constrain","equals_","initialValue","equals","v1","v2","PrimitiveValue","value_","createValue","ValueMap","keys","reduce","o","assign","core","createCore","valMap_","createParamsParserBuilder","parse","optional","v","undefined","succeeded","result","createParamsParserBuilders","custom","boolean","number","string","function","constant","raw","object","keyToParserMap","tmp","parser","parseObject","array","itemParser","parseItem","Array","isArray","item","ParamsParsers","required","parseParams","className$p","POS_TO_CLASS_NAME_MAP","veryfirst","first","verylast","BladeController","parent","parent_","blade","pos","handleDispose","parentElement","removeChild","disposeElement","SVG_NS","forceReflow","offsetHeight","supportsTouch","ontouchstart","getWindowDocument","Function","document","ICON_ID_TO_INNER_HTML_MAP","check","dropdown","p2dpad","createSvgIconElement","iconId","createElementNS","innerHTML","insertElementAt","index","insertBefore","children","removeElement","removeChildElements","findNextTarget","relatedTarget","explicitOriginalTarget","className$o","LabelView","labelElem","childNodes","removeChildNodes","frag","createDocumentFragment","split","map","line","createTextNode","lineNode","createLabelNode","labelElement","valueElem","valueElement","LabelController","ButtonBladePlugin","id","accept","p","args","fromObject","api","ValueBladeController","createBlade","positions","Foldable","coreObj","completed","expandedHeight","shouldFixHeight","temporaryExpanded","styleExpanded","styleHeight","exHeight","bindExpandedClass","expandedClassName","applyHeight","foldable","style","height","bindFoldable","folder","containerElement","callback","t","transition","disableTransitionTemporarily","clientHeight","computeExpandedFolderHeight","propertyName","RackLikeApi","rackApi","rackApi_","NestedOrderedSet","items","items_","allItems","from","cache_","find","includes","item1","opt_index","shouldNeverHappen","splice","subList","extract_","onSubListAdd_","onSubListRemove_","root","indexOf","delete","extract","Set","InputBindingApi","emitter_","refresh","binding","onBindingChange_","InputBindingController","MonitorBindingApi","onBindingUpdate_","MonitorBindingController","ticker","findSubBladeApiSet","RackApi","getApiByController","apiSet","api1","createBindingTarget","rack","bc","apiSet_","addInput","opt_params","ownerDocument","pool_","createInput","addMonitor","createMonitor","addFolder","addBlade","addFolderAsBlade","addButton","addButtonAsBlade","addSeparator","addSeparatorAsBlade","addTab","addTabAsBlade","gapi","a","createBladeApi","setUpApi_","onRackAdd_","bladeController","onRackRemove_","isRoot","onRackInputChange_","onRackMonitorUpdate_","pool","FolderApi","rackController","RackLikeController","PlainView","findSubRack","RackController","findSubBladeControllerSet","BladeRack","bcSet_","controllerClass","onSetAdd_","updatePositions_","onChildViewPropsChange_","onChildPositionsChange_","onChildDispose_","onChildInputChange_","onChildMonitorUpdate_","onChildValueChange_","onDescendantLayout_","onDescendantInputChange_","onDescendantMonitorUpdate_","onSetRemove_","visibleItems","firstVisibleItem","lastVisibleItem","ps","blade_","_ev","bcs","b","findInputBindingController","findMonitorBindingController","findValueBladeController","_","onBladePositionsChange_","bladeContainerClassName","FolderView","className_","foldable_","titleElement","markElem","containerElem","FolderController","onTitleClick_","create","rc","FolderBladePlugin","LabeledValueController","SeparatorApi","className$n","SeparatorView","hrElem","SeparatorController","SeparatorBladePlugin","className$m","valueToModifier","modifier","ViewProps","opt_initialValue","_b","disposed","bindTabIndex","tabIndex","className$l","TabItemView","selected","TabItemController","TabPageController","itemController","ic_","contentController","cc_","onItemClick_","itemProps","TabPageApi","contentRackApi","TabApi","pages","pageSet","pc","pageApiMap_","addPage","removePage","setUpPageApi_","api3","onPageAdd_","onPageRemove_","Map","className$k","TabView","empty","itemsElem","itemsElement","contentsElem","contentsElement","TabController","pageSet_","applyPages_","keepSelection_","empty_","onPageSelectedChange_","firstSelIndex","findIndex","cr","TabBladePlugin","c","ManualTicker","tick","IntervalTicker","disabled_","inactive","clearTimer_","setTimer_","timerId_","win","doc_","defaultView","clearInterval","interval_","setInterval","onTick_","interval","CompositeConstraint","constraints","findConstraint","constraintClass","tmpResult","sc","ListConstraint","RangeConstraint","minValue","Math","max","maxValue","min","StepConstraint","round","step","className$j","ListView","update_","selectElement","String","onValueChange_","props_","selectElem","optionElem","dataset","ListController","onSelectChange_","e","optElem","currentTarget","selectedOptions","itemIndex","Number","className$i","PopupView","shows","PopupController","className$h","TextView","formatter","inputElement","onChange_","inputElem","TextController","onInputChange_","parsedValue","parser_","boolFromUnknown","BooleanFormatter","boolToString","NumberLiteralNode","evaluate","toString","BINARY_OPERATION_MAP","pow","BinaryOperationNode","op","operator","left","right","UNARY_OPERATION_MAP","UnaryOperationNode","expression","expr","combineReader","parsers","cursor","readWhitespace","m","substr","match","readDecimalDigits","readExponentPart","toLowerCase","si","ds","sign","sds","readSignedInteger","readDecimalIntegerLiteral","ch","nzd","readNonZeroDigit","readDecimalLiteral","dil","dot","dds","readNonDecimalIntegerLiteral","prefix","bds","parseBinaryDigits","ods","readOctalDigits","hds","readHexDigits","readNumericLiteral","parsePrimaryExpression","num","evaluable","parseLiteral","parseExpression","cl","parseParenthesizedExpression","readBinaryOperator","ops","op1","startsWith","parseBinaryOperationExpression","exprParser","firstExpr","nextExpr","createBinaryOperationExpressionParser","parseUnaryExpression","parseNumber","r","parseEcmaNumberExpression","numberFromUnknown","pv","numberToString","createNumberFormatter","digits","toFixed","innerFormatter","formatPercentage","stringFromUnknown","formatString","fillBuffer","buffer","bufferSize","initializeBuffer","createTrimmedBuffer","slice","connectValues","primary","secondary","forward","backward","changing","preventFeedback","getStepForKey","baseStep","altKey","shiftKey","upKey","downKey","getVerticalStepKeys","getHorizontalStepKeys","isArrowKey","isVerticalArrowKey","computeOffset$1","rect","getBoundingClientRect","x","pageX","scrollX","y","pageY","scrollY","top","PointerHandler","computePosition_","offset","elem_","bounds","width","point","onMouseDown_","preventDefault","focus","onDocumentMouseMove_","onDocumentMouseUp_","data","removeEventListener","onTouchStart_","touch","targetTouches","clientX","clientY","lastTouch_","onTouchMove_","onTouchEnd_","passive","mapRange","start1","end1","start2","end2","getDecimalDigits","replace","constrainRange","loopRange","className$g","NumberTextView","onDraggingChange_","aox","adx","guideHeadElem_","setAttributeNS","guideBodyElem_","tooltipElem_","arrayPosition","dragging_","dragging","knobElem","knobElement","guideElem","bodyElem","headElem","tooltipElem","NumberTextController","onInputKeyDown_","baseStep_","onInputKeyUp_","onPointerDown_","originRawValue_","computeDraggingValue_","dx","onPointerMove_","onPointerUp_","ph","className$f","SliderView","trackElem","trackElement","SliderController","handlePointerEvent_","d","onPointerDownOrMove_","onKeyDown_","onKeyUp_","ptHandler_","className$e","SliderTextView","sliderElem","sliderView_","sliderView","textElem","textView_","textView","SliderTextController","sliderController","sliderC_","textController","textC_","sliderProps","textProps","writePrimitive","parseListOptions","parsePickerLayout","parsePointDimensionParams","normalizeListOptions","createListConstraint","findListItems","getSuitableDecimalDigits","getBaseStep","findStep","getSuitableDraggingScale","base","abs","floor","log10","className$d","CheckboxView","checked","wrapperElem","CheckboxController","BooleanInputPlugin","reader","_args","lc","createConstraint$5","writer","className$c","ColorView","swatchElem","swatchElement","textElement","pickerLayout","pickerElem","pickerElement","hsvToRgb","h","s","hp","sp","vp","rp","gp","bp","removeAlphaComponent","comps","appendAlphaComponent","alpha","MODE_CONVERTER_MAP","hsl","l","hsv","sd","rgb","lp","g","cmax","cmin","CONSTRAINT_MAP","isRgbColorComponent","Color","color","toRgbaObject","isRgbColorObject","mode_","comps1","comps_","comps2","mode","getComponents","opt_mode","components","fromMode","toMode","rgbComps","className$b","ColorPickerView","allFocusableElements","elems","svPaletteView_","hPaletteView_","modeSelectElement","textViews","alphaViews_","palette","hsvElem","svElem","svPaletteView","hElem","hPaletteView","rgbElem","alphaViews","aElem","apElem","atElem","parseColorInputParams","picker","getBaseStepForColor","forAlpha","parseCssNumberOrPercentage","parseFloat","ANGLE_TO_DEG_MAP","deg","angle","grad","rad","PI","turn","parseCssNumberOrAngle","unit","NOTATION_TO_PARSER_MAP","isNaN","mRgb","parseInt","mRrggbb","getColorNotation","notation","subparser","CompositeColorParser","hasAlphaComponent","colorFromString","cv","black","zerofill","comp","hex","colorToHexRgbString","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","colorToFunctionalRgbaString","aFormatter","rgbFormatter","NOTATION_TO_STRINGIFIER_MAP","formatters","getColorStringifier","className$a","APaletteView","leftColor","rightColor","gradientComps","colorElem_","background","previewElem_","backgroundColor","markerElem_","barElem","colorElem","markerElem","previewElem","APaletteController","className$9","ColorTextView","modeElem_","textViews_","applyTextViews_","textsElem_","compElem","modeElem","createModeSelectElement","modeMarkerElem","textsElem","colorMode","FORMATTER","MODE_TO_CONSTRAINT_MAP","createComponentController","draggingScale","ColorTextController","createComponentControllers_","cc","ccs","cs","pickedMode","onModeSelectChange_","ccs_","className$8","HPaletteView","HPaletteController","hue","className$7","SvPaletteView","ctx","canvasElement","getContext","getCanvasContext","hsvComps","imgData","getImageData","iy","ix","putImageData","canvasElem","SvPaletteController","saturation","dv","ColorPickerController","hPaletteC_","svPaletteC_","alphaIcs_","supportsAlpha","className$6","ColorSwatchView","swatchElem_","ColorSwatchController","ColorController","onButtonBlur_","popC_","nextTarget","contains","onButtonClick_","pickerC_","onPopupChildBlur_","swatchC_","onPopupChildKeydown_","pickerC","colorFromObject","isColorObject","colorToRgbNumber","colorToRgbaNumber","colorFromRgbNumber","colorFromRgbaNumber","writeRgbaColorObject","writeRgbColorObject","shouldSupportAlpha$1","inputParams","createFormatter$1","NumberColorInputPlugin","colorToNumber","createColorNumberWriter","ObjectColorInputPlugin","createColorObjectWriter","isRgbaColorObject","StringColorInputPlugin","createColorStringWriter","stringifier","PointNdConstraint","asm_","toComponents","fromComponents","assembly","className$5","PointNdTextView","axisElem","PointNdTextController","acs_","axes","createAxisController","ac","createConstraint$4","createStepConstraint","createRangeConstraint","estimateSuitableRange","findRange","NumberInputPlugin","format","Point2d","toObject","Point2dAssembly","className$4","Point2dView","className$3","Point2dPickerView","padElement","maxValue_","px","py","ipy","invertsY_","lineElem_","onFoldableChange_","invertsY","layout","padElem","svgElem","svgElem_","xAxisElem","yAxisElem","lineElem","computeOffset","baseSteps","Point2dPickerController","onPadKeyDown_","dy","baseSteps_","onPadKeyUp_","Point2dController","onPadButtonBlur_","onPadButtonClick_","padC","point2dFromUnknown","isObject","writePoint2d","createDimensionConstraint$2","getSuitableMaxDimensionValue","getSuitableMaxValue","xc","yc","xr","yr","createAxis$2","shouldInvertY","yParams","inverted","Point2dInputPlugin","createConstraint$3","Point3d","z","Point3dAssembly","point3dFromUnknown","writePoint3d","createDimensionConstraint$1","createAxis$1","Point3dInputPlugin","createConstraint$2","Point4d","w","Point4dAssembly","point4dFromUnknown","writePoint4d","createDimensionConstraint","Point4dInputPlugin","createConstraint$1","createAxis","StringInputPlugin","createConstraint","Constants","defaultInterval","defaultLineCount","className$2","MultiLogView","textareaElem_","shouldScroll","scrollTop","scrollHeight","lines","formatter_","onValueUpdate_","textareaElem","lineCount","readOnly","MultiLogController","className$1","SingleLogView","values","lastValue","SingleLogController","BooleanMonitorPlugin","GraphCursor","index_","className1","GraphLogView","graphElement","maxIndex","minValue_","points","cursor_","tx","ty","onCursorChange_","GraphLogController","onGraphMouseLeave_","onGraphMouseMove_","offsetX","onGraphPointerDown_","onGraphPointerMove_","onGraphPointerUp_","createFormatter","shouldShowGraph","NumberMonitorPlugin","defaultBufferSize","_c","createGraphMonitor","createTextMonitor","StringMonitorPlugin","multiline","InputBinding","targetValue","write_","MonitorBinding","newValue","reader_","newBuffer","createPushedBuffer","createTicker","PluginPool","getAll","pluginsMap_","blades","inputs","monitors","register","unshift","plugin","valueArgs","createInputBindingController","P","bindingArgs","createMonitorBindingController","createBladeController","ListApi","SliderApi","TextApi","ListBladePlugin","ic","RootApi","importPreset","preset","targets","importPresetJson","ibc","exportPreset","exportPresetJson","mbc","RootController","SliderBladePlugin","vc","TextBladePlugin","embedStyle","css","querySelector","styleElem","tpStyle","head","VERSION","major","minor","patch","prerelease","coreComps","Pane","alreadyDisposed","containerElem_","usesDefaultWrapper_","parentElem","registerPlugin","bundle","plugins","embedPluginStyle_","setUpDefaultPlugins_","opt_config","createDefaultPluginPool","container","body","createDefaultWrapperElement","define","amd","globalThis","self","Tweakpane","$0526ef4aedbd7991$export$b67359430d3b1b2","Float32Array","$0526ef4aedbd7991$export$5ada478c8a628231","random","$8c678e942362b0b9$export$185802fd694ee1f5","out","$8c678e942362b0b9$export$9cd59f9826255e47","$8c678e942362b0b9$export$784d13d8ee351f07","$8c678e942362b0b9$export$a82be99ed2a44a7d","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","$8c678e942362b0b9$export$adaa4cf7ef1b65be","$8c678e942362b0b9$export$f0954fd7d5368655","$8c678e942362b0b9$export$9cb09a71b7d66923","a01","a02","a03","a12","a13","a23","$8c678e942362b0b9$export$6897c284b6f9f4dc","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","$8c678e942362b0b9$export$33f3c024b4ae00a1","$8c678e942362b0b9$export$a04698f914c55ed9","$8c678e942362b0b9$export$2060d2db72cce88f","b0","b1","b2","b3","$8c678e942362b0b9$export$d73ee8ef04f5226a","$8c678e942362b0b9$export$dcdf75081b88279d","$8c678e942362b0b9$export$bb628a54ab399bc9","axis","b12","b20","b21","b22","len","hypot","sin","cos","$8c678e942362b0b9$export$a59c8716592e09af","$8c678e942362b0b9$export$cf71e4d4ca4d1cfd","$8c678e942362b0b9$export$ea6eae3365de5b9c","$8c678e942362b0b9$export$bc9e79e74e9fddf6","$8c678e942362b0b9$export$832ca188ffb1955d","$8c678e942362b0b9$export$926fc125ff3c666c","$8c678e942362b0b9$export$dd47cc2f828c32ef","$8c678e942362b0b9$export$7dc997d67d2b7f33","$8c678e942362b0b9$export$ad5ddaedc8f405df","$8c678e942362b0b9$export$9545ac307f2a256b","q","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","$8c678e942362b0b9$export$ff497f2be31cc6a","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","$8c678e942362b0b9$export$202e99f82f7f0395","mat","$8c678e942362b0b9$export$71dc54d92bd04b57","$8c678e942362b0b9$export$df3937d3b537df0a","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","sqrt","$8c678e942362b0b9$export$ddf9c55c9f2be172","sx","sy","sz","$8c678e942362b0b9$export$1def1f860edc4b1f","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","$8c678e942362b0b9$export$2ff2bbe382249af7","yx","zx","zy","$8c678e942362b0b9$export$89b5708c387cac6c","bottom","near","far","rl","tb","nf","$8c678e942362b0b9$export$4cf19729ec9a96b8","fovy","aspect","f","tan","Infinity","arguments","$8c678e942362b0b9$export$541149539f3a4684","$8c678e942362b0b9$export$294bba99a6af0c0c","$8c678e942362b0b9$export$58ae211c788e338f","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","$8c678e942362b0b9$export$c5f65ef3eb668f27","lr","bt","$8c678e942362b0b9$export$4f2167e613cfc87b","$8c678e942362b0b9$export$b1d31ea7b4d854e","$8c678e942362b0b9$export$d924e14fd6d9aa66","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","$8c678e942362b0b9$export$aa67782f4dc9e52c","$8c678e942362b0b9$export$42d51816ce590c93","$8c678e942362b0b9$export$326827e8268e9cdb","$8c678e942362b0b9$export$e16d8520af44a096","$8c678e942362b0b9$export$4e2d2ead65e5f7e3","$8c678e942362b0b9$export$c697bed75648cdb7","$8c678e942362b0b9$export$553579f63bdd7137","$8c678e942362b0b9$export$f2599a5cf1109d8","$8c678e942362b0b9$export$e9bab7fafb253603","a0","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","$8c678e942362b0b9$export$6e3a27864ab166fe","$8c678e942362b0b9$export$f93b5905241a7cca","$b4d34f945b36eb1f$export$185802fd694ee1f5","$b4d34f945b36eb1f$export$9cd59f9826255e47","$b4d34f945b36eb1f$export$f24224f1c91d8156","$b4d34f945b36eb1f$export$a82be99ed2a44a7d","$b4d34f945b36eb1f$export$784d13d8ee351f07","$b4d34f945b36eb1f$export$adaa4cf7ef1b65be","$b4d34f945b36eb1f$export$e16d8520af44a096","$b4d34f945b36eb1f$export$4e2d2ead65e5f7e3","$b4d34f945b36eb1f$export$2060d2db72cce88f","$b4d34f945b36eb1f$export$cd007d971a5a2143","$b4d34f945b36eb1f$export$803ce6b71a0a94b2","ceil","$b4d34f945b36eb1f$export$a3fe094919f356fd","$b4d34f945b36eb1f$export$96ec731ed4dcb222","$b4d34f945b36eb1f$export$8960430cfd85939f","$b4d34f945b36eb1f$export$2077e0241d6afd3c","$b4d34f945b36eb1f$export$dcdf75081b88279d","$b4d34f945b36eb1f$export$19cedf1da84ba854","$b4d34f945b36eb1f$export$9f17032d917177de","$b4d34f945b36eb1f$export$88e6ebb4fe54f538","$b4d34f945b36eb1f$export$ab44e1323ffc8376","$b4d34f945b36eb1f$export$aef51622e549b8b0","$b4d34f945b36eb1f$export$70ae2c07e401031b","$b4d34f945b36eb1f$export$a3295358bff77e","$b4d34f945b36eb1f$export$fc1400facf92c78","$b4d34f945b36eb1f$export$94132a0e348806d4","$b4d34f945b36eb1f$export$bb646b20bb93d339","$b4d34f945b36eb1f$export$3a89f8d6f6bf6c9f","$b4d34f945b36eb1f$export$ae8865616f30561c","factorTimes2","factor1","factor2","factor3","factor4","$b4d34f945b36eb1f$export$b9c5f84610baddaf","inverseFactor","inverseFactorTimesTwo","$b4d34f945b36eb1f$export$4385e60b38654f68","zScale","$b4d34f945b36eb1f$export$5ffbd13800309d59","$b4d34f945b36eb1f$export$f0bfa0a0024626ee","$b4d34f945b36eb1f$export$c32adef9e939ce85","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","$b4d34f945b36eb1f$export$a59c8716592e09af","$b4d34f945b36eb1f$export$cf71e4d4ca4d1cfd","$b4d34f945b36eb1f$export$ea6eae3365de5b9c","$b4d34f945b36eb1f$export$944b09d2ad10b378","mag","cosine","acos","$b4d34f945b36eb1f$export$7f9972325ebfd559","$b4d34f945b36eb1f$export$42d51816ce590c93","$b4d34f945b36eb1f$export$f2599a5cf1109d8","$b4d34f945b36eb1f$export$e9bab7fafb253603","vec","$b4d34f945b36eb1f$export$f93b5905241a7cca","$b4d34f945b36eb1f$export$6e3a27864ab166fe","$b4d34f945b36eb1f$export$159d9494db57879b","$b4d34f945b36eb1f$export$6c4a311cc157c764","$b4d34f945b36eb1f$export$2422cd6c492a8b3a","$b4d34f945b36eb1f$export$99d8dd3f32a3435","$b4d34f945b36eb1f$export$4b80e395e36b5a56","stride","count","arg","$670b89df6ca628ce$export$f24224f1c91d8156","$670b89df6ca628ce$export$ab44e1323ffc8376","$b05eccd75d26bd5a$export$185802fd694ee1f5","$b05eccd75d26bd5a$export$f0954fd7d5368655","$b05eccd75d26bd5a$export$4286ddefc8f49512","$b05eccd75d26bd5a$export$3f70be5e7d7dc51","out_axis","$b05eccd75d26bd5a$export$b363da9ded343252","dotproduct","$b05eccd75d26bd5a$export$94132a0e348806d4","$b05eccd75d26bd5a$export$2060d2db72cce88f","$b05eccd75d26bd5a$export$a59c8716592e09af","$b05eccd75d26bd5a$export$cf71e4d4ca4d1cfd","$b05eccd75d26bd5a$export$ea6eae3365de5b9c","$b05eccd75d26bd5a$export$fb72b72e8d764d4e","$b05eccd75d26bd5a$export$b310ec824aaee37f","et","exp","$b05eccd75d26bd5a$export$876cb1b29620556f","atan2","log","$b05eccd75d26bd5a$export$9c297f60e22e3389","$b05eccd75d26bd5a$export$dcdf75081b88279d","$b05eccd75d26bd5a$export$1544d9bc2995de08","omega","cosom","sinom","scale0","scale1","$b05eccd75d26bd5a$export$4385e60b38654f68","u1","u2","u3","sqrt1MinusU1","sqrtU1","$b05eccd75d26bd5a$export$6897c284b6f9f4dc","invDot","$b05eccd75d26bd5a$export$7679f47e72c62560","$b05eccd75d26bd5a$export$272a1eb8e5a4b55b","fRoot","fTrace","j","k","$b05eccd75d26bd5a$export$7a404a587ea85af","halfToRad","cx","cy","cz","$b05eccd75d26bd5a$export$42d51816ce590c93","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","$b05eccd75d26bd5a$export$9cd59f9826255e47","$b05eccd75d26bd5a$export$a82be99ed2a44a7d","$b05eccd75d26bd5a$export$784d13d8ee351f07","$b05eccd75d26bd5a$export$adaa4cf7ef1b65be","$b05eccd75d26bd5a$export$e16d8520af44a096","$b05eccd75d26bd5a$export$6e3a27864ab166fe","$b05eccd75d26bd5a$export$3a89f8d6f6bf6c9f","$b05eccd75d26bd5a$export$f24224f1c91d8156","$b05eccd75d26bd5a$export$fc1400facf92c78","$b05eccd75d26bd5a$export$ab44e1323ffc8376","$b05eccd75d26bd5a$export$99d8dd3f32a3435","$b05eccd75d26bd5a$export$a3295358bff77e","$670b89df6ca628ce$export$fc1400facf92c78","$b05eccd75d26bd5a$export$f2599a5cf1109d8","$b05eccd75d26bd5a$export$e9bab7fafb253603","$b05eccd75d26bd5a$export$72d66f5842c00904","$b05eccd75d26bd5a$export$699b0866ca50f6cb","$b05eccd75d26bd5a$export$937ca0a544b2d712","$56f78f1c3bf4e5b9$export$5dc878ab9e1f1ddf","update","pointerDown","damping","followPos","pointerPos","delta","prevFollowPos","speed","phi","theta","camera","rotation","$b05eccd75d26bd5a$exports","fromEuler","orbit","$b4d34f945b36eb1f$exports","transformQuat","position","distance","updateCallback","canvas","pointerDownPos","touchAction","pointerDownCameraUp","pointerDownRotation","$247ab1746d4d6b81$var$Grad","prototype","dot2","dot3","$247ab1746d4d6b81$var$grad3","$247ab1746d4d6b81$var$p","$247ab1746d4d6b81$var$perm","$247ab1746d4d6b81$var$gradP","$247ab1746d4d6b81$export$7f7d45814fc23e4d","$247ab1746d4d6b81$var$F2","$247ab1746d4d6b81$var$G2","_render","WeakSet","_renderBlurPass","_init","_createXYPlaneGeometry","_createBuffer","_initOrbitControls","_createFramebuffer","_makeVertexArray","_createShader","_createProgram","_setFramebuffer","_createAndSetupTexture","_resizeTextures","_updateCameraMatrix","_updateProjectionMatrix","_resizeCanvasToDisplaySize","_initTweakpane","_createTweakpaneSlider","$4b443f94f29d7581$export$501e333efb002ee5","resize","gl","resizeCanvasToDisplaySize","call","viewport","drawingBufferWidth","drawingBufferHeight","resizeTextures","updateProjectionMatrix","run","time","_deltaTime","$bc3c910e665b60ca$export$2e2bcd8739ae039","_time","_frames","_isDestroyed","control","worldInvers","$8c678e942362b0b9$exports","invert","drawUniforms","u_worldMatrix","transpose","u_worldInverseTransposeMatrix","render","requestAnimationFrame","destroy","pane","oninit","matrix","fromValues","radius","scale","init","WeakMap","enable","DEPTH_TEST","disable","CULL_FACE","setFramebuffer","drawFramebuffer","drawFramebufferWidth","drawFramebufferHeight","useProgram","drawProgram","bindVertexArray","objectVAO","uniformMatrix4fv","drawLocations","u_viewMatrix","u_projectionMatrix","uniform3f","u_cameraPosition","uniform1f","u_frames","clearBufferfv","COLOR","DEPTH","drawElements","TRIANGLES","objectBuffers","numElem","UNSIGNED_SHORT","BLEND","blendFunc","ONE","SRC_COLOR","blendEquation","FUNC_SUBTRACT","portalProgram","centerObjectVAO","portalLocations","portalUniforms","drawArrays","centerObjectBuffers","bindFramebuffer","READ_FRAMEBUFFER","DRAW_FRAMEBUFFER","blitFramebuffer","COLOR_BUFFER_BIT","NEAREST","DEPTH_BUFFER_BIT","renderBlurPass","hexBlur1Framebuffer","hexBlur1Program","hexBlur1Locations","u_colorTexture","colorTexture","u_depthTexture","depthTexture","u_radiusScale","blur","u_maxCoCRadius","hexBlur2Framebuffer","hexBlur2Program","hexBlur2Locations","u_verticalBlurTexture","hex1VerticalBlurTexture","u_diagonalBlurTexture","hex1DiagonalBlurTexture","clearColor","clear","compositeProgram","quadVAO","uniform1i","compositeLocations","u_texture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","hex2BlurTexture","quadBuffers","fbo","program","locTex","locFloat","locInt","loc","texture","ndx","antialias","$57ffde4c0031b911$export$2e2bcd8739ae039","createProgram","$parcel$interopDefault","a_position","a_normal","a_uv","getAttribLocation","getUniformLocation","rotate","translate","objectGeometry","createXYPlaneGeometry","n","xin","yin","i1","j1","gi0","gi1","gi2","t0","t1","t2","$247ab1746d4d6b81$export$d2c234accf62d50d","lw","asin","createBuffer","vertices","normal","normals","uv","uvs","makeVertexArray","indices","quadPositions","pR","rot","centerObjectPositions","clientWidth","createFramebuffer","FRAMEBUFFER","depthRenderbuffer","createRenderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorageMultisample","getParameter","MAX_SAMPLES","DEPTH_COMPONENT32F","framebufferRenderbuffer","DEPTH_ATTACHMENT","colorRenderbuffer","RGBA8","COLOR_ATTACHMENT0","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","console","error","createAndSetupTexture","texImage2D","DEPTH_COMPONENT","FLOAT","framebufferTexture2D","LINEAR","RGBA","UNSIGNED_BYTE","updateCameraMatrix","initOrbitControls","initTweakpane","wSegments","hSegments","distort","wOff","dd","cross","normalize","iy1","ix1","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","colorAttachements","drawBuffers","attachmentPoint","bufLocNumElmPairs","va","createVertexArray","enableVertexAttribArray","vertexAttribPointer","indexBuffer","ELEMENT_ARRAY_BUFFER","Uint16Array","createShader","source","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","shaderSources","transformFeedbackVaryings","attribLocations","VERTEX_SHADER","FRAGMENT_SHADER","attachShader","SEPARATE_ATTRIBS","attrib","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","minFilter","magFilter","createTexture","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","targetTo","perspective","displayWidth","displayHeight","needResize","maxFar","cameraFolder","createTweakpaneSlider","blurSettings","propName","stepSize","$6f40c3a58f594b58$var$queryString","window","location","search","$6f40c3a58f594b58$var$sketch","$6f40c3a58f594b58$var$resizeTimeoutId","$6f40c3a58f594b58$var$DEBUG","URLSearchParams","sketch","clearTimeout","setTimeout"],"version":3,"file":"index.b769a64f.js.map"}