{"mappings":"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","sources":["node_modules/tweakpane/dist/tweakpane.js","node_modules/@swc/helpers/src/_assert_this_initialized.js","node_modules/@swc/helpers/src/_class_call_check.js","node_modules/@swc/helpers/src/_class_private_field_get.js","node_modules/@swc/helpers/src/_class_private_field_set.js","node_modules/@swc/helpers/src/_class_private_method_get.js","node_modules/@swc/helpers/src/_construct.js","node_modules/@swc/helpers/src/_create_class.js","node_modules/@swc/helpers/src/_define_property.js","node_modules/@swc/helpers/src/_get_prototype_of.js","node_modules/@swc/helpers/src/_get.js","node_modules/@swc/helpers/src/_super_prop_base.js","node_modules/@swc/helpers/src/_set_prototype_of.js","node_modules/@swc/helpers/src/_inherits.js","node_modules/@swc/helpers/src/_object_spread.js","node_modules/@swc/helpers/src/_iterable_to_array.js","node_modules/@swc/helpers/src/_sliced_to_array.js","node_modules/@swc/helpers/src/_array_with_holes.js","node_modules/@swc/helpers/src/_non_iterable_rest.js","node_modules/@swc/helpers/src/_to_consumable_array.js","node_modules/@swc/helpers/src/_array_without_holes.js","node_modules/@swc/helpers/src/_non_iterable_spread.js","node_modules/@swc/helpers/src/_possible_constructor_return.js","node_modules/@swc/helpers/src/_type_of.js","node_modules/@swc/helpers/src/_create_super.js","node_modules/@swc/helpers/src/_is_native_reflect_construct.js","node_modules/gl-matrix/esm/common.js","node_modules/gl-matrix/esm/mat4.js","node_modules/gl-matrix/esm/mat3.js","node_modules/gl-matrix/esm/vec3.js","node_modules/gl-matrix/esm/vec4.js","node_modules/gl-matrix/esm/quat.js","src/orbit-control.js","src/noise.js","src/hexagonal-bokeh.js","src/shader/draw.vert","src/shader/draw.frag","src/shader/portal.vert","src/shader/portal.frag","src/shader/hex-blur-1.vert","src/shader/hex-blur-1.frag","src/shader/hex-blur-2.vert","src/shader/hex-blur-2.frag","src/shader/composite.vert","src/shader/composite.frag","src/app.js"],"sourcesContent":["/*! Tweakpane 3.0.7 (c) 2016 cocopon, licensed under the MIT license. */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Tweakpane = {}));\n})(this, (function (exports) { 'use strict';\n\n    /***\n     * A simple semantic versioning perser.\n     */\n    class Semver {\n        /**\n         * @hidden\n         */\n        constructor(text) {\n            const [core, prerelease] = text.split('-');\n            const coreComps = core.split('.');\n            this.major = parseInt(coreComps[0], 10);\n            this.minor = parseInt(coreComps[1], 10);\n            this.patch = parseInt(coreComps[2], 10);\n            this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n        }\n        toString() {\n            const core = [this.major, this.minor, this.patch].join('.');\n            return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n        }\n    }\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n    class TpUpdateEvent extends TpEvent {\n        constructor(target, value, presetKey) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n        }\n    }\n    class TpFoldEvent extends TpEvent {\n        constructor(target, expanded) {\n            super(target);\n            this.expanded = expanded;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) {\n            return false;\n        }\n        for (let i = 0; i < a1.length; i++) {\n            if (a1[i] !== a2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n    }\n\n    class BindingTarget {\n        constructor(obj, key, opt_id) {\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        static isBindable(obj) {\n            if (obj === null) {\n                return false;\n            }\n            if (typeof obj !== 'object') {\n                return false;\n            }\n            return true;\n        }\n        get key() {\n            return this.key_;\n        }\n        get presetKey() {\n            return this.presetKey_;\n        }\n        read() {\n            return this.obj_[this.key_];\n        }\n        write(value) {\n            this.obj_[this.key_] = value;\n        }\n        writeProperty(name, value) {\n            const valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) {\n                throw TpError.notBindable();\n            }\n            if (!(name in valueObj)) {\n                throw TpError.propertyNotFound(name);\n            }\n            valueObj[name] = value;\n        }\n    }\n\n    class ButtonApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.valueController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.valueController.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.valueController.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$q = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$q());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$q('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$q('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const changed = !this.equals_(this.rawValue_, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            if (this.value_ === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$p = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return new Function('return this')();\n    }\n    function getWindowDocument() {\n        const globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function getCanvasContext(canvasElement) {\n        const win = canvasElement.ownerDocument.defaultView;\n        if (!win) {\n            return null;\n        }\n        const isBrowser = 'document' in win;\n        return isBrowser ? canvasElement.getContext('2d') : null;\n    }\n    const ICON_ID_TO_INNER_HTML_MAP = {\n        check: '<path d=\"M2 8l4 4l8 -8\"/>',\n        dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n        p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n    };\n    function createSvgIconElement(document, iconId) {\n        const elem = document.createElementNS(SVG_NS, 'svg');\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function removeElement(element) {\n        if (element.parentElement) {\n            element.parentElement.removeChild(element);\n        }\n    }\n    function removeChildElements(element) {\n        while (element.children.length > 0) {\n            element.removeChild(element.children[0]);\n        }\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$o = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$o());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$o('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$o(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$o(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$o('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    const ButtonBladePlugin = {\n        id: 'button',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('button'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonController(args.document, {\n                    props: ValueMap.fromObject({\n                        title: args.params.title,\n                    }),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonController)) {\n                return null;\n            }\n            return new ButtonApi(args.controller);\n        },\n    };\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    function createBlade() {\n        return new ValueMap({\n            positions: createValue([], {\n                equals: deepEqualsArray,\n            }),\n        });\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            bindValueMap(this, 'expanded', () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            });\n        }\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                foldable.set('expandedHeight', computeExpandedFolderHeight(foldable, elem));\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.set('shouldFixHeight', false);\n            foldable.set('expandedHeight', null);\n            foldable.set('completed', true);\n        });\n    }\n\n    class RackLikeApi extends BladeApi {\n        constructor(controller, rackApi) {\n            super(controller);\n            this.rackApi_ = rackApi;\n        }\n    }\n\n    function addButtonAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n    }\n    function addFolderAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n    }\n    function addSeparatorAsBlade(api, opt_params) {\n        const params = opt_params || {};\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'separator' }));\n    }\n    function addTabAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n    }\n\n    class NestedOrderedSet {\n        constructor(extract) {\n            this.emitter = new Emitter();\n            this.items_ = [];\n            this.cache_ = new Set();\n            this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n            this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n            this.extract_ = extract;\n        }\n        get items() {\n            return this.items_;\n        }\n        allItems() {\n            return Array.from(this.cache_);\n        }\n        find(callback) {\n            for (const item of this.allItems()) {\n                if (callback(item)) {\n                    return item;\n                }\n            }\n            return null;\n        }\n        includes(item) {\n            return this.cache_.has(item);\n        }\n        add(item, opt_index) {\n            if (this.includes(item)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.cache_.add(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.on('add', this.onSubListAdd_);\n                subList.emitter.on('remove', this.onSubListRemove_);\n                subList.allItems().forEach((item) => {\n                    this.cache_.add(item);\n                });\n            }\n            this.emitter.emit('add', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            this.cache_.delete(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.off('add', this.onSubListAdd_);\n                subList.emitter.off('remove', this.onSubListRemove_);\n            }\n            this.emitter.emit('remove', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        onSubListAdd_(ev) {\n            this.cache_.add(ev.item);\n            this.emitter.emit('add', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n        onSubListRemove_(ev) {\n            this.cache_.delete(ev.item);\n            this.emitter.emit('remove', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n    }\n\n    class InputBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingChange_ = this.onBindingChange_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('change', this.onBindingChange_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingChange_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('change', {\n                event: new TpChangeEvent(this, forceCast(value), this.controller_.binding.target.presetKey, ev.options.last),\n            });\n        }\n    }\n\n    class InputBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n        }\n    }\n\n    class MonitorBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingUpdate_ = this.onBindingUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('update', this.onBindingUpdate_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingUpdate_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(this, forceCast(value), this.controller_.binding.target.presetKey),\n            });\n        }\n    }\n\n    class MonitorBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n            this.viewProps.bindDisabled(this.binding.ticker);\n            this.viewProps.handleDispose(() => {\n                this.binding.dispose();\n            });\n        }\n    }\n\n    function findSubBladeApiSet(api) {\n        if (api instanceof RackApi) {\n            return api['apiSet_'];\n        }\n        if (api instanceof RackLikeApi) {\n            return api['rackApi_']['apiSet_'];\n        }\n        return null;\n    }\n    function getApiByController(apiSet, controller) {\n        const api = apiSet.find((api) => api.controller_ === controller);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return api;\n    }\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) {\n            throw TpError.notBindable();\n        }\n        return new BindingTarget(obj, key, opt_id);\n    }\n    class RackApi extends BladeApi {\n        constructor(controller, pool) {\n            super(controller);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.onRackInputChange_ = this.onRackInputChange_.bind(this);\n            this.onRackMonitorUpdate_ = this.onRackMonitorUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.apiSet_ = new NestedOrderedSet(findSubBladeApiSet);\n            this.pool_ = pool;\n            const rack = this.controller_.rack;\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            rack.emitter.on('inputchange', this.onRackInputChange_);\n            rack.emitter.on('monitorupdate', this.onRackMonitorUpdate_);\n            rack.children.forEach((bc) => {\n                this.setUpApi_(bc);\n            });\n        }\n        get children() {\n            return this.controller_.rack.children.map((bc) => getApiByController(this.apiSet_, bc));\n        }\n        addInput(object, key, opt_params) {\n            const params = opt_params || {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createInput(doc, createBindingTarget(object, key, params.presetKey), params);\n            const api = new InputBindingApi(bc);\n            return this.add(api, params.index);\n        }\n        addMonitor(object, key, opt_params) {\n            const params = opt_params || {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createMonitor(doc, createBindingTarget(object, key), params);\n            const api = new MonitorBindingApi(bc);\n            return forceCast(this.add(api, params.index));\n        }\n        addFolder(params) {\n            return addFolderAsBlade(this, params);\n        }\n        addButton(params) {\n            return addButtonAsBlade(this, params);\n        }\n        addSeparator(opt_params) {\n            return addSeparatorAsBlade(this, opt_params);\n        }\n        addTab(params) {\n            return addTabAsBlade(this, params);\n        }\n        add(api, opt_index) {\n            this.controller_.rack.add(api.controller_, opt_index);\n            const gapi = this.apiSet_.find((a) => a.controller_ === api.controller_);\n            if (gapi) {\n                this.apiSet_.remove(gapi);\n            }\n            this.apiSet_.add(api);\n            return api;\n        }\n        remove(api) {\n            this.controller_.rack.remove(api.controller_);\n        }\n        addBlade(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createBlade(doc, params);\n            const api = this.pool_.createBladeApi(bc);\n            return this.add(api, params.index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpApi_(bc) {\n            const api = this.apiSet_.find((api) => api.controller_ === bc);\n            if (!api) {\n                this.apiSet_.add(this.pool_.createBladeApi(bc));\n            }\n        }\n        onRackAdd_(ev) {\n            this.setUpApi_(ev.bladeController);\n        }\n        onRackRemove_(ev) {\n            if (ev.isRoot) {\n                const api = getApiByController(this.apiSet_, ev.bladeController);\n                this.apiSet_.remove(api);\n            }\n        }\n        onRackInputChange_(ev) {\n            const bc = ev.bladeController;\n            if (bc instanceof InputBindingController) {\n                const api = getApiByController(this.apiSet_, bc);\n                const binding = bc.binding;\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, forceCast(binding.target.read()), binding.target.presetKey, ev.options.last),\n                });\n            }\n            else if (bc instanceof ValueBladeController) {\n                const api = getApiByController(this.apiSet_, bc);\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, bc.value.rawValue, undefined, ev.options.last),\n                });\n            }\n        }\n        onRackMonitorUpdate_(ev) {\n            if (!(ev.bladeController instanceof MonitorBindingController)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = getApiByController(this.apiSet_, ev.bladeController);\n            const binding = ev.bladeController.binding;\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(api, forceCast(binding.target.read()), binding.target.presetKey),\n            });\n        }\n    }\n\n    class FolderApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.emitter_ = new Emitter();\n            this.controller_.foldable\n                .value('expanded')\n                .emitter.on('change', (ev) => {\n                this.emitter_.emit('fold', {\n                    event: new TpFoldEvent(this, ev.sender.rawValue),\n                });\n            });\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n        }\n        get expanded() {\n            return this.controller_.foldable.get('expanded');\n        }\n        set expanded(expanded) {\n            this.controller_.foldable.set('expanded', expanded);\n        }\n        get title() {\n            return this.controller_.props.get('title');\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            return this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class RackLikeController extends BladeController {\n        constructor(config) {\n            super({\n                blade: config.blade,\n                view: config.view,\n                viewProps: config.rackController.viewProps,\n            });\n            this.rackController = config.rackController;\n        }\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    function findInputBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof InputBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findMonitorBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof MonitorBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findValueBladeController(bcs, v) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof ValueBladeController && bc.value === v) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findSubRack(bc) {\n        if (bc instanceof RackController) {\n            return bc.rack;\n        }\n        if (bc instanceof RackLikeController) {\n            return bc.rackController.rack;\n        }\n        return null;\n    }\n    function findSubBladeControllerSet(bc) {\n        const rack = findSubRack(bc);\n        return rack ? rack['bcSet_'] : null;\n    }\n    class BladeRack {\n        constructor(blade) {\n            var _a;\n            this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n            this.onSetAdd_ = this.onSetAdd_.bind(this);\n            this.onSetRemove_ = this.onSetRemove_.bind(this);\n            this.onChildDispose_ = this.onChildDispose_.bind(this);\n            this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n            this.onChildInputChange_ = this.onChildInputChange_.bind(this);\n            this.onChildMonitorUpdate_ = this.onChildMonitorUpdate_.bind(this);\n            this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n            this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n            this.onDescendantLayout_ = this.onDescendantLayout_.bind(this);\n            this.onDescendantInputChange_ = this.onDescendantInputChange_.bind(this);\n            this.onDescendantMonitorUpdate_ =\n                this.onDescendantMonitorUpdate_.bind(this);\n            this.emitter = new Emitter();\n            this.blade_ = blade !== null && blade !== void 0 ? blade : null;\n            (_a = this.blade_) === null || _a === void 0 ? void 0 : _a.value('positions').emitter.on('change', this.onBladePositionsChange_);\n            this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n            this.bcSet_.emitter.on('add', this.onSetAdd_);\n            this.bcSet_.emitter.on('remove', this.onSetRemove_);\n        }\n        get children() {\n            return this.bcSet_.items;\n        }\n        add(bc, opt_index) {\n            if (bc.parent) {\n                bc.parent.remove(bc);\n            }\n            bc['parent_'] = this;\n            this.bcSet_.add(bc, opt_index);\n        }\n        remove(bc) {\n            bc['parent_'] = null;\n            this.bcSet_.remove(bc);\n        }\n        find(controllerClass) {\n            return forceCast(this.bcSet_.allItems().filter((bc) => {\n                return bc instanceof controllerClass;\n            }));\n        }\n        onSetAdd_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('add', {\n                bladeController: ev.item,\n                index: ev.index,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n            bc.blade\n                .value('positions')\n                .emitter.on('change', this.onChildPositionsChange_);\n            bc.viewProps.handleDispose(this.onChildDispose_);\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.on('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.on('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.on('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.on('layout', this.onDescendantLayout_);\n                    emitter.on('inputchange', this.onDescendantInputChange_);\n                    emitter.on('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        onSetRemove_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('remove', {\n                bladeController: ev.item,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.off('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.off('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.off('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.off('layout', this.onDescendantLayout_);\n                    emitter.off('inputchange', this.onDescendantInputChange_);\n                    emitter.off('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        updatePositions_() {\n            const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n            const firstVisibleItem = visibleItems[0];\n            const lastVisibleItem = visibleItems[visibleItems.length - 1];\n            this.bcSet_.items.forEach((bc) => {\n                const ps = [];\n                if (bc === firstVisibleItem) {\n                    ps.push('first');\n                    if (!this.blade_ ||\n                        this.blade_.get('positions').includes('veryfirst')) {\n                        ps.push('veryfirst');\n                    }\n                }\n                if (bc === lastVisibleItem) {\n                    ps.push('last');\n                    if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                        ps.push('verylast');\n                    }\n                }\n                bc.blade.set('positions', ps);\n            });\n        }\n        onChildPositionsChange_() {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildViewPropsChange_(_ev) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildDispose_() {\n            const disposedUcs = this.bcSet_.items.filter((bc) => {\n                return bc.viewProps.get('disposed');\n            });\n            disposedUcs.forEach((bc) => {\n                this.bcSet_.remove(bc);\n            });\n        }\n        onChildInputChange_(ev) {\n            const bc = findInputBindingController(this.find(InputBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onChildMonitorUpdate_(ev) {\n            const bc = findMonitorBindingController(this.find(MonitorBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('monitorupdate', {\n                bladeController: bc,\n                sender: this,\n            });\n        }\n        onChildValueChange_(ev) {\n            const bc = findValueBladeController(this.find(ValueBladeController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantLayout_(_) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onDescendantInputChange_(ev) {\n            this.emitter.emit('inputchange', {\n                bladeController: ev.bladeController,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantMonitorUpdate_(ev) {\n            this.emitter.emit('monitorupdate', {\n                bladeController: ev.bladeController,\n                sender: this,\n            });\n        }\n        onBladePositionsChange_() {\n            this.updatePositions_();\n        }\n    }\n\n    class RackController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new PlainView(doc, {\n                    viewName: 'brk',\n                    viewProps: config.viewProps,\n                }) }));\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            const rack = new BladeRack(config.root ? undefined : config.blade);\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            this.rack = rack;\n            this.viewProps.handleDispose(() => {\n                for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                    const bc = this.rack.children[i];\n                    bc.viewProps.set('disposed', true);\n                }\n            });\n        }\n        onRackAdd_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            insertElementAt(this.view.element, ev.bladeController.view.element, ev.index);\n        }\n        onRackRemove_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            removeElement(ev.bladeController.view.element);\n        }\n    }\n\n    const bladeContainerClassName = ClassName('cnt');\n\n    class FolderView {\n        constructor(doc, config) {\n            this.className_ = ClassName(config.viewName || 'fld');\n            this.element = doc.createElement('div');\n            this.element.classList.add(this.className_(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            this.foldable_ = config.foldable;\n            this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n            bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(this.className_('b'));\n            bindValueMap(config.props, 'title', (title) => {\n                if (isEmpty(title)) {\n                    this.element.classList.add(this.className_(undefined, 'not'));\n                }\n                else {\n                    this.element.classList.remove(this.className_(undefined, 'not'));\n                }\n            });\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(this.className_('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(this.className_('m'));\n            this.buttonElement.appendChild(markElem);\n            const containerElem = config.containerElement;\n            containerElem.classList.add(this.className_('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n        }\n    }\n\n    class FolderController extends RackLikeController {\n        constructor(doc, config) {\n            var _a;\n            const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            const rc = new RackController(doc, {\n                blade: config.blade,\n                root: config.root,\n                viewProps: config.viewProps,\n            });\n            super(Object.assign(Object.assign({}, config), { rackController: rc, view: new FolderView(doc, {\n                    containerElement: rc.view.element,\n                    foldable: foldable,\n                    props: config.props,\n                    viewName: config.root ? 'rot' : undefined,\n                    viewProps: config.viewProps,\n                }) }));\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.props = config.props;\n            this.foldable = foldable;\n            bindFoldable(this.foldable, this.view.containerElement);\n            this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n        }\n        get document() {\n            return this.view.element.ownerDocument;\n        }\n        onTitleClick_() {\n            this.foldable.set('expanded', !this.foldable.get('expanded'));\n        }\n    }\n\n    const FolderBladePlugin = {\n        id: 'folder',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('folder'),\n                expanded: p.optional.boolean,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new FolderController(args.document, {\n                blade: args.blade,\n                expanded: args.params.expanded,\n                props: ValueMap.fromObject({\n                    title: args.params.title,\n                }),\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof FolderController)) {\n                return null;\n            }\n            return new FolderApi(args.controller, args.pool);\n        },\n    };\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class SeparatorApi extends BladeApi {\n    }\n\n    const className$n = ClassName('spr');\n    class SeparatorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$n());\n            config.viewProps.bindClassModifiers(this.element);\n            const hrElem = doc.createElement('hr');\n            hrElem.classList.add(className$n('r'));\n            this.element.appendChild(hrElem);\n        }\n    }\n\n    class SeparatorController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                    viewProps: config.viewProps,\n                }) }));\n        }\n    }\n\n    const SeparatorBladePlugin = {\n        id: 'separator',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('separator'),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new SeparatorController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof SeparatorController)) {\n                return null;\n            }\n            return new SeparatorApi(args.controller);\n        },\n    };\n\n    const className$m = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$m(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(opt_initialValue) {\n            var _a, _b;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            const coreObj = {\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new ViewProps(core);\n        }\n        bindClassModifiers(elem) {\n            bindValueMap(this, 'disabled', valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n    }\n\n    const className$l = ClassName('tbi');\n    class TabItemView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$l());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValueMap(config.props, 'selected', (selected) => {\n                if (selected) {\n                    this.element.classList.add(className$l(undefined, 'sel'));\n                }\n                else {\n                    this.element.classList.remove(className$l(undefined, 'sel'));\n                }\n            });\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$l('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$l('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n        }\n    }\n\n    class TabItemController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new TabItemView(doc, {\n                props: config.props,\n                viewProps: config.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class TabPageController {\n        constructor(doc, config) {\n            this.onItemClick_ = this.onItemClick_.bind(this);\n            this.ic_ = new TabItemController(doc, {\n                props: config.itemProps,\n                viewProps: ViewProps.create(),\n            });\n            this.ic_.emitter.on('click', this.onItemClick_);\n            this.cc_ = new RackController(doc, {\n                blade: createBlade(),\n                viewProps: ViewProps.create(),\n            });\n            this.props = config.props;\n            bindValueMap(this.props, 'selected', (selected) => {\n                this.itemController.props.set('selected', selected);\n                this.contentController.viewProps.set('hidden', !selected);\n            });\n        }\n        get itemController() {\n            return this.ic_;\n        }\n        get contentController() {\n            return this.cc_;\n        }\n        onItemClick_() {\n            this.props.set('selected', true);\n        }\n    }\n\n    class TabPageApi {\n        constructor(controller, contentRackApi) {\n            this.controller_ = controller;\n            this.rackApi_ = contentRackApi;\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.itemController.props.set('title', title);\n        }\n        get selected() {\n            return this.controller_.props.get('selected');\n        }\n        set selected(selected) {\n            this.controller_.props.set('selected', selected);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n    }\n\n    class TabApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.emitter_ = new Emitter();\n            this.pageApiMap_ = new Map();\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n            this.controller_.pageSet.emitter.on('add', this.onPageAdd_);\n            this.controller_.pageSet.emitter.on('remove', this.onPageRemove_);\n            this.controller_.pageSet.items.forEach((pc) => {\n                this.setUpPageApi_(pc);\n            });\n        }\n        get pages() {\n            return this.controller_.pageSet.items.map((pc) => {\n                const api = this.pageApiMap_.get(pc);\n                if (!api) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return api;\n            });\n        }\n        addPage(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const pc = new TabPageController(doc, {\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: params.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n            });\n            this.controller_.add(pc, params.index);\n            const api = this.pageApiMap_.get(pc);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n        removePage(index) {\n            this.controller_.remove(index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpPageApi_(pc) {\n            const rackApi = this.rackApi_['apiSet_'].find((api) => api.controller_ === pc.contentController);\n            if (!rackApi) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = new TabPageApi(pc, rackApi);\n            this.pageApiMap_.set(pc, api);\n        }\n        onPageAdd_(ev) {\n            this.setUpPageApi_(ev.item);\n        }\n        onPageRemove_(ev) {\n            const api = this.pageApiMap_.get(ev.item);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.pageApiMap_.delete(ev.item);\n        }\n    }\n\n    const className$k = ClassName('tab');\n    class TabView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$k(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.empty, valueToClassName(this.element, className$k(undefined, 'nop')));\n            const itemsElem = doc.createElement('div');\n            itemsElem.classList.add(className$k('i'));\n            this.element.appendChild(itemsElem);\n            this.itemsElement = itemsElem;\n            const contentsElem = config.contentsElement;\n            contentsElem.classList.add(className$k('c'));\n            this.element.appendChild(contentsElem);\n            this.contentsElement = contentsElem;\n        }\n    }\n\n    class TabController extends RackLikeController {\n        constructor(doc, config) {\n            const cr = new RackController(doc, {\n                blade: config.blade,\n                viewProps: config.viewProps,\n            });\n            const empty = createValue(true);\n            super({\n                blade: config.blade,\n                rackController: cr,\n                view: new TabView(doc, {\n                    contentsElement: cr.view.element,\n                    empty: empty,\n                    viewProps: config.viewProps,\n                }),\n            });\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.onPageSelectedChange_ = this.onPageSelectedChange_.bind(this);\n            this.pageSet_ = new NestedOrderedSet(() => null);\n            this.pageSet_.emitter.on('add', this.onPageAdd_);\n            this.pageSet_.emitter.on('remove', this.onPageRemove_);\n            this.empty_ = empty;\n            this.applyPages_();\n        }\n        get pageSet() {\n            return this.pageSet_;\n        }\n        add(pc, opt_index) {\n            this.pageSet_.add(pc, opt_index !== null && opt_index !== void 0 ? opt_index : this.pageSet_.items.length);\n        }\n        remove(index) {\n            this.pageSet_.remove(this.pageSet_.items[index]);\n        }\n        applyPages_() {\n            this.keepSelection_();\n            this.empty_.rawValue = this.pageSet_.items.length === 0;\n        }\n        onPageAdd_(ev) {\n            const pc = ev.item;\n            insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n            this.rackController.rack.add(pc.contentController, ev.index);\n            pc.props.value('selected').emitter.on('change', this.onPageSelectedChange_);\n            this.applyPages_();\n        }\n        onPageRemove_(ev) {\n            const pc = ev.item;\n            removeElement(pc.itemController.view.element);\n            this.rackController.rack.remove(pc.contentController);\n            pc.props\n                .value('selected')\n                .emitter.off('change', this.onPageSelectedChange_);\n            this.applyPages_();\n        }\n        keepSelection_() {\n            if (this.pageSet_.items.length === 0) {\n                return;\n            }\n            const firstSelIndex = this.pageSet_.items.findIndex((pc) => pc.props.get('selected'));\n            if (firstSelIndex < 0) {\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === 0);\n                });\n            }\n            else {\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === firstSelIndex);\n                });\n            }\n        }\n        onPageSelectedChange_(ev) {\n            if (ev.rawValue) {\n                const index = this.pageSet_.items.findIndex((pc) => pc.props.value('selected') === ev.sender);\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === index);\n                });\n            }\n            else {\n                this.keepSelection_();\n            }\n        }\n    }\n\n    const TabBladePlugin = {\n        id: 'tab',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                pages: p.required.array(p.required.object({ title: p.required.string })),\n                view: p.required.constant('tab'),\n            });\n            if (!result || result.pages.length === 0) {\n                return null;\n            }\n            return { params: result };\n        },\n        controller(args) {\n            const c = new TabController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n            args.params.pages.forEach((p) => {\n                const pc = new TabPageController(args.document, {\n                    itemProps: ValueMap.fromObject({\n                        selected: false,\n                        title: p.title,\n                    }),\n                    props: ValueMap.fromObject({\n                        selected: false,\n                    }),\n                });\n                c.add(pc);\n            });\n            return c;\n        },\n        api(args) {\n            if (!(args.controller instanceof TabController)) {\n                return null;\n            }\n            return new TabApi(args.controller, args.pool);\n        },\n    };\n\n    function createBladeController(plugin, args) {\n        const ac = plugin.accept(args.params);\n        if (!ac) {\n            return null;\n        }\n        const disabled = ParamsParsers.optional.boolean(args.params['disabled']).value;\n        const hidden = ParamsParsers.optional.boolean(args.params['hidden']).value;\n        return plugin.controller({\n            blade: createBlade(),\n            document: args.document,\n            params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: disabled, hidden: hidden })),\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class ListConstraint {\n        constructor(options) {\n            this.options = options;\n        }\n        constrain(value) {\n            const opts = this.options;\n            if (opts.length === 0) {\n                return value;\n            }\n            const matched = opts.filter((item) => {\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        }\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.maxValue = config.max;\n            this.minValue = config.min;\n        }\n        constrain(value) {\n            let result = value;\n            if (!isEmpty(this.minValue)) {\n                result = Math.max(result, this.minValue);\n            }\n            if (!isEmpty(this.maxValue)) {\n                result = Math.min(result, this.maxValue);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step) {\n            this.step = step;\n        }\n        constrain(value) {\n            const r = value < 0\n                ? -Math.round(-value / this.step)\n                : Math.round(value / this.step);\n            return r * this.step;\n        }\n    }\n\n    const className$j = ClassName('lst');\n    class ListView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.props_ = config.props;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$j());\n            config.viewProps.bindClassModifiers(this.element);\n            const selectElem = doc.createElement('select');\n            selectElem.classList.add(className$j('s'));\n            bindValueMap(this.props_, 'options', (opts) => {\n                removeChildElements(selectElem);\n                opts.forEach((item, index) => {\n                    const optionElem = doc.createElement('option');\n                    optionElem.dataset.index = String(index);\n                    optionElem.textContent = item.text;\n                    optionElem.value = String(item.value);\n                    selectElem.appendChild(optionElem);\n                });\n            });\n            config.viewProps.bindDisabled(selectElem);\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(className$j('m'));\n            markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            this.element.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value_ = config.value;\n            this.update_();\n        }\n        update_() {\n            this.selectElement.value = String(this.value_.rawValue);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ListController {\n        constructor(doc, config) {\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ListView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\n        }\n        onSelectChange_(e) {\n            const selectElem = forceCast(e.currentTarget);\n            const optElem = selectElem.selectedOptions.item(0);\n            if (!optElem) {\n                return;\n            }\n            const itemIndex = Number(optElem.dataset.index);\n            this.value.rawValue = this.props.get('options')[itemIndex].value;\n        }\n    }\n\n    const className$i = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$i());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$i(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$h = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$h());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$h('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    function boolToString(value) {\n        return String(value);\n    }\n    function boolFromUnknown(value) {\n        if (value === 'false') {\n            return false;\n        }\n        return !!value;\n    }\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        return (parseLiteral(text, cursor) || parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function numberToString(value) {\n        return String(value);\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    function formatString(value) {\n        return value;\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset$1(ev, elem) {\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((win && win.scrollX) || 0) + rect.left),\n            y: ev.pageY - (((win && win.scrollY) || 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_, {\n                passive: false,\n            });\n            element.addEventListener('touchmove', this.onTouchMove_, {\n                passive: true,\n            });\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return ((value % max) + max) % max;\n    }\n\n    const className$g = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g(), className$g(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$g(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$g('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$g());\n            this.inputElement.classList.add(className$g('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$g('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$g('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$g('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$g('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$g(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$g(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.originRawValue_ + dx * this.props.get('draggingScale');\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    const className$f = ClassName('sld');\n    class SliderView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$f());\n            config.viewProps.bindClassModifiers(this.element);\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$f('t'));\n            config.viewProps.bindTabIndex(trackElem);\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$f('k'));\n            this.trackElement.appendChild(knobElem);\n            this.knobElement = knobElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('minValue'), this.props_.get('maxValue'), 0, 100), 0, 100);\n            this.knobElement.style.width = `${p}%`;\n        }\n        onChange_() {\n            this.update_();\n        }\n    }\n\n    class SliderController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.props = config.props;\n            this.view = new SliderView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.trackElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n            this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('minValue'), this.props.get('maxValue')), opts);\n        }\n        onPointerDownOrMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$e = ClassName('sldtxt');\n    class SliderTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$e('s'));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$e('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    class SliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sliderC_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                props: config.sliderProps,\n                value: config.value,\n                viewProps: this.viewProps,\n            });\n            this.textC_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                parser: config.parser,\n                props: config.textProps,\n                value: config.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get sliderController() {\n            return this.sliderC_;\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function parseListOptions(value) {\n        const p = ParamsParsers;\n        if (Array.isArray(value)) {\n            return p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            }))(value).value;\n        }\n        if (typeof value === 'object') {\n            return p.required.raw(value)\n                .value;\n        }\n        return undefined;\n    }\n    function parsePickerLayout(value) {\n        if (value === 'inline' || value === 'popup') {\n            return value;\n        }\n        return undefined;\n    }\n    function parsePointDimensionParams(value) {\n        const p = ParamsParsers;\n        return p.required.object({\n            max: p.optional.number,\n            min: p.optional.number,\n            step: p.optional.number,\n        })(value).value;\n    }\n    function normalizeListOptions(options) {\n        if (Array.isArray(options)) {\n            return options;\n        }\n        const items = [];\n        Object.keys(options).forEach((text) => {\n            items.push({ text: text, value: options[text] });\n        });\n        return items;\n    }\n    function createListConstraint(options) {\n        return !isEmpty(options)\n            ? new ListConstraint(normalizeListOptions(forceCast(options)))\n            : null;\n    }\n    function findListItems(constraint) {\n        const c = constraint\n            ? findConstraint(constraint, ListConstraint)\n            : null;\n        if (!c) {\n            return null;\n        }\n        return c.options;\n    }\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    const className$d = ClassName('ckb');\n    class CheckboxView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className$d('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$d('i'));\n            inputElem.type = 'checkbox';\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.viewProps.bindDisabled(this.inputElement);\n            const wrapperElem = doc.createElement('div');\n            wrapperElem.classList.add(className$d('w'));\n            labelElem.appendChild(wrapperElem);\n            const markElem = createSvgIconElement(doc, 'check');\n            wrapperElem.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            this.inputElement.checked = this.value.rawValue;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class CheckboxController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n        }\n    }\n\n    function createConstraint$5(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const BooleanInputPlugin = {\n        id: 'input-bool',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n            constraint: (args) => createConstraint$5(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new CheckboxController(doc, {\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className$c = ClassName('col');\n    class ColorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.foldable.bindExpandedClass(this.element, className$c(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$c(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$c('h'));\n            this.element.appendChild(headElem);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$c('s'));\n            headElem.appendChild(swatchElem);\n            this.swatchElement = swatchElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$c('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$c('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    function rgbToHsl(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const c = cmax - cmin;\n        let h = 0;\n        let s = 0;\n        const l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = c / (1 - Math.abs(cmax + cmin - 1));\n            if (rp === cmax) {\n                h = (gp - bp) / c;\n            }\n            else if (gp === cmax) {\n                h = 2 + (bp - rp) / c;\n            }\n            else {\n                h = 4 + (rp - gp) / c;\n            }\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [h * 360, s * 100, l * 100];\n    }\n    function hslToRgb(h, s, l) {\n        const hp = ((h % 360) + 360) % 360;\n        const sp = constrainRange(s / 100, 0, 1);\n        const lp = constrainRange(l / 100, 0, 1);\n        const c = (1 - Math.abs(2 * lp - 1)) * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = lp - c / 2;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function rgbToHsv(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const d = cmax - cmin;\n        let h;\n        if (d === 0) {\n            h = 0;\n        }\n        else if (cmax === rp) {\n            h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n        }\n        else if (cmax === gp) {\n            h = 60 * ((bp - rp) / d + 2);\n        }\n        else {\n            h = 60 * ((rp - gp) / d + 4);\n        }\n        const s = cmax === 0 ? 0 : d / cmax;\n        const v = cmax;\n        return [h, s * 100, v * 100];\n    }\n    function hsvToRgb(h, s, v) {\n        const hp = loopRange(h, 360);\n        const sp = constrainRange(s / 100, 0, 1);\n        const vp = constrainRange(v / 100, 0, 1);\n        const c = vp * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = vp - c;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function hslToHsv(h, s, l) {\n        const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n        return [\n            h,\n            sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n            l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n        ];\n    }\n    function hsvToHsl(h, s, v) {\n        const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n        return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n    }\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n    function appendAlphaComponent(comps, alpha) {\n        return [comps[0], comps[1], comps[2], alpha];\n    }\n    const MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: (h, s, l) => [h, s, l],\n            hsv: hslToHsv,\n            rgb: hslToRgb,\n        },\n        hsv: {\n            hsl: hsvToHsl,\n            hsv: (h, s, v) => [h, s, v],\n            rgb: hsvToRgb,\n        },\n        rgb: {\n            hsl: rgbToHsl,\n            hsv: rgbToHsv,\n            rgb: (r, g, b) => [r, g, b],\n        },\n    };\n    function convertColorMode(components, fromMode, toMode) {\n        return MODE_CONVERTER_MAP[fromMode][toMode](...components);\n    }\n\n    const CONSTRAINT_MAP = {\n        hsl: (comps) => {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        hsv: (comps) => {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        rgb: (comps) => {\n            var _a;\n            return [\n                constrainRange(comps[0], 0, 255),\n                constrainRange(comps[1], 0, 255),\n                constrainRange(comps[2], 0, 255),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n    };\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== 'object' || isEmpty(obj)) {\n            return false;\n        }\n        return key in obj && typeof obj[key] === 'number';\n    }\n    class Color {\n        constructor(comps, mode) {\n            this.mode_ = mode;\n            this.comps_ = CONSTRAINT_MAP[mode](comps);\n        }\n        static black() {\n            return new Color([0, 0, 0], 'rgb');\n        }\n        static fromObject(obj) {\n            const comps = 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n            return new Color(comps, 'rgb');\n        }\n        static toRgbaObject(color) {\n            return color.toRgbaObject();\n        }\n        static isRgbColorObject(obj) {\n            return (isRgbColorComponent(obj, 'r') &&\n                isRgbColorComponent(obj, 'g') &&\n                isRgbColorComponent(obj, 'b'));\n        }\n        static isRgbaColorObject(obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n        }\n        static isColorObject(obj) {\n            return this.isRgbColorObject(obj);\n        }\n        static equals(v1, v2) {\n            if (v1.mode_ !== v2.mode_) {\n                return false;\n            }\n            const comps1 = v1.comps_;\n            const comps2 = v2.comps_;\n            for (let i = 0; i < comps1.length; i++) {\n                if (comps1[i] !== comps2[i]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        get mode() {\n            return this.mode_;\n        }\n        getComponents(opt_mode) {\n            return appendAlphaComponent(convertColorMode(removeAlphaComponent(this.comps_), this.mode_, opt_mode || this.mode_), this.comps_[3]);\n        }\n        toRgbaObject() {\n            const rgbComps = this.getComponents('rgb');\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3],\n            };\n        }\n    }\n\n    const className$b = ClassName('colp');\n    class ColorPickerView {\n        constructor(doc, config) {\n            this.alphaViews_ = null;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            const hsvElem = doc.createElement('div');\n            hsvElem.classList.add(className$b('hsv'));\n            const svElem = doc.createElement('div');\n            svElem.classList.add(className$b('sv'));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            const hElem = doc.createElement('div');\n            hElem.classList.add(className$b('h'));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            const rgbElem = doc.createElement('div');\n            rgbElem.classList.add(className$b('rgb'));\n            this.textView_ = config.textView;\n            rgbElem.appendChild(this.textView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text,\n                };\n                const aElem = doc.createElement('div');\n                aElem.classList.add(className$b('a'));\n                const apElem = doc.createElement('div');\n                apElem.classList.add(className$b('ap'));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                const atElem = doc.createElement('div');\n                atElem.classList.add(className$b('at'));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n        }\n        get allFocusableElements() {\n            const elems = [\n                this.svPaletteView_.element,\n                this.hPaletteView_.element,\n                this.textView_.modeSelectElement,\n                ...this.textView_.textViews.map((v) => v.inputElement),\n            ];\n            if (this.alphaViews_) {\n                elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n            }\n            return elems;\n        }\n    }\n\n    function parseColorInputParams(params) {\n        const p = ParamsParsers;\n        return parseParams(params, {\n            alpha: p.optional.boolean,\n            expanded: p.optional.boolean,\n            picker: p.optional.custom(parsePickerLayout),\n        });\n    }\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n\n    function parseCssNumberOrPercentage(text, maxValue) {\n        const m = text.match(/^(.+)%$/);\n        if (!m) {\n            return Math.min(parseFloat(text), maxValue);\n        }\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    const ANGLE_TO_DEG_MAP = {\n        deg: (angle) => angle,\n        grad: (angle) => (angle * 360) / 400,\n        rad: (angle) => (angle * 360) / (2 * Math.PI),\n        turn: (angle) => angle * 360,\n    };\n    function parseCssNumberOrAngle(text) {\n        const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) {\n            return parseFloat(text);\n        }\n        const angle = parseFloat(m[1]);\n        const unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    const NOTATION_TO_PARSER_MAP = {\n        'func.rgb': (text) => {\n            const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.rgba': (text) => {\n            const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.hsl': (text) => {\n            const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'func.hsla': (text) => {\n            const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'hex.rgb': (text) => {\n            const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1] + mRgb[1], 16),\n                    parseInt(mRgb[2] + mRgb[2], 16),\n                    parseInt(mRgb[3] + mRgb[3], 16),\n                ], 'rgb');\n            }\n            const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1], 16),\n                    parseInt(mRrggbb[2], 16),\n                    parseInt(mRrggbb[3], 16),\n                ], 'rgb');\n            }\n            return null;\n        },\n        'hex.rgba': (text) => {\n            const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1] + mRgb[1], 16),\n                    parseInt(mRgb[2] + mRgb[2], 16),\n                    parseInt(mRgb[3] + mRgb[3], 16),\n                    mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1], 16),\n                    parseInt(mRrggbb[2], 16),\n                    parseInt(mRrggbb[3], 16),\n                    mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            return null;\n        },\n    };\n    function getColorNotation(text) {\n        const notations = Object.keys(NOTATION_TO_PARSER_MAP);\n        return notations.reduce((result, notation) => {\n            if (result) {\n                return result;\n            }\n            const subparser = NOTATION_TO_PARSER_MAP[notation];\n            return subparser(text) ? notation : null;\n        }, null);\n    }\n    const CompositeColorParser = (text) => {\n        const notation = getColorNotation(text);\n        return notation ? NOTATION_TO_PARSER_MAP[notation](text) : null;\n    };\n    function hasAlphaComponent(notation) {\n        return (notation === 'func.hsla' ||\n            notation === 'func.rgba' ||\n            notation === 'hex.rgba');\n    }\n    function colorFromString(value) {\n        if (typeof value === 'string') {\n            const cv = CompositeColorParser(value);\n            if (cv) {\n                return cv;\n            }\n        }\n        return Color.black();\n    }\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = '#') {\n        const hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = '#') {\n        const rgbaComps = value.getComponents('rgb');\n        const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value) {\n        const formatter = createNumberFormatter(0);\n        const comps = removeAlphaComponent(value.getComponents('rgb')).map((comp) => formatter(comp));\n        return `rgb(${comps.join(', ')})`;\n    }\n    function colorToFunctionalRgbaString(value) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(0);\n        const comps = value.getComponents('rgb').map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n        return `hsl(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        const comps = value\n            .getComponents('hsl')\n            .map((comp, index) => formatters[index](comp));\n        return `hsla(${comps.join(', ')})`;\n    }\n    const NOTATION_TO_STRINGIFIER_MAP = {\n        'func.hsl': colorToFunctionalHslString,\n        'func.hsla': colorToFunctionalHslaString,\n        'func.rgb': colorToFunctionalRgbString,\n        'func.rgba': colorToFunctionalRgbaString,\n        'hex.rgb': colorToHexRgbString,\n        'hex.rgba': colorToHexRgbaString,\n    };\n    function getColorStringifier(notation) {\n        return NOTATION_TO_STRINGIFIER_MAP[notation];\n    }\n\n    const className$a = ClassName('apl');\n    class APaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a());\n            config.viewProps.bindTabIndex(this.element);\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$a('b'));\n            this.element.appendChild(barElem);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$a('c'));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$a('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$a('p'));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const rgbaComps = c.getComponents('rgb');\n            const leftColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n            const rightColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n            const gradientComps = [\n                'to right',\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor),\n            ];\n            this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class APaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const alpha = d.point.x / d.bounds.width;\n            const c = this.value.rawValue;\n            const [h, s, v] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, alpha], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, a + step], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$9 = ClassName('coltxt');\n    function createModeSelectElement(doc) {\n        const selectElem = doc.createElement('select');\n        const items = [\n            { text: 'RGB', value: 'rgb' },\n            { text: 'HSL', value: 'hsl' },\n            { text: 'HSV', value: 'hsv' },\n        ];\n        selectElem.appendChild(items.reduce((frag, item) => {\n            const optElem = doc.createElement('option');\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    class ColorTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            const modeElem = doc.createElement('div');\n            modeElem.classList.add(className$9('m'));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$9('ms'));\n            modeElem.appendChild(this.modeSelectElement);\n            const modeMarkerElem = doc.createElement('div');\n            modeMarkerElem.classList.add(className$9('mm'));\n            modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            const textsElem = doc.createElement('div');\n            textsElem.classList.add(className$9('w'));\n            this.element.appendChild(textsElem);\n            this.textsElem_ = textsElem;\n            this.textViews_ = config.textViews;\n            this.applyTextViews_();\n            bindValue(config.colorMode, (mode) => {\n                this.modeElem_.value = mode;\n            });\n        }\n        get modeSelectElement() {\n            return this.modeElem_;\n        }\n        get textViews() {\n            return this.textViews_;\n        }\n        set textViews(textViews) {\n            this.textViews_ = textViews;\n            this.applyTextViews_();\n        }\n        applyTextViews_() {\n            removeChildElements(this.textsElem_);\n            const doc = this.element.ownerDocument;\n            this.textViews_.forEach((v) => {\n                const compElem = doc.createElement('div');\n                compElem.classList.add(className$9('c'));\n                compElem.appendChild(v.element);\n                this.textsElem_.appendChild(compElem);\n            });\n        }\n    }\n\n    const FORMATTER = createNumberFormatter(0);\n    const MODE_TO_CONSTRAINT_MAP = {\n        rgb: () => {\n            return new RangeConstraint({ min: 0, max: 255 });\n        },\n        hsl: (index) => {\n            return index === 0\n                ? new RangeConstraint({ min: 0, max: 360 })\n                : new RangeConstraint({ min: 0, max: 100 });\n        },\n        hsv: (index) => {\n            return index === 0\n                ? new RangeConstraint({ min: 0, max: 360 })\n                : new RangeConstraint({ min: 0, max: 100 });\n        },\n    };\n    function createComponentController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n            baseStep: getBaseStepForColor(false),\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                draggingScale: 1,\n                formatter: FORMATTER,\n            }),\n            value: createValue(0, {\n                constraint: MODE_TO_CONSTRAINT_MAP[config.colorMode](index),\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class ColorTextController {\n        constructor(doc, config) {\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.colorMode = createValue(this.value.rawValue.mode);\n            this.ccs_ = this.createComponentControllers_(doc);\n            this.view = new ColorTextView(doc, {\n                colorMode: this.colorMode,\n                textViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n            });\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n        }\n        createComponentControllers_(doc) {\n            const cc = {\n                colorMode: this.colorMode.rawValue,\n                parser: this.parser_,\n                viewProps: this.viewProps,\n            };\n            const ccs = [\n                createComponentController(doc, cc, 0),\n                createComponentController(doc, cc, 1),\n                createComponentController(doc, cc, 2),\n            ];\n            ccs.forEach((cs, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: cs.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents(this.colorMode.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const pickedMode = this.colorMode.rawValue;\n                        const comps = p.rawValue.getComponents(pickedMode);\n                        comps[index] = s.rawValue;\n                        return new Color(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode);\n                    },\n                });\n            });\n            return ccs;\n        }\n        onModeSelectChange_(ev) {\n            const selectElem = ev.currentTarget;\n            this.colorMode.rawValue = selectElem.value;\n            this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n            this.view.textViews = [\n                this.ccs_[0].view,\n                this.ccs_[1].view,\n                this.ccs_[2].view,\n            ];\n        }\n    }\n\n    const className$8 = ClassName('hpl');\n    class HPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindTabIndex(this.element);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$8('c'));\n            this.element.appendChild(colorElem);\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$8('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const [h] = c.getComponents('hsv');\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([h, 100, 100], 'hsv'));\n            const left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class HPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const hue = mapRange(d.point.x, 0, d.bounds.width, 0, 360);\n            const c = this.value.rawValue;\n            const [, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([hue, s, v, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h + step, s, v, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$7 = ClassName('svp');\n    const CANVAS_RESOL = 64;\n    class SvPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindTabIndex(this.element);\n            const canvasElem = doc.createElement('canvas');\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$7('c'));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$7('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const hsvComps = c.getComponents('hsv');\n            const width = this.canvasElement.width;\n            const height = this.canvasElement.height;\n            const imgData = ctx.getImageData(0, 0, width, height);\n            const data = imgData.data;\n            for (let iy = 0; iy < height; iy++) {\n                for (let ix = 0; ix < width; ix++) {\n                    const s = mapRange(ix, 0, width, 0, 100);\n                    const v = mapRange(iy, 0, height, 100, 0);\n                    const rgbComps = hsvToRgb(hsvComps[0], s, v);\n                    const i = (iy * width + ix) * 4;\n                    data[i] = rgbComps[0];\n                    data[i + 1] = rgbComps[1];\n                    data[i + 2] = rgbComps[2];\n                    data[i + 3] = 255;\n                }\n            }\n            ctx.putImageData(imgData, 0, 0);\n            const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n            const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = `${top}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class SvPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n            const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n            const [h, , , a] = this.value.rawValue.getComponents('hsv');\n            this.value.setRawValue(new Color([h, saturation, value, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(new Color([h, s + ds, v + dv, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class ColorPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.hPaletteC_ = new HPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.svPaletteC_ = new SvPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.alphaIcs_ = config.supportsAlpha\n                ? {\n                    palette: new APaletteController(doc, {\n                        value: this.value,\n                        viewProps: this.viewProps,\n                    }),\n                    text: new NumberTextController(doc, {\n                        parser: parseNumber,\n                        baseStep: 0.1,\n                        props: ValueMap.fromObject({\n                            draggingScale: 0.01,\n                            formatter: createNumberFormatter(2),\n                        }),\n                        value: createValue(0, {\n                            constraint: new RangeConstraint({ min: 0, max: 1 }),\n                        }),\n                        viewProps: this.viewProps,\n                    }),\n                }\n                : null;\n            if (this.alphaIcs_) {\n                connectValues({\n                    primary: this.value,\n                    secondary: this.alphaIcs_.text.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents()[3];\n                    },\n                    backward: (p, s) => {\n                        const comps = p.rawValue.getComponents();\n                        comps[3] = s.rawValue;\n                        return new Color(comps, p.rawValue.mode);\n                    },\n                });\n            }\n            this.textC_ = new ColorTextController(doc, {\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_\n                    ? {\n                        palette: this.alphaIcs_.palette.view,\n                        text: this.alphaIcs_.text.view,\n                    }\n                    : null,\n                hPaletteView: this.hPaletteC_.view,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    const className$6 = ClassName('colsw');\n    class ColorSwatchView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$6('sw'));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$6('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            this.update_();\n        }\n        update_() {\n            const value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ColorSwatchController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ColorSwatchView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class ColorController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.swatchC_ = new ColorSwatchController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            const buttonElem = this.swatchC_.view.buttonElement;\n            buttonElem.addEventListener('blur', this.onButtonBlur_);\n            buttonElem.addEventListener('click', this.onButtonClick_);\n            this.textC_ = new TextController(doc, {\n                parser: config.parser,\n                props: ValueMap.fromObject({\n                    formatter: config.formatter,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n            });\n            this.view.swatchElement.appendChild(this.swatchC_.view.element);\n            this.view.textElement.appendChild(this.textC_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new ColorPickerController(doc, {\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(pickerC.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        get textController() {\n            return this.textC_;\n        }\n        onButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.swatchC_.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.swatchC_.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function colorFromObject(value) {\n        if (Color.isColorObject(value)) {\n            return Color.fromObject(value);\n        }\n        return Color.black();\n    }\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n            return (result << 8) | (Math.floor(comp) & 0xff);\n        }, 0);\n    }\n    function colorToRgbaNumber(value) {\n        return (value.getComponents('rgb').reduce((result, comp, index) => {\n            const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return (result << 8) | hex;\n        }, 0) >>> 0);\n    }\n    function numberToRgbColor(num) {\n        return new Color([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n    }\n    function numberToRgbaColor(num) {\n        return new Color([\n            (num >> 24) & 0xff,\n            (num >> 16) & 0xff,\n            (num >> 8) & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1),\n        ], 'rgb');\n    }\n    function colorFromRgbNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbColor(value);\n    }\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbaColor(value);\n    }\n\n    function createColorStringWriter(notation) {\n        const stringify = getColorStringifier(notation);\n        return (target, value) => {\n            writePrimitive(target, stringify(value));\n        };\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return (target, value) => {\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value) {\n        const obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n        target.writeProperty('a', obj.a);\n    }\n    function writeRgbColorObject(target, value) {\n        const obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha) {\n        return supportsAlpha ? writeRgbaColorObject : writeRgbColorObject;\n    }\n\n    function shouldSupportAlpha$1(inputParams) {\n        return 'alpha' in inputParams && inputParams.alpha === true;\n    }\n    function createFormatter$1(supportsAlpha) {\n        return supportsAlpha\n            ? (v) => colorToHexRgbaString(v, '0x')\n            : (v) => colorToHexRgbString(v, '0x');\n    }\n    const NumberColorInputPlugin = {\n        id: 'input-color-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            if (!('view' in params)) {\n                return null;\n            }\n            if (params.view !== 'color') {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => {\n                return shouldSupportAlpha$1(args.params)\n                    ? colorFromRgbaNumber\n                    : colorFromRgbNumber;\n            },\n            equals: Color.equals,\n            writer: (args) => {\n                return createColorNumberWriter(shouldSupportAlpha$1(args.params));\n            },\n        },\n        controller: (args) => {\n            const supportsAlpha = shouldSupportAlpha$1(args.params);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createFormatter$1(supportsAlpha),\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function shouldSupportAlpha(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    const ObjectColorInputPlugin = {\n        id: 'input-color-object',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Color.isColorObject(value)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => colorFromObject,\n            equals: Color.equals,\n            writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue)),\n        },\n        controller: (args) => {\n            const supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            const formatter = supportsAlpha\n                ? colorToHexRgbaString\n                : colorToHexRgbString;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: formatter,\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const StringColorInputPlugin = {\n        id: 'input-color-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            if ('view' in params && params.view === 'text') {\n                return null;\n            }\n            const notation = getColorNotation(value);\n            if (!notation) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => colorFromString,\n            equals: Color.equals,\n            writer: (args) => {\n                const notation = getColorNotation(args.initialValue);\n                if (!notation) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return createColorStringWriter(notation);\n            },\n        },\n        controller: (args) => {\n            const notation = getColorNotation(args.initialValue);\n            if (!notation) {\n                throw TpError.shouldNeverHappen();\n            }\n            const stringifier = getColorStringifier(notation);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: stringifier,\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: hasAlphaComponent(notation),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$5 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$5('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (('max' in params && !isEmpty(params.max)) ||\n            ('min' in params && !isEmpty(params.min))) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n    function createConstraint$4(params) {\n        const constraints = [];\n        const sc = createStepConstraint(params);\n        if (sc) {\n            constraints.push(sc);\n        }\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function findRange(constraint) {\n        const c = constraint ? findConstraint(constraint, RangeConstraint) : null;\n        if (!c) {\n            return [undefined, undefined];\n        }\n        return [c.minValue, c.maxValue];\n    }\n    function estimateSuitableRange(constraint) {\n        const [min, max] = findRange(constraint);\n        return [min !== null && min !== void 0 ? min : 0, max !== null && max !== void 0 ? max : 100];\n    }\n    const NumberInputPlugin = {\n        id: 'input-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                options: p.optional.custom(parseListOptions),\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            constraint: (args) => createConstraint$4(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a, _b;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            const formatter = (_b = ('format' in args.params ? args.params.format : undefined)) !== null && _b !== void 0 ? _b : createNumberFormatter(getSuitableDecimalDigits(c, value.rawValue));\n            if (c && findConstraint(c, RangeConstraint)) {\n                const [min, max] = estimateSuitableRange(c);\n                return new SliderTextController(args.document, {\n                    baseStep: getBaseStep(c),\n                    parser: parseNumber,\n                    sliderProps: ValueMap.fromObject({\n                        maxValue: max,\n                        minValue: min,\n                    }),\n                    textProps: ValueMap.fromObject({\n                        draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                        formatter: formatter,\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new NumberTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                props: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point2d {\n        constructor(x = 0, y = 0) {\n            this.x = x;\n            this.y = y;\n        }\n        getComponents() {\n            return [this.x, this.y];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            if (typeof x !== 'number' || typeof y !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n            };\n        }\n    }\n    const Point2dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point2d(...comps),\n    };\n\n    const className$4 = ClassName('p2d');\n    class Point2dView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.expanded, valueToClassName(this.element, className$4(undefined, 'expanded')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$4('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$4('b'));\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n            config.viewProps.bindDisabled(buttonElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$4('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$4('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$3 = ClassName('p2dp');\n    class Point2dPickerView {\n        constructor(doc, config) {\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            if (config.layout === 'popup') {\n                this.element.classList.add(className$3(undefined, 'p'));\n            }\n            const padElem = doc.createElement('div');\n            padElem.classList.add(className$3('p'));\n            config.viewProps.bindTabIndex(padElem);\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$3('g'));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n            xAxisElem.classList.add(className$3('ax'));\n            xAxisElem.setAttributeNS(null, 'x1', '0');\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\n            this.svgElem_.appendChild(xAxisElem);\n            const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n            yAxisElem.classList.add(className$3('ax'));\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\n            yAxisElem.setAttributeNS(null, 'y1', '0');\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\n            this.svgElem_.appendChild(yAxisElem);\n            const lineElem = doc.createElementNS(SVG_NS, 'line');\n            lineElem.classList.add(className$3('l'));\n            lineElem.setAttributeNS(null, 'x1', '50%');\n            lineElem.setAttributeNS(null, 'y1', '50%');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$3('m'));\n            this.padElement.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        get allFocusableElements() {\n            return [this.padElement];\n        }\n        update_() {\n            const [x, y] = this.value.rawValue.getComponents();\n            const max = this.maxValue_;\n            const px = mapRange(x, -max, +max, 0, 100);\n            const py = mapRange(y, -max, +max, 0, 100);\n            const ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n            this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n            this.markerElem_.style.left = `${px}%`;\n            this.markerElem_.style.top = `${ipy}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n        onFoldableChange_() {\n            this.update_();\n        }\n    }\n\n    function computeOffset(ev, baseSteps, invertsY) {\n        return [\n            getStepForKey(baseSteps[0], getHorizontalStepKeys(ev)),\n            getStepForKey(baseSteps[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n        ];\n    }\n    class Point2dPickerController {\n        constructor(doc, config) {\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPickerView(doc, {\n                invertsY: this.invertsY_,\n                layout: config.layout,\n                maxValue: this.maxValue_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.padElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n            this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const max = this.maxValue_;\n            const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n            const py = mapRange(this.invertsY_ ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n            this.value.setRawValue(new Point2d(px, py), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPadKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPadKeyUp_(ev) {\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class Point2dController {\n        constructor(doc, config) {\n            var _a, _b;\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const padC = new Point2dPickerController(doc, {\n                baseSteps: [config.axes[0].baseStep, config.axes[1].baseStep],\n                invertsY: config.invertsY,\n                layout: config.pickerLayout,\n                maxValue: config.maxValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            padC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = padC;\n            this.textC_ = new PointNdTextController(doc, {\n                assembly: Point2dAssembly,\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new Point2dView(doc, {\n                expanded: this.foldable_.value('expanded'),\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.textC_.view.element);\n            (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n            (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onPadButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onPadButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value)\n            ? new Point2d(value.x, value.y)\n            : new Point2d();\n    }\n    function writePoint2d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n    }\n\n    function createDimensionConstraint$2(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$3(params) {\n        return new PointNdConstraint({\n            assembly: Point2dAssembly,\n            components: [\n                createDimensionConstraint$2('x' in params ? params.x : undefined),\n                createDimensionConstraint$2('y' in params ? params.y : undefined),\n            ],\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        const rc = constraint && findConstraint(constraint, RangeConstraint);\n        if (rc) {\n            return Math.max(Math.abs(rc.minValue || 0), Math.abs(rc.maxValue || 0));\n        }\n        const step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    function getSuitableMaxValue(initialValue, constraint) {\n        const xc = constraint instanceof PointNdConstraint\n            ? constraint.components[0]\n            : undefined;\n        const yc = constraint instanceof PointNdConstraint\n            ? constraint.components[1]\n            : undefined;\n        const xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        const yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createAxis$2(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    function shouldInvertY(params) {\n        if (!('y' in params)) {\n            return false;\n        }\n        const yParams = params.y;\n        if (!yParams) {\n            return false;\n        }\n        return 'inverted' in yParams ? !!yParams.inverted : false;\n    }\n    const Point2dInputPlugin = {\n        id: 'input-point2d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point2d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                expanded: p.optional.boolean,\n                picker: p.optional.custom(parsePickerLayout),\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.object({\n                    inverted: p.optional.boolean,\n                    max: p.optional.number,\n                    min: p.optional.number,\n                    step: p.optional.number,\n                }),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point2dFromUnknown,\n            constraint: (args) => createConstraint$3(args.params),\n            equals: Point2d.equals,\n            writer: (_args) => writePoint2d,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new Point2dController(doc, {\n                axes: [\n                    createAxis$2(value.rawValue.x, c.components[0]),\n                    createAxis$2(value.rawValue.y, c.components[1]),\n                ],\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                invertsY: shouldInvertY(args.params),\n                maxValue: getSuitableMaxValue(value.rawValue, c),\n                parser: parseNumber,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point3d {\n        constructor(x = 0, y = 0, z = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n            };\n        }\n    }\n    const Point3dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point3d(...comps),\n    };\n\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value)\n            ? new Point3d(value.x, value.y, value.z)\n            : new Point3d();\n    }\n    function writePoint3d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n    }\n\n    function createDimensionConstraint$1(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$2(params) {\n        return new PointNdConstraint({\n            assembly: Point3dAssembly,\n            components: [\n                createDimensionConstraint$1('x' in params ? params.x : undefined),\n                createDimensionConstraint$1('y' in params ? params.y : undefined),\n                createDimensionConstraint$1('z' in params ? params.z : undefined),\n            ],\n        });\n    }\n    function createAxis$1(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point3dInputPlugin = {\n        id: 'input-point3d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point3d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point3dFromUnknown,\n            constraint: (args) => createConstraint$2(args.params),\n            equals: Point3d.equals,\n            writer: (_args) => writePoint3d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point3dAssembly,\n                axes: [\n                    createAxis$1(value.rawValue.x, c.components[0]),\n                    createAxis$1(value.rawValue.y, c.components[1]),\n                    createAxis$1(value.rawValue.z, c.components[2]),\n                ],\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point4d {\n        constructor(x = 0, y = 0, z = 0, w = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            this.w = w;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z, this.w];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            const w = obj.w;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number' ||\n                typeof w !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n                w: this.w,\n            };\n        }\n    }\n    const Point4dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point4d(...comps),\n    };\n\n    function point4dFromUnknown(value) {\n        return Point4d.isObject(value)\n            ? new Point4d(value.x, value.y, value.z, value.w)\n            : new Point4d();\n    }\n    function writePoint4d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n        target.writeProperty('w', value.w);\n    }\n\n    function createDimensionConstraint(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$1(params) {\n        return new PointNdConstraint({\n            assembly: Point4dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined),\n                createDimensionConstraint('y' in params ? params.y : undefined),\n                createDimensionConstraint('z' in params ? params.z : undefined),\n                createDimensionConstraint('w' in params ? params.w : undefined),\n            ],\n        });\n    }\n    function createAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point4dInputPlugin = {\n        id: 'input-point4d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point4d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n                w: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point4dFromUnknown,\n            constraint: (args) => createConstraint$1(args.params),\n            equals: Point4d.equals,\n            writer: (_args) => writePoint4d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point4dAssembly,\n                axes: value.rawValue\n                    .getComponents()\n                    .map((comp, index) => createAxis(comp, c.components[index])),\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function createConstraint(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const StringInputPlugin = {\n        id: 'input-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n            constraint: (args) => createConstraint(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new TextController(doc, {\n                parser: (v) => v,\n                props: ValueMap.fromObject({\n                    formatter: formatString,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    const className$2 = ClassName('mll');\n    class MultiLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            config.viewProps.bindClassModifiers(this.element);\n            const textareaElem = doc.createElement('textarea');\n            textareaElem.classList.add(className$2('i'));\n            textareaElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            textareaElem.readOnly = true;\n            config.viewProps.bindDisabled(textareaElem);\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const elem = this.textareaElem_;\n            const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            const lines = [];\n            this.value.rawValue.forEach((value) => {\n                if (value !== undefined) {\n                    lines.push(this.formatter_(value));\n                }\n            });\n            elem.textContent = lines.join('\\n');\n            if (shouldScroll) {\n                elem.scrollTop = elem.scrollHeight;\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class MultiLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$1 = ClassName('sgl');\n    class SingleLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$1('i'));\n            inputElem.readOnly = true;\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const values = this.value.rawValue;\n            const lastValue = values[values.length - 1];\n            this.inputElement.value =\n                lastValue !== undefined ? this.formatter_(lastValue) : '';\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class SingleLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const BooleanMonitorPlugin = {\n        id: 'monitor-bool',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            if (args.value.rawValue.length === 1) {\n                return new SingleLogController(args.document, {\n                    formatter: BooleanFormatter,\n                    value: args.value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class GraphCursor {\n        constructor() {\n            this.emitter = new Emitter();\n            this.index_ = -1;\n        }\n        get index() {\n            return this.index_;\n        }\n        set index(index) {\n            const changed = this.index_ !== index;\n            if (changed) {\n                this.index_ = index;\n                this.emitter.emit('change', {\n                    index: index,\n                    sender: this,\n                });\n            }\n        }\n    }\n\n    const className = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.minValue_ = config.minValue;\n            this.maxValue_ = config.maxValue;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.minValue_;\n            const max = this.maxValue_;\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.index];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.index, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className('t', 'a'))) {\n                tooltipElem.classList.add(className('t', 'a'), className('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = new GraphCursor();\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.index = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.index = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.index = -1;\n                return;\n            }\n            this.cursor_.index = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.index = -1;\n        }\n    }\n\n    function createFormatter(params) {\n        return 'format' in params && !isEmpty(params.format)\n            ? params.format\n            : createNumberFormatter(2);\n    }\n    function createTextMonitor(args) {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: createFormatter(args.params),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function createGraphMonitor(args) {\n        var _a, _b, _c;\n        return new GraphLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            maxValue: (_b = ('max' in args.params ? args.params.max : null)) !== null && _b !== void 0 ? _b : 100,\n            minValue: (_c = ('min' in args.params ? args.params.min : null)) !== null && _c !== void 0 ? _c : 0,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function shouldShowGraph(params) {\n        return 'view' in params && params.view === 'graph';\n    }\n    const NumberMonitorPlugin = {\n        id: 'monitor-number',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n                view: p.optional.string,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n            reader: (_args) => numberFromUnknown,\n        },\n        controller: (args) => {\n            if (shouldShowGraph(args.params)) {\n                return createGraphMonitor(args);\n            }\n            return createTextMonitor(args);\n        },\n    };\n\n    const StringMonitorPlugin = {\n        id: 'monitor-string',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n                multiline: p.optional.boolean,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const multiline = value.rawValue.length > 1 ||\n                ('multiline' in args.params && args.params.multiline);\n            if (multiline) {\n                return new MultiLogController(args.document, {\n                    formatter: formatString,\n                    lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new SingleLogController(args.document, {\n                formatter: formatString,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class InputBinding {\n        constructor(config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue !== undefined) {\n                this.value.rawValue = this.reader(targetValue);\n            }\n        }\n        write_(rawValue) {\n            this.writer(this.target, rawValue);\n        }\n        onValueChange_(ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit('change', {\n                options: ev.options,\n                rawValue: ev.rawValue,\n                sender: this,\n            });\n        }\n    }\n\n    function createInputBindingController(plugin, args) {\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const p = ParamsParsers;\n        const valueArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(valueArgs);\n        const constraint = plugin.binding.constraint\n            ? plugin.binding.constraint(valueArgs)\n            : undefined;\n        const value = createValue(reader(result.initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals,\n        });\n        const binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs),\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            constraint: constraint,\n            document: args.document,\n            initialValue: result.initialValue,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = p.optional.string(args.params.label).value;\n        return new InputBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label || args.target.key,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class MonitorBinding {\n        constructor(config) {\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on('tick', this.onTick_);\n            this.read();\n        }\n        dispose() {\n            this.ticker.dispose();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue === undefined) {\n                return;\n            }\n            const buffer = this.value.rawValue;\n            const newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit('update', {\n                rawValue: newValue,\n                sender: this,\n            });\n        }\n        onTick_(_) {\n            this.read();\n        }\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createMonitorBindingController(plugin, args) {\n        var _a, _b, _c;\n        const P = ParamsParsers;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const bindingArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(bindingArgs);\n        const bufferSize = (_b = (_a = P.optional.number(args.params.bufferSize).value) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n            plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n        const interval = P.optional.number(args.params.interval).value;\n        const binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, interval),\n            value: initializeBuffer(bufferSize),\n        });\n        const disabled = P.optional.boolean(args.params.disabled).value;\n        const hidden = P.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            document: args.document,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = (_c = P.optional.string(args.params.label).value) !== null && _c !== void 0 ? _c : args.target.key;\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class PluginPool {\n        constructor() {\n            this.pluginsMap_ = {\n                blades: [],\n                inputs: [],\n                monitors: [],\n            };\n        }\n        getAll() {\n            return [\n                ...this.pluginsMap_.blades,\n                ...this.pluginsMap_.inputs,\n                ...this.pluginsMap_.monitors,\n            ];\n        }\n        register(r) {\n            if (r.type === 'blade') {\n                this.pluginsMap_.blades.unshift(r);\n            }\n            else if (r.type === 'input') {\n                this.pluginsMap_.inputs.unshift(r);\n            }\n            else if (r.type === 'monitor') {\n                this.pluginsMap_.monitors.unshift(r);\n            }\n        }\n        createInput(document, target, params) {\n            const initialValue = target.read();\n            if (isEmpty(initialValue)) {\n                throw new TpError({\n                    context: {\n                        key: target.key,\n                    },\n                    type: 'nomatchingcontroller',\n                });\n            }\n            const bc = this.pluginsMap_.inputs.reduce((result, plugin) => result ||\n                createInputBindingController(plugin, {\n                    document: document,\n                    target: target,\n                    params: params,\n                }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createMonitor(document, target, params) {\n            const bc = this.pluginsMap_.monitors.reduce((result, plugin) => result ||\n                createMonitorBindingController(plugin, {\n                    document: document,\n                    params: params,\n                    target: target,\n                }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createBlade(document, params) {\n            const bc = this.pluginsMap_.blades.reduce((result, plugin) => result ||\n                createBladeController(plugin, {\n                    document: document,\n                    params: params,\n                }), null);\n            if (!bc) {\n                throw new TpError({\n                    type: 'nomatchingview',\n                    context: {\n                        params: params,\n                    },\n                });\n            }\n            return bc;\n        }\n        createBladeApi(bc) {\n            if (bc instanceof InputBindingController) {\n                return new InputBindingApi(bc);\n            }\n            if (bc instanceof MonitorBindingController) {\n                return new MonitorBindingApi(bc);\n            }\n            if (bc instanceof RackController) {\n                return new RackApi(bc, this);\n            }\n            const api = this.pluginsMap_.blades.reduce((result, plugin) => result ||\n                plugin.api({\n                    controller: bc,\n                    pool: this,\n                }), null);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n    }\n\n    function createDefaultPluginPool() {\n        const pool = new PluginPool();\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            Point4dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n            BooleanMonitorPlugin,\n            StringMonitorPlugin,\n            NumberMonitorPlugin,\n            ButtonBladePlugin,\n            FolderBladePlugin,\n            SeparatorBladePlugin,\n            TabBladePlugin,\n        ].forEach((p) => {\n            pool.register(p);\n        });\n        return pool;\n    }\n\n    class ListApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get options() {\n            return this.controller_.valueController.props.get('options');\n        }\n        set options(options) {\n            this.controller_.valueController.props.set('options', options);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class SliderApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get maxValue() {\n            return this.controller_.valueController.sliderController.props.get('maxValue');\n        }\n        set maxValue(maxValue) {\n            this.controller_.valueController.sliderController.props.set('maxValue', maxValue);\n        }\n        get minValue() {\n            return this.controller_.valueController.sliderController.props.get('minValue');\n        }\n        set minValue(minValue) {\n            this.controller_.valueController.sliderController.props.set('minValue', minValue);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class TextApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get formatter() {\n            return this.controller_.valueController.props.get('formatter');\n        }\n        set formatter(formatter) {\n            this.controller_.valueController.props.set('formatter', formatter);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    const ListBladePlugin = (function () {\n        return {\n            id: 'list',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    options: p.required.custom(parseListOptions),\n                    value: p.required.raw,\n                    view: p.required.constant('list'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                const ic = new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: normalizeListOptions(args.params.options),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof ListController)) {\n                    return null;\n                }\n                return new ListApi(args.controller);\n            },\n        };\n    })();\n\n    /**\n     * @hidden\n     */\n    function exportPresetJson(targets) {\n        return targets.reduce((result, target) => {\n            return Object.assign(result, {\n                [target.presetKey]: target.read(),\n            });\n        }, {});\n    }\n    /**\n     * @hidden\n     */\n    function importPresetJson(targets, preset) {\n        targets.forEach((target) => {\n            const value = preset[target.presetKey];\n            if (value !== undefined) {\n                target.write(value);\n            }\n        });\n    }\n\n    class RootApi extends FolderApi {\n        /**\n         * @hidden\n         */\n        constructor(controller, pool) {\n            super(controller, pool);\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        /**\n         * Imports a preset of all inputs.\n         * @param preset The preset object to import.\n         */\n        importPreset(preset) {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            importPresetJson(targets, preset);\n            this.refresh();\n        }\n        /**\n         * Exports a preset of all inputs.\n         * @return An exported preset object.\n         */\n        exportPreset() {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        }\n        /**\n         * Refreshes all bindings of the pane.\n         */\n        refresh() {\n            // Force-read all input bindings\n            this.controller_.rackController.rack\n                .find(InputBindingController)\n                .forEach((ibc) => {\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller_.rackController.rack\n                .find(MonitorBindingController)\n                .forEach((mbc) => {\n                mbc.binding.read();\n            });\n        }\n    }\n\n    class RootController extends FolderController {\n        constructor(doc, config) {\n            super(doc, {\n                expanded: config.expanded,\n                blade: config.blade,\n                props: config.props,\n                root: true,\n                viewProps: config.viewProps,\n            });\n        }\n    }\n\n    const SliderBladePlugin = {\n        id: 'slider',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                max: p.required.number,\n                min: p.required.number,\n                view: p.required.constant('slider'),\n                format: p.optional.function,\n                label: p.optional.string,\n                value: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const v = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n            const vc = new SliderTextController(args.document, {\n                baseStep: 1,\n                parser: parseNumber,\n                sliderProps: ValueMap.fromObject({\n                    maxValue: args.params.max,\n                    minValue: args.params.min,\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(undefined, v),\n                    formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n                }),\n                value: createValue(v),\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof SliderTextController)) {\n                return null;\n            }\n            return new SliderApi(args.controller);\n        },\n    };\n\n    const TextBladePlugin = (function () {\n        return {\n            id: 'text',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    parse: p.required.function,\n                    value: p.required.raw,\n                    view: p.required.constant('text'),\n                    format: p.optional.function,\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                var _a;\n                const ic = new TextController(args.document, {\n                    parser: args.params.parse,\n                    props: ValueMap.fromObject({\n                        formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof TextController)) {\n                    return null;\n                }\n                return new TextApi(args.controller);\n            },\n        };\n    })();\n\n    function createDefaultWrapperElement(doc) {\n        const elem = doc.createElement('div');\n        elem.classList.add(ClassName('dfw')());\n        if (doc.body) {\n            doc.body.appendChild(elem);\n        }\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n            return;\n        }\n        const styleElem = doc.createElement('style');\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    /**\n     * The root pane of Tweakpane.\n     */\n    class Pane extends RootApi {\n        constructor(opt_config) {\n            var _a;\n            const config = opt_config || {};\n            const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            const pool = createDefaultPluginPool();\n            const rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: createBlade(),\n                props: ValueMap.fromObject({\n                    title: config.title,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            super(rootController, pool);\n            this.pool_ = pool;\n            this.containerElem_ = config.container || createDefaultWrapperElement(doc);\n            this.containerElem_.appendChild(this.element);\n            this.doc_ = doc;\n            this.usesDefaultWrapper_ = !config.container;\n            this.setUpDefaultPlugins_();\n        }\n        get document() {\n            if (!this.doc_) {\n                throw TpError.alreadyDisposed();\n            }\n            return this.doc_;\n        }\n        dispose() {\n            const containerElem = this.containerElem_;\n            if (!containerElem) {\n                throw TpError.alreadyDisposed();\n            }\n            if (this.usesDefaultWrapper_) {\n                const parentElem = containerElem.parentElement;\n                if (parentElem) {\n                    parentElem.removeChild(containerElem);\n                }\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            super.dispose();\n        }\n        registerPlugin(bundle) {\n            const plugins = 'plugin' in bundle\n                ? [bundle.plugin]\n                : 'plugins' in bundle\n                    ? bundle.plugins\n                    : [];\n            plugins.forEach((p) => {\n                this.pool_.register(p);\n                this.embedPluginStyle_(p);\n            });\n        }\n        embedPluginStyle_(plugin) {\n            if (plugin.css) {\n                embedStyle(this.document, `plugin-${plugin.id}`, plugin.css);\n            }\n        }\n        setUpDefaultPlugins_() {\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            embedStyle(this.document, 'default', '.tp-lstv_s,.tp-btnv_b,.tp-p2dv_b,.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i,.tp-grlv_g,.tp-sglv_i,.tp-mllv_i,.tp-fldv_b,.tp-rotv_b,.tp-ckbv_i,.tp-coltxtv_ms,.tp-tbiv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-lstv_s,.tp-btnv_b,.tp-p2dv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-lstv_s:hover,.tp-btnv_b:hover,.tp-p2dv_b:hover{background-color:var(--btn-bg-h)}.tp-lstv_s:focus,.tp-btnv_b:focus,.tp-p2dv_b:focus{background-color:var(--btn-bg-f)}.tp-lstv_s:active,.tp-btnv_b:active,.tp-p2dv_b:active{background-color:var(--btn-bg-a)}.tp-lstv_s:disabled,.tp-btnv_b:disabled,.tp-p2dv_b:disabled{opacity:0.5}.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-colswv_sw:hover,.tp-p2dpv_p:hover,.tp-txtv_i:hover{background-color:var(--in-bg-h)}.tp-colswv_sw:focus,.tp-p2dpv_p:focus,.tp-txtv_i:focus{background-color:var(--in-bg-f)}.tp-colswv_sw:active,.tp-p2dpv_p:active,.tp-txtv_i:active{background-color:var(--in-bg-a)}.tp-colswv_sw:disabled,.tp-p2dpv_p:disabled,.tp-txtv_i:disabled{opacity:0.5}.tp-grlv_g,.tp-sglv_i,.tp-mllv_i{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);width:100%}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono,Source Code Pro,Menlo,Courier,monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #2f3137);--bs-sh: var(--tp-base-shadow-color, rgba(0,0,0,0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #2f3137);--cnt-bg: var(--tp-container-background-color, rgba(187,188,196,0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187,188,196,0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187,188,196,0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187,188,196,0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187,188,196,0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187,188,196,0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187,188,196,0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187,188,196,0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187,188,196,0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0,0,0,0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187,188,196,0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(0,0,0,0.2))}.tp-fldv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-rotv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-v-p))}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-rotv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-fldv_c>.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv{margin-left:4px}.tp-fldv_c>.tp-fldv>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c .tp-fldv>.tp-fldv_c,.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-tabv>.tp-tabv_i,.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-fldv_c .tp-tabv>.tp-tabv_c,.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_b,.tp-rotv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-fldv_b:hover,.tp-rotv_b:hover{background-color:var(--cnt-bg-h)}.tp-fldv_b:focus,.tp-rotv_b:focus{background-color:var(--cnt-bg-f)}.tp-fldv_b:active,.tp-rotv_b:active{background-color:var(--cnt-bg-a)}.tp-fldv_b:disabled,.tp-rotv_b:disabled{opacity:0.5}.tp-fldv_m,.tp-rotv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\\'\\';display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px) / 2 - 2px);margin:auto;opacity:0.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m,.tp-rotv.tp-rotv-expanded .tp-rotv_m{transform:none}.tp-fldv_c,.tp-rotv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c,.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c{display:none}.tp-fldv.tp-fldv-expanded>.tp-fldv_c,.tp-rotv.tp-rotv-expanded .tp-rotv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-coltxtv_m,.tp-lstv{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-coltxtv_mm,.tp-lstv_m{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-coltxtv_mm svg,.tp-lstv_m svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-coltxtv_mm svg path,.tp-lstv_m svg path{fill:currentColor}.tp-coltxtv_w,.tp-pndtxtv{display:flex}.tp-coltxtv_c,.tp-pndtxtv_a{width:100%}.tp-coltxtv_c+.tp-coltxtv_c,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-pndtxtv_a{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:0.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:\\'\\';height:2px;left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us) * 4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0,0,0,0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,0.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,0.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br)}.tp-colswv.tp-v-disabled{opacity:0.5}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,0.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:\\'\\';display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left 0.05s, top 0.05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:0.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:0.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:0.5}.tp-mllv_i{display:block;height:calc(var(--bld-us) * 3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:0.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:0.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\\'\\';display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\\'\\';display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:\\'\\';display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:0.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:\\'\\';height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:\\'\\';height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:0.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:0.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:0.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\\'\\';height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:0.1;position:absolute;top:0;transition:border-radius 0.1s, height 0.1s, transform 0.1s, width 0.1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:\\'\\';font-size:0.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}');\n            this.pool_.getAll().forEach((plugin) => {\n                this.embedPluginStyle_(plugin);\n            });\n            this.registerPlugin({\n                plugins: [\n                    SliderBladePlugin,\n                    ListBladePlugin,\n                    TabBladePlugin,\n                    TextBladePlugin,\n                ],\n            });\n        }\n    }\n\n    const VERSION = new Semver('3.0.7');\n\n    exports.BladeApi = BladeApi;\n    exports.ButtonApi = ButtonApi;\n    exports.FolderApi = FolderApi;\n    exports.InputBindingApi = InputBindingApi;\n    exports.ListApi = ListApi;\n    exports.MonitorBindingApi = MonitorBindingApi;\n    exports.Pane = Pane;\n    exports.SeparatorApi = SeparatorApi;\n    exports.SliderApi = SliderApi;\n    exports.TabApi = TabApi;\n    exports.TabPageApi = TabPageApi;\n    exports.TextApi = TextApi;\n    exports.TpChangeEvent = TpChangeEvent;\n    exports.VERSION = VERSION;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _classPrivateFieldGet(receiver, privateMap) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return privateMap.get(receiver).value;\n}\n","export default function _classPrivateFieldSet(receiver, privateMap, value) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to set private field on non-instance\");\n  }\n\n  var descriptor = privateMap.get(receiver);\n\n  if (!descriptor.writable) {\n    throw new TypeError(\"attempted to set read only private field\");\n  }\n\n  descriptor.value = value;\n  return value;\n}\n","export default function _classPrivateMethodGet(receiver, privateSet, fn) {\n  if (!privateSet.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return fn;\n}\n","function isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () { }));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    construct = Reflect.construct;\n  } else {\n    construct = function construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return construct.apply(null, arguments);\n}\n\nexport default function _construct(Parent, args, Class) {\n  return construct.apply(null, arguments);\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","function getPrototypeOf(o) {\n  getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return getPrototypeOf(o);\n}\n\nexport default function _getPrototypeOf(o) {\n  return getPrototypeOf(o);\n}","import superPropBase from './_super_prop_base';\n\nfunction get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    get = Reflect.get;\n  } else {\n    get = function get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver || target);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return get(target, property, receiver);\n}\n\nexport default function _get(target, property, reciever) {\n  return get(target, property, reciever);\n}\n","import getPrototypeOf from './_get_prototype_of';\n\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n","function setPrototypeOf(o, p) {\n  setPrototypeOf = Object.setPrototypeOf || function setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return setPrototypeOf(o, p);\n}\n\nexport default function _setPrototypeOf(o, p) {\n  return setPrototypeOf(o, p);\n}\n","import setPrototypeOf from './_set_prototype_of';\n\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n","import defineProperty from './_define_property';\n\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n","import arrayWithHoles from './_array_with_holes';\nimport iterableToArrayLimit from './_iterable_to_array';\nimport nonIterableRest from './_non_iterable_rest';\n\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n","import arrayWithoutHoles from './_array_without_holes';\nimport iterableToArray from './_iterable_to_array';\nimport nonIterableSpread from './_non_iterable_spread';\n\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n","import assertThisInitialized from './_assert_this_initialized';\nimport _typeof from './_type_of';\n\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n","export default function _typeof(obj) {\n    return obj && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n};\n","import _isNativeReflectConstruct from \"./_is_native_reflect_construct\";\nimport _getPrototypeOf from \"./_get_prototype_of\";\nimport _possibleConstructorReturn from './_possible_constructor_return';\n\nexport default function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n    return function _createSuperInternal() {\n        var Super = _getPrototypeOf(Derived),\n            result;\n        if (hasNativeReflectConstruct) {\n            var NewTarget = _getPrototypeOf(this).constructor;\n            result = Reflect.construct(Super, arguments, NewTarget);\n        } else {\n            result = Super.apply(this, arguments);\n        }\n        return _possibleConstructorReturn(this, result);\n    };\n}","export default function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n    try {\n        Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () { }));\n        return true;\n    } catch (e) {\n        return false;\n    }\n}","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\n * Returns a string representation of a quatenion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var clone = vec4.clone;\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var fromValues = vec4.fromValues;\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\n\nexport var copy = vec4.copy;\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\n\nexport var set = vec4.set;\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\n\nexport var add = vec4.add;\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\n\nexport var scale = vec4.scale;\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = vec4.dot;\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\n\nexport var lerp = vec4.lerp;\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport var length = vec4.length;\n/**\n * Alias for {@link quat.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\n\nexport var normalize = vec4.normalize;\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat} a The first vector.\n * @param {ReadonlyQuat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var equals = vec4.equals;\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import { mat4, quat, vec3 } from 'gl-matrix';\n\nexport class OrbitControl {\n\n    constructor(canvas, camera, updateCallback) {\n        this.pointerDown = false;\n        this.pointerDownPos = { x: 0, y: 0 };\n        this.pointerPos = { x: 0, y: 0 };\n        this.followPos = { x: 0, y: 0 };\n        this.prevFollowPos = {x: 0, y: 0};\n        this.phi = 0.;\n        this.theta = 0.;\n        this.camera = camera;\n        this.updateCallback = updateCallback;\n\n        canvas.style.touchAction = 'none';\n\n        canvas.addEventListener('pointerdown', e => {\n            this.pointerDownPos = { x: e.clientX, y: e.clientY }\n            this.followPos = { x: e.clientX, y: e.clientY }\n            this.pointerPos = { x: e.clientX, y: e.clientY }\n            this.prevFollowPos = { x: e.clientX, y: e.clientY }\n            this.pointerDownCameraUp = [...this.camera.up];\n            this.pointerDownRotation = [...this.camera.rotation];\n            this.pointerDown = true;\n        });\n        canvas.addEventListener('pointerup', e => {\n            this.pointerDown = false;\n        });\n        canvas.addEventListener('pointermove', e => {\n            if (this.pointerDown) {\n                this.pointerPos = { x: e.clientX, y: e.clientY }\n            }\n        });\n    }\n\n    update() {\n        if (this.pointerDown) {\n            const damping = 10;\n            this.followPos.x += (this.pointerPos.x - this.followPos.x) / damping;\n            this.followPos.y += (this.pointerPos.y - this.followPos.y) / damping;\n\n            const delta = {\n                x: this.followPos.x - this.prevFollowPos.x,\n                y: this.followPos.y - this.prevFollowPos.y\n            };\n            this.prevFollowPos = { ...this.followPos };\n\n            const speed = 0.2;\n            this.phi = delta.x * speed;\n            this.theta = delta.y * speed;\n        } else {\n            this.phi *= 0.96;\n            this.theta *= 0.96;\n        }\n\n        this.camera.rotation[0] -= this.theta;\n        this.camera.rotation[1] -= this.phi;\n\n        const thetaLimitUp = -8;\n        const thetaLimitDown = -80;\n        if (this.camera.rotation[0] > thetaLimitUp) {\n            this.camera.rotation[0] = thetaLimitUp;\n        } else if (this.camera.rotation[0] < thetaLimitDown) {\n            this.camera.rotation[0] = thetaLimitDown;\n        }\n\n        quat.fromEuler(this.camera.orbit, this.camera.rotation[0], this.camera.rotation[1], this.camera.rotation[2]);\n        vec3.transformQuat(this.camera.position, [0, 0, this.camera.distance], this.camera.orbit);\n\n        this.updateCallback();\n    }\n\n}","/*\n * A speed-improved perlin and simplex noise algorithms for 2D.\n *\n * Based on example code by Stefan Gustavson (stegu@itn.liu.se).\n * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\n * Better rank ordering method by Stefan Gustavson in 2012.\n * Converted to Javascript by Joseph Gentle.\n *\n * Version 2012-03-09\n *\n * This code was placed in the public domain by its original author,\n * Stefan Gustavson. You may use it as you see fit, but\n * attribution is appreciated.\n *\n */\n\nfunction Grad(x, y, z) {\n    this.x = x; this.y = y; this.z = z;\n}\n\nGrad.prototype.dot2 = function(x, y) {\n    return this.x*x + this.y*y;\n};\n\nGrad.prototype.dot3 = function(x, y, z) {\n    return this.x*x + this.y*y + this.z*z;\n};\n\nvar grad3 = [new Grad(1,1,0),new Grad(-1,1,0),new Grad(1,-1,0),new Grad(-1,-1,0),\n                new Grad(1,0,1),new Grad(-1,0,1),new Grad(1,0,-1),new Grad(-1,0,-1),\n                new Grad(0,1,1),new Grad(0,-1,1),new Grad(0,1,-1),new Grad(0,-1,-1)];\n\nvar p = [151,160,137,91,90,15,\n131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,\n190, 6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,\n88,237,149,56,87,174,20,125,136,171,168, 68,175,74,165,71,134,139,48,27,166,\n77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,\n102,143,54, 65,25,63,161, 1,216,80,73,209,76,132,187,208, 89,18,169,200,196,\n135,130,116,188,159,86,164,100,109,198,173,186, 3,64,52,217,226,250,124,123,\n5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,\n223,183,170,213,119,248,152, 2,44,154,163, 70,221,153,101,155,167, 43,172,9,\n129,22,39,253, 19,98,108,110,79,113,224,232,178,185, 112,104,218,246,97,228,\n251,34,242,193,238,210,144,12,191,179,162,241, 81,51,145,235,249,14,239,107,\n49,192,214, 31,181,199,106,157,184, 84,204,176,115,121,50,45,127, 4,150,254,\n138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];\n// To remove the need for index wrapping, double the permutation table length\nvar perm = new Array(512);\nvar gradP = new Array(512);\n\n// This isn't a very good seeding function, but it works ok. It supports 2^16\n// different seed values. Write something better if you need more seeds.\nexport const seed = function(seed) {\n    if(seed > 0 && seed < 1) {\n    // Scale the seed out\n    seed *= 65536;\n    }\n\n    seed = Math.floor(seed);\n    if(seed < 256) {\n    seed |= seed << 8;\n    }\n\n    for(var i = 0; i < 256; i++) {\n    var v;\n    if (i & 1) {\n        v = p[i] ^ (seed & 255);\n    } else {\n        v = p[i] ^ ((seed>>8) & 255);\n    }\n\n    perm[i] = perm[i + 256] = v;\n    gradP[i] = gradP[i + 256] = grad3[v % 12];\n    }\n};\n\nseed(0);\n\n/*\nfor(var i=0; i<256; i++) {\n    perm[i] = perm[i + 256] = p[i];\n    gradP[i] = gradP[i + 256] = grad3[perm[i] % 12];\n}*/\n\n// Skewing and unskewing factors for 2, 3, and 4 dimensions\nvar F2 = 0.5*(Math.sqrt(3)-1);\nvar G2 = (3-Math.sqrt(3))/6;\n\nvar F3 = 1/3;\nvar G3 = 1/6;\n\n// 2D simplex noise\nexport const simplex2 = function(xin, yin) {\n    var n0, n1, n2; // Noise contributions from the three corners\n    // Skew the input space to determine which simplex cell we're in\n    var s = (xin+yin)*F2; // Hairy factor for 2D\n    var i = Math.floor(xin+s);\n    var j = Math.floor(yin+s);\n    var t = (i+j)*G2;\n    var x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    var y0 = yin-j+t;\n    // For the 2D case, the simplex shape is an equilateral triangle.\n    // Determine which simplex we are in.\n    var i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n    if(x0>y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n    i1=1; j1=0;\n    } else {    // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n    i1=0; j1=1;\n    }\n    // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n    // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n    // c = (3-sqrt(3))/6\n    var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n    var y1 = y0 - j1 + G2;\n    var x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords\n    var y2 = y0 - 1 + 2 * G2;\n    // Work out the hashed gradient indices of the three simplex corners\n    i &= 255;\n    j &= 255;\n    var gi0 = gradP[i+perm[j]];\n    var gi1 = gradP[i+i1+perm[j+j1]];\n    var gi2 = gradP[i+1+perm[j+1]];\n    // Calculate the contribution from the three corners\n    var t0 = 0.5 - x0*x0-y0*y0;\n    if(t0<0) {\n    n0 = 0;\n    } else {\n    t0 *= t0;\n    n0 = t0 * t0 * gi0.dot2(x0, y0);  // (x,y) of grad3 used for 2D gradient\n    }\n    var t1 = 0.5 - x1*x1-y1*y1;\n    if(t1<0) {\n    n1 = 0;\n    } else {\n    t1 *= t1;\n    n1 = t1 * t1 * gi1.dot2(x1, y1);\n    }\n    var t2 = 0.5 - x2*x2-y2*y2;\n    if(t2<0) {\n    n2 = 0;\n    } else {\n    t2 *= t2;\n    n2 = t2 * t2 * gi2.dot2(x2, y2);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 70 * (n0 + n1 + n2);\n};\n\n// 3D simplex noise\nexport const simplex3 = function(xin, yin, zin) {\n    var n0, n1, n2, n3; // Noise contributions from the four corners\n\n    // Skew the input space to determine which simplex cell we're in\n    var s = (xin+yin+zin)*F3; // Hairy factor for 2D\n    var i = Math.floor(xin+s);\n    var j = Math.floor(yin+s);\n    var k = Math.floor(zin+s);\n\n    var t = (i+j+k)*G3;\n    var x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    var y0 = yin-j+t;\n    var z0 = zin-k+t;\n\n    // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n    // Determine which simplex we are in.\n    var i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n    var i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n    if(x0 >= y0) {\n    if(y0 >= z0)      { i1=1; j1=0; k1=0; i2=1; j2=1; k2=0; }\n    else if(x0 >= z0) { i1=1; j1=0; k1=0; i2=1; j2=0; k2=1; }\n    else              { i1=0; j1=0; k1=1; i2=1; j2=0; k2=1; }\n    } else {\n    if(y0 < z0)      { i1=0; j1=0; k1=1; i2=0; j2=1; k2=1; }\n    else if(x0 < z0) { i1=0; j1=1; k1=0; i2=0; j2=1; k2=1; }\n    else             { i1=0; j1=1; k1=0; i2=1; j2=1; k2=0; }\n    }\n    // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n    // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n    // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n    // c = 1/6.\n    var x1 = x0 - i1 + G3; // Offsets for second corner\n    var y1 = y0 - j1 + G3;\n    var z1 = z0 - k1 + G3;\n\n    var x2 = x0 - i2 + 2 * G3; // Offsets for third corner\n    var y2 = y0 - j2 + 2 * G3;\n    var z2 = z0 - k2 + 2 * G3;\n\n    var x3 = x0 - 1 + 3 * G3; // Offsets for fourth corner\n    var y3 = y0 - 1 + 3 * G3;\n    var z3 = z0 - 1 + 3 * G3;\n\n    // Work out the hashed gradient indices of the four simplex corners\n    i &= 255;\n    j &= 255;\n    k &= 255;\n    var gi0 = gradP[i+   perm[j+   perm[k   ]]];\n    var gi1 = gradP[i+i1+perm[j+j1+perm[k+k1]]];\n    var gi2 = gradP[i+i2+perm[j+j2+perm[k+k2]]];\n    var gi3 = gradP[i+ 1+perm[j+ 1+perm[k+ 1]]];\n\n    // Calculate the contribution from the four corners\n    var t0 = 0.6 - x0*x0 - y0*y0 - z0*z0;\n    if(t0<0) {\n    n0 = 0;\n    } else {\n    t0 *= t0;\n    n0 = t0 * t0 * gi0.dot3(x0, y0, z0);  // (x,y) of grad3 used for 2D gradient\n    }\n    var t1 = 0.6 - x1*x1 - y1*y1 - z1*z1;\n    if(t1<0) {\n    n1 = 0;\n    } else {\n    t1 *= t1;\n    n1 = t1 * t1 * gi1.dot3(x1, y1, z1);\n    }\n    var t2 = 0.6 - x2*x2 - y2*y2 - z2*z2;\n    if(t2<0) {\n    n2 = 0;\n    } else {\n    t2 *= t2;\n    n2 = t2 * t2 * gi2.dot3(x2, y2, z2);\n    }\n    var t3 = 0.6 - x3*x3 - y3*y3 - z3*z3;\n    if(t3<0) {\n    n3 = 0;\n    } else {\n    t3 *= t3;\n    n3 = t3 * t3 * gi3.dot3(x3, y3, z3);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 32 * (n0 + n1 + n2 + n3);\n\n};\n\n// ##### Perlin noise stuff\n\nfunction fade(t) {\n    return t*t*t*(t*(t*6-15)+10);\n}\n\nfunction lerp(a, b, t) {\n    return (1-t)*a + t*b;\n}\n\n// 2D Perlin Noise\nexport const perlin2 = function(x, y) {\n    // Find unit grid cell containing point\n    var X = Math.floor(x), Y = Math.floor(y);\n    // Get relative xy coordinates of point within that cell\n    x = x - X; y = y - Y;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255;\n\n    // Calculate noise contributions from each of the four corners\n    var n00 = gradP[X+perm[Y]].dot2(x, y);\n    var n01 = gradP[X+perm[Y+1]].dot2(x, y-1);\n    var n10 = gradP[X+1+perm[Y]].dot2(x-1, y);\n    var n11 = gradP[X+1+perm[Y+1]].dot2(x-1, y-1);\n\n    // Compute the fade curve value for x\n    var u = fade(x);\n\n    // Interpolate the four results\n    return lerp(\n        lerp(n00, n10, u),\n        lerp(n01, n11, u),\n        fade(y));\n};\n\n// 3D Perlin Noise\nexport const perlin3 = function(x, y, z) {\n    // Find unit grid cell containing point\n    var X = Math.floor(x), Y = Math.floor(y), Z = Math.floor(z);\n    // Get relative xyz coordinates of point within that cell\n    x = x - X; y = y - Y; z = z - Z;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255; Z = Z & 255;\n\n    // Calculate noise contributions from each of the eight corners\n    var n000 = gradP[X+  perm[Y+  perm[Z  ]]].dot3(x,   y,     z);\n    var n001 = gradP[X+  perm[Y+  perm[Z+1]]].dot3(x,   y,   z-1);\n    var n010 = gradP[X+  perm[Y+1+perm[Z  ]]].dot3(x,   y-1,   z);\n    var n011 = gradP[X+  perm[Y+1+perm[Z+1]]].dot3(x,   y-1, z-1);\n    var n100 = gradP[X+1+perm[Y+  perm[Z  ]]].dot3(x-1,   y,   z);\n    var n101 = gradP[X+1+perm[Y+  perm[Z+1]]].dot3(x-1,   y, z-1);\n    var n110 = gradP[X+1+perm[Y+1+perm[Z  ]]].dot3(x-1, y-1,   z);\n    var n111 = gradP[X+1+perm[Y+1+perm[Z+1]]].dot3(x-1, y-1, z-1);\n\n    // Compute the fade curve value for x, y, z\n    var u = fade(x);\n    var v = fade(y);\n    var w = fade(z);\n\n    // Interpolate\n    return lerp(\n        lerp(\n        lerp(n000, n100, u),\n        lerp(n001, n101, u), w),\n        lerp(\n        lerp(n010, n110, u),\n        lerp(n011, n111, u), w),\n        v);\n};","\nimport { mat4, quat, vec3 } from 'gl-matrix';\nimport { OrbitControl } from './orbit-control';\nimport { simplex2 } from './noise';\n\nimport drawVertShaderSource from './shader/draw.vert';\nimport drawFragShaderSource from './shader/draw.frag';\nimport portalVertShaderSource from './shader/portal.vert';\nimport portalFragShaderSource from './shader/portal.frag';\nimport compositeVertShaderSource from './shader/composite.vert';\nimport compositeFragShaderSource from './shader/composite.frag';\nimport hexBlur1VertShaderSource from './shader/hex-blur-1.vert';\nimport hexBlur1FragShaderSource from './shader/hex-blur-1.frag';\nimport hexBlur2VertShaderSource from './shader/hex-blur-2.vert';\nimport hexBlur2FragShaderSource from './shader/hex-blur-2.frag';\n\nexport class HexagonalBokeh {\n    oninit;\n\n    #time = 0;\n    #frames = 0;\n    #deltaTime = 0;\n    #isDestroyed = false;\n\n    camera = {\n        matrix: mat4.create(),\n        near: 80,\n        far: 350,\n        distance: 150,\n        orbit: quat.create(),\n        position: vec3.create(),\n        rotation: vec3.create(),\n        up: vec3.fromValues(0, 1, 0)\n    };\n\n    blur = {\n        radius: 7,\n        scale: 2\n    }\n\n    constructor(canvas, pane, oninit = null) {\n        this.canvas = canvas;\n        this.pane = pane;\n        this.oninit = oninit;\n\n        this.#init();\n    }\n\n    resize() {\n        const gl = this.gl;\n\n        this.#resizeCanvasToDisplaySize(gl.canvas);\n        \n        // When you need to set the viewport to match the size of the canvas's\n        // drawingBuffer this will always be correct\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n        // resize the framebuffer textures\n        this.#resizeTextures(gl);\n\n        this.#updateProjectionMatrix(gl);\n    }\n\n    run(time = 0) {\n        this.#deltaTime = time - this.#time;\n        this.#time = time;\n        this.#frames += this.#deltaTime / 16;\n\n        if (this.#isDestroyed) return;\n\n        this.control.update();\n\n        const worldInvers = mat4.create();\n        mat4.invert(worldInvers, this.drawUniforms.u_worldMatrix);\n        mat4.transpose(this.drawUniforms.u_worldInverseTransposeMatrix, worldInvers);\n\n        this.#render();\n\n        requestAnimationFrame((t) => this.run(t));\n    }\n\n    #render() {\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n        gl.enable(gl.DEPTH_TEST);\n        gl.disable(gl.CULL_FACE);\n\n        // draw depth and color \n        this.#setFramebuffer(gl, this.drawFramebuffer, this.drawFramebufferWidth, this.drawFramebufferHeight);\n        gl.useProgram(this.drawProgram);\n        gl.bindVertexArray(this.objectVAO);\n        gl.uniformMatrix4fv(this.drawLocations.u_worldMatrix, false, this.drawUniforms.u_worldMatrix);\n        gl.uniformMatrix4fv(this.drawLocations.u_viewMatrix, false, this.drawUniforms.u_viewMatrix);\n        gl.uniformMatrix4fv(this.drawLocations.u_projectionMatrix, false, this.drawUniforms.u_projectionMatrix);\n        gl.uniformMatrix4fv(this.drawLocations.u_worldInverseTransposeMatrix, false, this.drawUniforms.u_worldInverseTransposeMatrix);\n        gl.uniform3f(this.drawLocations.u_cameraPosition, this.camera.position[0], this.camera.position[1], this.camera.position[2]);\n        gl.uniform1f(this.drawLocations.u_frames, this.#frames);\n        gl.clearBufferfv(gl.COLOR, 0, [0.0, 0.0, 0.0, 0.0]);\n        gl.clearBufferfv(gl.DEPTH, 0, [1.]);\n        gl.drawElements(gl.TRIANGLES, this.objectBuffers.numElem, gl.UNSIGNED_SHORT, 0);\n        // draw the portal triangle on top\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, gl.SRC_COLOR);\n        gl.blendEquation(gl.FUNC_SUBTRACT);\n        gl.useProgram(this.portalProgram);\n        gl.bindVertexArray(this.centerObjectVAO);\n        gl.uniformMatrix4fv(this.portalLocations.u_worldMatrix, false, this.portalUniforms.u_worldMatrix);\n        gl.uniformMatrix4fv(this.portalLocations.u_viewMatrix, false, this.drawUniforms.u_viewMatrix);\n        gl.uniformMatrix4fv(this.portalLocations.u_projectionMatrix, false, this.drawUniforms.u_projectionMatrix);\n        gl.uniform1f(this.portalLocations.u_frames, this.#frames);\n        gl.drawArrays(gl.TRIANGLES, 0, this.centerObjectBuffers.numElem);\n        gl.disable(gl.BLEND);\n        this.#setFramebuffer(gl, null, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n        // blit depth and color\n        gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this.drawFramebuffer);\n        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this.blitFramebuffer);\n        gl.clearBufferfv(gl.COLOR, 0, [0.0, 0.0, 0.0, 1.0]);\n        gl.clearBufferfv(gl.DEPTH, 0, [0]);\n        gl.blitFramebuffer(0, 0, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, 0, this.drawFramebufferWidth, this.drawFramebufferHeight, gl.COLOR_BUFFER_BIT, gl.NEAREST);\n        gl.blitFramebuffer(0, 0, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, 0, this.drawFramebufferWidth, this.drawFramebufferHeight, gl.DEPTH_BUFFER_BIT, gl.NEAREST);\n        this.#setFramebuffer(gl, null, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n        // render first blur pass\n        this.#renderBlurPass(\n            this.hexBlur1Framebuffer, \n            this.drawFramebufferWidth, this.drawFramebufferHeight, \n            this.hexBlur1Program,\n            [\n                [this.hexBlur1Locations.u_colorTexture, this.colorTexture],\n                [this.hexBlur1Locations.u_depthTexture, this.depthTexture]\n            ],\n            [\n                [this.hexBlur1Locations.u_radiusScale, this.blur.scale]\n            ],\n            [\n                [this.hexBlur1Locations.u_maxCoCRadius, this.blur.radius]\n            ]\n        );\n\n        // render second blur pass\n        this.#renderBlurPass(\n            this.hexBlur2Framebuffer, \n            this.drawFramebufferWidth, this.drawFramebufferHeight, \n            this.hexBlur2Program,\n            [\n                [this.hexBlur2Locations.u_verticalBlurTexture, this.hex1VerticalBlurTexture],\n                [this.hexBlur2Locations.u_diagonalBlurTexture, this.hex1DiagonalBlurTexture],\n                [this.hexBlur2Locations.u_depthTexture, this.depthTexture]\n            ],\n            [\n                [this.hexBlur2Locations.u_radiusScale, this.blur.scale]\n            ],\n            [\n                [this.hexBlur2Locations.u_maxCoCRadius, this.blur.radius]\n            ]\n        );\n\n        // draw to the canvas\n        gl.clearColor(0, 0, 0, 1);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.useProgram(this.compositeProgram);\n        gl.bindVertexArray(this.quadVAO);\n        gl.uniform1i(this.compositeLocations.u_texture, 0);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex2BlurTexture);\n        gl.drawArrays(gl.TRIANGLES, 0, this.quadBuffers.numElem);\n    }\n\n    #renderBlurPass(fbo, w, h, program, locTex, locFloat = [], locInt = []) {\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n       this.#setFramebuffer(gl, fbo, w, h);\n       gl.useProgram(program);\n       gl.clearColor(0, 0, 0, 1);\n       gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n       gl.bindVertexArray(this.quadVAO);\n\n       locTex.forEach(([loc, texture], ndx) => {\n           gl.uniform1i(loc, ndx);\n           gl.activeTexture(gl[`TEXTURE${ndx}`]);\n           gl.bindTexture(gl.TEXTURE_2D, texture);\n       });\n\n       locFloat.forEach(([loc, value]) => {\n           gl.uniform1f(loc, value);\n       });\n\n       locInt.forEach(([loc, value]) => {\n           gl.uniform1i(loc, value);\n       });\n\n       gl.drawArrays(gl.TRIANGLES, 0, this.quadBuffers.numElem);\n       this.#setFramebuffer(gl, null, gl.drawingBufferWidth, gl.drawingBufferHeight);\n   }\n\n    destroy() {\n        this.#isDestroyed = true;\n    }\n\n    #init() {\n        this.gl = this.canvas.getContext('webgl2', { antialias: false, alpha: false });\n\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n        if (!gl) {\n            throw new Error('No WebGL 2 context!')\n        }\n\n        ///////////////////////////////////  PROGRAM SETUP\n\n        // setup programs\n        this.drawProgram = this.#createProgram(gl, [drawVertShaderSource, drawFragShaderSource], null, { a_position: 0, a_normal: 1, a_uv: 2 });\n        this.portalProgram = this.#createProgram(gl, [portalVertShaderSource, portalFragShaderSource], null, { a_position: 0, a_uv: 2 });\n        this.hexBlur1Program = this.#createProgram(gl, [hexBlur1VertShaderSource, hexBlur1FragShaderSource], null, { a_position: 0 });\n        this.hexBlur2Program = this.#createProgram(gl, [hexBlur2VertShaderSource, hexBlur2FragShaderSource], null, { a_position: 0 });\n        this.compositeProgram = this.#createProgram(gl, [compositeVertShaderSource, compositeFragShaderSource], null, { a_position: 0 });\n\n        // find the locations\n        this.drawLocations = {\n            a_position: gl.getAttribLocation(this.drawProgram, 'a_position'),\n            a_normal: gl.getAttribLocation(this.drawProgram, 'a_normal'),\n            a_uv: gl.getAttribLocation(this.drawProgram, 'a_uv'),\n            u_worldMatrix: gl.getUniformLocation(this.drawProgram, 'u_worldMatrix'),\n            u_viewMatrix: gl.getUniformLocation(this.drawProgram, 'u_viewMatrix'),\n            u_projectionMatrix: gl.getUniformLocation(this.drawProgram, 'u_projectionMatrix'),\n            u_worldInverseTransposeMatrix: gl.getUniformLocation(this.drawProgram, 'u_worldInverseTransposeMatrix'),\n            u_cameraPosition: gl.getUniformLocation(this.drawProgram, 'u_cameraPosition'),\n            u_frames: gl.getUniformLocation(this.drawProgram, 'u_frames')\n        };\n        this.portalLocations = {\n            a_position: gl.getAttribLocation(this.portalProgram, 'a_position'),\n            a_uv: gl.getAttribLocation(this.portalProgram, 'a_uv'),\n            u_worldMatrix: gl.getUniformLocation(this.portalProgram, 'u_worldMatrix'),\n            u_viewMatrix: gl.getUniformLocation(this.portalProgram, 'u_viewMatrix'),\n            u_projectionMatrix: gl.getUniformLocation(this.portalProgram, 'u_projectionMatrix'),\n            u_frames: gl.getUniformLocation(this.portalProgram, 'u_frames')\n        };\n        this.hexBlur1Locations = {\n            a_position: gl.getAttribLocation(this.hexBlur1Program, 'a_position'),\n            u_colorTexture: gl.getUniformLocation(this.hexBlur1Program, 'u_colorTexture'),\n            u_depthTexture: gl.getUniformLocation(this.hexBlur1Program, 'u_depthTexture'),\n            u_maxCoCRadius: gl.getUniformLocation(this.hexBlur1Program, 'u_maxCoCRadius'),\n            u_radiusScale: gl.getUniformLocation(this.hexBlur1Program, 'u_radiusScale')\n        };\n        this.hexBlur2Locations = {\n            a_position: gl.getAttribLocation(this.hexBlur2Program, 'a_position'),\n            u_verticalBlurTexture: gl.getUniformLocation(this.hexBlur2Program, 'u_verticalBlurTexture'),\n            u_diagonalBlurTexture: gl.getUniformLocation(this.hexBlur2Program, 'u_diagonalBlurTexture'),\n            u_depthTexture: gl.getUniformLocation(this.hexBlur2Program, 'u_depthTexture'),\n            u_maxCoCRadius: gl.getUniformLocation(this.hexBlur2Program, 'u_maxCoCRadius'),\n            u_radiusScale: gl.getUniformLocation(this.hexBlur2Program, 'u_radiusScale')\n        };\n        this.compositeLocations = {\n            a_position: gl.getAttribLocation(this.compositeProgram, 'a_position'),\n            u_texture: gl.getUniformLocation(this.compositeProgram, 'u_texture')\n        };\n\n        // setup uniforms\n        this.drawUniforms = {\n            u_worldMatrix: mat4.create(),\n            u_viewMatrix: mat4.create(),\n            u_projectionMatrix: mat4.create(),\n            u_worldInverseTransposeMatrix: mat4.create()\n        };\n        mat4.rotate(this.drawUniforms.u_worldMatrix, this.drawUniforms.u_worldMatrix, -Math.PI / 2, [1, 0, 0]);\n        mat4.scale(this.drawUniforms.u_worldMatrix, this.drawUniforms.u_worldMatrix, [50, 50, 50]);\n        mat4.translate(this.drawUniforms.u_worldMatrix, this.drawUniforms.u_worldMatrix, [0, 0, 0]);\n\n        this.portalUniforms = {\n            u_worldMatrix: mat4.create()\n        }\n        mat4.translate(this.portalUniforms.u_worldMatrix, this.portalUniforms.u_worldMatrix, [0, 5, 0]);\n\n        /////////////////////////////////// GEOMETRY / MESH SETUP\n\n        // create object VAO\n        const size = 8;\n        this.objectGeometry = this.#createXYPlaneGeometry(size, size, 110, 110, (p) => {\n            const maxHeight = 0.4;\n            const scale = 0.9;\n            const n = simplex2(p.x * scale, p.y * scale);\n            const l = vec3.length([p.x, p.y, p.z]);\n            let lw = (l / 4) * 1.;\n            const c = Math.sin(Math.acos(p.x / 5)) * Math.cos(Math.asin(p.y / 5));\n            return {x: p.x, y: p.y, z: n * maxHeight * lw - c * 6.5 + 5.3 } \n        });\n        this.objectBuffers = { \n            position: this.#createBuffer(gl, this.objectGeometry.vertices),\n            normal: this.#createBuffer(gl, this.objectGeometry.normals),\n            uv: this.#createBuffer(gl, this.objectGeometry.uvs),\n            numElem: this.objectGeometry.count\n        };\n        this.objectVAO = this.#makeVertexArray(gl, [\n            [this.objectBuffers.position, this.drawLocations.a_position, 3],\n            [this.objectBuffers.normal, this.drawLocations.a_normal, 3],\n            [this.objectBuffers.uv, this.drawLocations.a_uv, 2]\n        ], this.objectGeometry.indices);\n\n        // create quad VAO\n        const quadPositions = [\n            -1, -1,\n            3, -1,\n            -1, 3\n        ];\n        this.quadBuffers = {\n            position: this.#createBuffer(gl, quadPositions),\n            numElem: quadPositions.length / 2\n        };\n        this.quadVAO = this.#makeVertexArray(gl, [[this.quadBuffers.position, this.drawLocations.a_position, 2]]);\n\n        // create center triangle VAO\n        const pR = 30;\n        const rot = -Math.PI / 2;\n        const centerObjectPositions = [\n            Math.cos(0 + rot) * pR, Math.sin(0 + rot) * pR, 0,\n            Math.cos(2 * Math.PI / 3 + rot) * pR, Math.sin(2 * Math.PI / 3 + rot) * pR, 0,\n            Math.cos(4 * Math.PI / 3 + rot) * pR, Math.sin(4 * Math.PI / 3 + rot) * pR, 0\n        ];\n        this.centerObjectBuffers = {\n            position: this.#createBuffer(gl, centerObjectPositions),\n            uv: this.#createBuffer(gl, [0, 0, 0, 1, 1, 1]),\n            numElem: centerObjectPositions.length / 3\n        };\n        this.centerObjectVAO = this.#makeVertexArray(gl, [\n            [this.centerObjectBuffers.position, this.portalLocations.a_position, 3],\n            [this.centerObjectBuffers.uv, this.portalLocations.a_uv, 2]\n        ]);\n\n        // initial client dimensions\n        const clientWidth = gl.canvas.clientWidth;\n        const clientHeight = gl.canvas.clientHeight;\n\n         \n        /////////////////////////////////// INITIAL DRAW PASS SETUP\n\n        this.drawFramebufferWidth = clientWidth;\n        this.drawFramebufferHeight = clientHeight;\n\n        // the initial draw pass renders the scene using multisample renderbuffers for\n        // color and depth which are then blitted to separate textures\n\n        // draw framebuffer setup\n        this.drawFramebuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.drawFramebuffer);\n        // depth render buffer setup\n        this.depthRenderbuffer = gl.createRenderbuffer();\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.depthRenderbuffer);\n        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, gl.getParameter(gl.MAX_SAMPLES), gl.DEPTH_COMPONENT32F, this.drawFramebufferWidth, this.drawFramebufferHeight);\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, this.depthRenderbuffer);\n        // color renderbuffer setup\n        this.colorRenderbuffer = gl.createRenderbuffer();\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.colorRenderbuffer);\n        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, gl.getParameter(gl.MAX_SAMPLES), gl.RGBA8, this.drawFramebufferWidth, this.drawFramebufferHeight);\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.RENDERBUFFER, this.colorRenderbuffer);\n        if(gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE) {\n            console.error('could not complete render framebuffer setup')\n        }\n\n        // blit framebuffer setup\n        this.blitFramebuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.blitFramebuffer);\n        // depth texture setup\n        this.depthTexture = this.#createAndSetupTexture(gl, gl.NEAREST, gl.NEAREST);\n        gl.bindTexture(gl.TEXTURE_2D, this.depthTexture);\n        gl.texImage2D(this. gl.TEXTURE_2D, 0, gl.DEPTH_COMPONENT32F, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.DEPTH_COMPONENT, gl.FLOAT, null);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.TEXTURE_2D, this.depthTexture, 0);   \n        // color texture setup\n        this.colorTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.colorTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.colorTexture, 0);\n        if(gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE) {\n            console.error('could not complete render framebuffer setup')\n        }\n\n        /////////////////////////////////// FIRST BLUR PASS SETUP\n\n        this.hex1VerticalBlurTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex1VerticalBlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        this.hex1DiagonalBlurTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex1DiagonalBlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        this.hexBlur1Framebuffer = this.#createFramebuffer(gl, [this.hex1VerticalBlurTexture, this.hex1DiagonalBlurTexture]);\n        if(gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE) {\n            console.error('could not complete blur hexagonal first pass framebuffer setup')\n        }\n\n        /////////////////////////////////// SECOND BLUR PASS SETUP\n\n        this.hex2BlurTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex2BlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        this.hexBlur2Framebuffer = this.#createFramebuffer(gl, [this.hex2BlurTexture]);\n        if(gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE) {\n            console.error('could not complete blur hexagonal second pass framebuffer setup')\n        }\n\n        this.resize();\n\n        this.#updateCameraMatrix();\n        this.#updateProjectionMatrix(gl);\n\n        this.#initOrbitControls();\n        this.#initTweakpane();\n\n        if (this.oninit) this.oninit(this);\n    }\n\n    #createXYPlaneGeometry(w, h, wSegments, hSegments, distort) {\n        let sx = -w / 2;\n        let sy = -h / 2;\n        const dx = w / wSegments;\n        const dy = h / hSegments;\n        const count = wSegments * hSegments * 6;\n        const vertices = [];\n        const normals = [];\n        const uvs = [];\n        const indices = [];\n        const wOff = wSegments + 1;\n        const dd = Math.min(dx, dy) * 0.5;\n\n        for(let iy = 0; iy <= hSegments; ++iy) {\n            for(let ix = 0; ix <= wSegments; ++ix) {\n                let p = {\n                    x: sx + dx * ix,\n                    y: sy + dy * iy,\n                    z: 0\n                };\n                let n = {x: 0, y: 0, z: 1};\n\n                if (distort) {\n                    let x1 = {...p};\n                    let x2 = {...p};\n                    let y1 = {...p};\n                    let y2 = {...p};\n                    x1.x -= dd;\n                    x2.x += dd;\n                    y1.y -= dd;\n                    y2.y += dd;\n                    x1 = distort(x1);\n                    x2 = distort(x2);\n                    y1 = distort(y1);\n                    y2 = distort(y2);\n                    let t = vec3.fromValues(\n                        x2.x - x1.x,\n                        x2.y - x1.y,\n                        x2.z - x1.z\n                    );\n                    let b = vec3.fromValues(\n                        y2.x - y1.x,\n                        y2.y - y1.y,\n                        y2.z - y1.z\n                    );\n                    const normal = vec3.cross(vec3.create(), t, b);\n                    vec3.normalize(normal, normal);\n                    n.x = normal[0];\n                    n.y = normal[1];\n                    n.z = normal[2];\n\n                    p = distort(p);\n                }\n\n                vertices.push(p.x, p.y, p.z);\n                normals.push(n.x, n.y, n.z);\n                uvs.push(ix / wSegments, iy / hSegments);\n            }\n        }\n\n        for(let iy = 0; iy < hSegments; ++iy) {\n            for(let ix = 0; ix < wSegments; ++ix) {\n                indices.push(\n                    iy * wOff + ix,\n                    iy * wOff + ix + 1,\n                    (iy + 1) * wOff + ix + 1\n                );\n                indices.push(\n                    (iy + 1) * wOff + ix + 1,\n                    (iy + 1) * wOff + ix,\n                    iy * wOff + ix\n                );\n            }\n        }\n\n        return {\n            vertices,\n            normals,\n            uvs,\n            indices,\n            count\n        };\n    }\n\n    #createBuffer(gl, data) {\n        const buffer = this.gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        return buffer;\n    }\n\n    #initOrbitControls() {\n        this.control = new OrbitControl(this.canvas, this.camera, () => this.#updateCameraMatrix());\n    }\n\n    #createFramebuffer(gl, colorAttachements) {\n        const fbo = gl.createFramebuffer();\n        const drawBuffers = [];\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n        colorAttachements.forEach((texture, ndx) => {\n            const attachmentPoint = gl[`COLOR_ATTACHMENT${ndx}`];\n            gl.framebufferTexture2D(\n                gl.FRAMEBUFFER,\n                attachmentPoint,\n                gl.TEXTURE_2D, \n                texture,\n                0);\n            drawBuffers.push(attachmentPoint);\n        });\n        gl.drawBuffers(drawBuffers);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        return fbo;\n    }\n\n    #makeVertexArray(gl, bufLocNumElmPairs, indices) {\n        const va = gl.createVertexArray();\n        gl.bindVertexArray(va);\n        for (const [buffer, loc, numElem] of bufLocNumElmPairs) {\n            if (loc == -1) continue;\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n            gl.enableVertexAttribArray(loc);\n            gl.vertexAttribPointer(\n                loc,      // attribute location\n                numElem,        // number of elements\n                gl.FLOAT, // type of data\n                false,    // normalize\n                0,        // stride (0 = auto)\n                0,        // offset\n            );\n        }\n        if (indices) {\n            const indexBuffer = gl.createBuffer();\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);\n        }\n        gl.bindVertexArray(null);\n        return va;\n    }\n\n    #createShader(gl, type, source) {\n        const shader = gl.createShader(type);\n        gl.shaderSource(shader, source);\n        gl.compileShader(shader);\n        const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n        if (success) {\n            return shader;\n        }\n\n        console.error(gl.getShaderInfoLog(shader));\n        gl.deleteShader(shader);\n    }\n\n    #createProgram(gl, shaderSources, transformFeedbackVaryings, attribLocations) {\n        const program = gl.createProgram();\n\n        [gl.VERTEX_SHADER, gl.FRAGMENT_SHADER].forEach((type, ndx) => {\n            const shader = this.#createShader(gl, type, shaderSources[ndx]);\n            gl.attachShader(program, shader);\n        });\n\n        if (transformFeedbackVaryings) {\n            gl.transformFeedbackVaryings(program, transformFeedbackVaryings, gl.SEPARATE_ATTRIBS);\n        }\n\n        if (attribLocations) {\n            for(const attrib in attribLocations) {\n                gl.bindAttribLocation(program, attribLocations[attrib], attrib);\n            }\n        }\n\n        gl.linkProgram(program);\n        const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n\n        if (success) {\n            return program;\n        }\n\n        console.error(gl.getProgramInfoLog(program));\n        gl.deleteProgram(program);\n    }\n\n    #setFramebuffer(gl, fbo, width, height) {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo); // all draw commands will affect the framebuffer\n        gl.viewport(0, 0, width, height);\n    }\n\n    #createAndSetupTexture(gl, minFilter, magFilter) {\n        const texture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter);\n        return texture;\n    }\n\n    #resizeTextures(gl) {\n        const clientWidth = gl.canvas.clientWidth;\n        const clientHeight = gl.canvas.clientHeight;\n        this.drawFramebufferWidth = clientWidth;\n        this.drawFramebufferHeight = clientHeight;\n\n        // resize draw/blit textures and buffers\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.depthRenderbuffer);\n        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, 4, gl.DEPTH_COMPONENT32F, clientWidth, clientHeight);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.colorRenderbuffer);\n        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, gl.getParameter(gl.MAX_SAMPLES), gl.RGBA8, clientWidth, clientHeight);\n        gl.bindTexture(gl.TEXTURE_2D, this.depthTexture);\n        gl.texImage2D(this. gl.TEXTURE_2D, 0, gl.DEPTH_COMPONENT32F, clientWidth, clientHeight, 0, gl.DEPTH_COMPONENT, gl.FLOAT, null);\n        gl.bindTexture(gl.TEXTURE_2D, this.colorTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, clientWidth, clientHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n        // resize blur texture\n        gl.bindTexture(gl.TEXTURE_2D, this.hex1VerticalBlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex1DiagonalBlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex2BlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        \n        // reset bindings\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    }\n\n    #updateCameraMatrix() {\n        mat4.targetTo(this.camera.matrix, this.camera.position, [0, 0, 0], this.camera.up);\n        mat4.invert(this.drawUniforms.u_viewMatrix, this.camera.matrix);\n    }\n\n    #updateProjectionMatrix(gl) {\n        const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\n        mat4.perspective(this.drawUniforms.u_projectionMatrix, Math.PI / 4, aspect, this.camera.near, this.camera.far);\n    }\n\n    #resizeCanvasToDisplaySize(canvas) {\n        // Lookup the size the browser is displaying the canvas in CSS pixels.\n        const displayWidth  = canvas.clientWidth;\n        const displayHeight = canvas.clientHeight;\n       \n        // Check if the canvas is not the same size.\n        const needResize = canvas.width  !== displayWidth ||\n                           canvas.height !== displayHeight;\n       \n        if (needResize) {\n          // Make the canvas the same size\n          canvas.width  = displayWidth;\n          canvas.height = displayHeight;\n        }\n       \n        return needResize;\n    }\n\n    #initTweakpane() {\n        if (this.pane) {\n            const maxFar = 700;\n\n            const cameraFolder = this.pane.addFolder({ title: 'Camera' });\n            this.#createTweakpaneSlider(cameraFolder, this.camera, 'near', 'near', 1, maxFar, null, () => this.#updateProjectionMatrix(this.gl));\n            this.#createTweakpaneSlider(cameraFolder, this.camera, 'far', 'far', 1, maxFar, null, () => this.#updateProjectionMatrix(this.gl));\n            const blurSettings = this.pane.addFolder({ title: 'Blur Settings' });\n            this.#createTweakpaneSlider(blurSettings, this.blur, 'radius', 'radius', 0, 30, 1);\n            this.#createTweakpaneSlider(blurSettings, this.blur, 'scale', 'scale', 1, 5, 0.1);\n        }\n    }\n\n    #createTweakpaneSlider(folder, obj, propName, label, min, max, stepSize = null, callback) {\n        const slider = folder.addBlade({\n            view: 'slider',\n            label,\n            min,\n            max,\n            step: stepSize,\n            value: obj[propName],\n        });\n        slider.on('change', e => {\n            obj[propName] = e.value;\n            if(callback) callback();\n        });\n    }\n}\n","#version 300 es\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_worldInverseTransposeMatrix;\nuniform vec3 u_cameraPosition;\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec3 v_position;\nout vec3 v_viewPosition;\nout vec3 v_normal;\nout vec2 v_uv;\nout vec3 v_surfaceToView;\n\nvoid main() {\n    v_uv = a_uv;\n    v_normal = (u_worldInverseTransposeMatrix * vec4(a_normal, 0.)).xyz;\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n    v_surfaceToView = u_cameraPosition - worldPosition.xyz;\n    v_position = a_position.xyz;\n    v_viewPosition = viewPosition.xyz;\n}\n","#version 300 es\n\nprecision highp float;\n\nuniform float u_frames;\n\nin vec3 v_position;\nin vec3 v_normal;\nin vec2 v_uv;\nin vec3 v_surfaceToView;\nin vec3 v_viewPosition;\n\nout vec4 outColor;\n\nfloat hash(vec2 p) {\n    p = fract(p * vec2(153.343, 414.3234));\n    p += dot(p, p + 44.463);\n    return fract(p.x * p.y);\n}\n\n//\tSimplex 3D Noise \n//\tby Ian McEwan, Ashima Arts\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nfloat snoise(vec3 v){ \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  // First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //  x0 = x0 - 0. + 0.0 * C \n  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n  // Permutations\n  i = mod(i, 289.0 ); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  // Gradients\n  // ( N*N points uniformly over a square, mapped onto an octahedron.)\n  float n_ = 1.0/7.0; // N=7\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n  //Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n  // Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\nfloat sparkle(vec2 p, float seed) {\n    vec2 id = floor(p);\n    vec2 suv = fract(p) * 2. - 1.;\n    \n    float r = hash(id);\n    float x = fract(r * 54.32);\n    float y = fract(r * 432.33);\n    vec2 offs = vec2(x, y) * 2. - 1.;\n    \n    float d = length(suv - offs);\n    float m = 1. - smoothstep(.0, .12, d);\n    \n    m *= pow(sin(seed + r), 5.);\n    return abs(m);\n}\n\nvoid main() {\n    vec3 pos = v_position;\n    vec3 n = normalize(v_normal);\n    vec3 v = normalize(v_surfaceToView);\n    vec3 l = vec3(0., 1., 0.);\n\n    float nDL = dot(n, l);\n\n    // calculate the reflection vector\n    float nDv = dot(n, v);\n    vec3 r = nDv * n * 2. - v;\n    r = normalize(r);\n\n    // fade the color to black by the distance from the center\n    float fade = 1. - smoothstep(0.2, 1., length(pos.xy) * 0.25);\n    float sparkleFade = 1. - smoothstep(0.9, 1., length(pos.xy) * 0.25);\n\n    // surface shade\n    float shade = nDL * 0.8 + (snoise(r * .5)) * 0.3;\n    shade *= 0.7;\n\n    // create the sand sparkle effect\n    float t = u_frames * 0.0;\n    float sLayer1 = sparkle(pos.xy * 6., t + abs(dot(r + v_viewPosition * 0.01, vec3(10.))));\n    float sLayer2 = sparkle(pos.xy * 12., t + abs(dot(r + v_viewPosition * 0.01, vec3(9.))));\n\n    outColor = vec4(vec3(shade * shade * fade + sLayer1 * sparkleFade + sLayer2 * sparkleFade * 0.7), 1.);\n    outColor.rgb += r * 0.02;\n}\n","#version 300 es\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\n\nin vec3 a_position;\nin vec2 a_uv;\n\nout vec3 v_position;\nout vec2 v_uv;\n\nvoid main() {\n    v_uv = a_uv;\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n}\n","#version 300 es\n\nprecision highp float;\n\nuniform float u_frames;\n\nin vec3 v_position;\nin vec2 v_uv;\n\nout vec4 outColor;\n\nfloat hash(vec2 p) {\n    p = fract(p * vec2(153.343, 414.3234));\n    p += dot(p, p + 44.463);\n    return fract(p.x * p.y);\n}\n\n//\tSimplex 3D Noise \n//\tby Ian McEwan, Ashima Arts\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nfloat snoise(vec3 v){ \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  // First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //  x0 = x0 - 0. + 0.0 * C \n  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n  // Permutations\n  i = mod(i, 289.0 ); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  // Gradients\n  // ( N*N points uniformly over a square, mapped onto an octahedron.)\n  float n_ = 1.0/7.0; // N=7\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n  //Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n  // Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\n\nvoid main() {\n    vec3 pos = v_position;\n    float n = snoise(vec3(vec2(v_uv.x * 0.001, v_uv.y * 2. - u_frames * 0.008) * 2., u_frames * 0.01)) * 2. - 1.;\n    vec3 color = vec3(0.); //vec3(0.8, 0.9, 1.) * (n * 0.5);\n    outColor = vec4(color, .7);\n    outColor = vec4(0.6, 0.8, 0.8, 1.) * 0.7;\n}\n","#version 300 es\n\nin vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0., 1.);\n}","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D u_colorTexture;\nuniform sampler2D u_depthTexture;\nuniform int u_maxCoCRadius;\nuniform float u_radiusScale;\n\nlayout(location = 0) out vec4 verticalBlurColor;\nlayout(location = 1) out vec4 diagnoalBlurColor;\n\n#pragma glslify: blur = require('./hex-blur.glsl', tex=texture, texSize=textureSize)\n\n#define PI 3.141593\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / vec2(textureSize(u_colorTexture, 0));\n\n    blur(\n        uv,\n        vec2(0., -1.),\n        u_maxCoCRadius,\n        u_radiusScale,\n        u_colorTexture,\n        u_depthTexture,\n        vec2(0.5),\n        verticalBlurColor\n    );\n\n    blur(\n        uv,\n        vec2(cos(PI / 6.), sin(PI / 6.)),\n        u_maxCoCRadius,\n        u_radiusScale,\n        u_colorTexture,\n        u_depthTexture,\n        vec2(0.5),\n        diagnoalBlurColor\n    );\n\n    diagnoalBlurColor = verticalBlurColor + diagnoalBlurColor;\n}","#version 300 es\n\nin vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0., 1.);\n}","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D u_verticalBlurTexture;\nuniform sampler2D u_diagonalBlurTexture;\nuniform sampler2D u_depthTexture;\nuniform int u_maxCoCRadius;\nuniform float u_radiusScale;\n\nlayout(location = 0) out vec4 outColor;\n\n#pragma glslify: blur = require('./hex-blur.glsl', tex=texture, texSize=textureSize)\n\n#define PI 3.141593\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / vec2(textureSize(u_verticalBlurTexture, 0));\n    vec4 verticalBlurColor = texture(u_verticalBlurTexture, uv);\n    vec4 diagnoalBlurColor = texture(u_diagonalBlurTexture, uv);\n    float depth = texture(u_depthTexture, uv).x;\n    vec4 resultColor1;\n    vec4 resultColor2;\n\n    blur(\n        uv,\n        vec2(cos(PI / 6.), sin(PI / 6.)),\n        u_maxCoCRadius,\n        u_radiusScale,\n        u_verticalBlurTexture,\n        u_depthTexture,\n        vec2(0.5),\n        resultColor1\n    );\n\n    blur(\n        uv,\n        vec2(cos((5. * PI) / 6.), sin((5. * PI) / 6.)),\n        u_maxCoCRadius,\n        u_radiusScale,\n        u_diagonalBlurTexture,\n        u_depthTexture,\n        vec2(0.5),\n        resultColor2\n    );\n\n    diagnoalBlurColor = (resultColor1 + resultColor2) * .5;\n\n    outColor = diagnoalBlurColor;\n}","#version 300 es\n\nin vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0., 1.);\n}","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D u_texture;\n\nout vec4 outColor;\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / vec2(textureSize(u_texture, 0));\n    vec4 color = texture(u_texture, uv);\n    float s1 = 0.5;\n    float s2 = 0.8;\n    vec4 boost = smoothstep(s1, s2, color) - smoothstep(s2, s2 + 0.1 , color);\n    outColor = color + boost.rrra * 0.6;\n}","import { Pane } from 'tweakpane';\nimport { HexagonalBokeh } from './hexagonal-bokeh';\n\nconst queryString = window.location.search;\nconst urlParams = new URLSearchParams(queryString);\nconst debugParam = urlParams.get('debug');\n\nlet DEBUG = debugParam !== null;\n\nif (process.env.NODE_ENV !== 'production') {\n    // Only runs in development and will be stripped in production builds.\n    DEBUG = true;\n}\n\nlet sketch;\nlet resizeTimeoutId;\n\nwindow.addEventListener('load', () => {\n    const canvas = document.body.querySelector('#c');\n\n    let pane;\n    if (DEBUG) {\n        pane = new Pane({ title: 'Settings' });\n    }\n\n    sketch = new HexagonalBokeh(canvas, pane, (sketch) => {\n        sketch.run(); \n    });\n});\n\nwindow.addEventListener('resize', () => {\n    if (sketch) {\n        if (resizeTimeoutId)\n            clearTimeout(resizeTimeoutId);\n\n        resizeTimeoutId = setTimeout(() => {\n            resizeTimeoutId = null;\n            sketch.resize();\n        }, 300);\n    }\n});\n\n\n"],"names":["global","factory","self","ReferenceError","instance","Constructor","TypeError","receiver","privateMap","has","get","value","descriptor","writable","privateSet","fn","$fb222e0933d810ce$var$isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","$fb222e0933d810ce$var$construct","Parent1","args1","Class1","Parent","args","Class","a","push","apply","Function","bind","_setPrototypeOf","arguments","$e5f9bd0c37e9914c$var$_defineProperties","target","props","i","length","enumerable","configurable","Object","defineProperty","key","protoProps","staticProps","obj","$7dc24fd3d8e84af6$var$getPrototypeOf","o1","setPrototypeOf","getPrototypeOf","o","__proto__","$5f25f83067750fb9$var$get","target1","property1","receiver1","property","base","object","hasOwnProperty","$7dc24fd3d8e84af6$export$2e2bcd8739ae039","$3ff79f9fa52f36c6$export$2e2bcd8739ae039","desc","getOwnPropertyDescriptor","$ac93fd2313270fd8$var$setPrototypeOf","p1","p","subClass","superClass","create","constructor","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","forEach","$7dbcf7086e8d10dc$export$2e2bcd8739ae039","iter","Symbol","iterator","Array","from","arr","isArray","$6e00726c30bb8aa8$export$2e2bcd8739ae039","$8664303016091545$export$2e2bcd8739ae039","$9e1e3aff84b72d71$export$2e2bcd8739ae039","arr2","$c0e5c3a46846db0d$export$2e2bcd8739ae039","$9a10eb5a4ae3d243$export$2e2bcd8739ae039","$08b63c45f54847ee$export$2e2bcd8739ae039","Derived","hasNativeReflectConstruct","Boolean","valueOf","$d60c94504fa4a111$export$2e2bcd8739ae039","result","Super","NewTarget","this","$87fe16ba8ff029a3$export$2e2bcd8739ae039","undefined","exports","Semver","text","ref","$d8de0eb6e0dd5f0d$export$2e2bcd8739ae039","split","core","prerelease","coreComps","major","parseInt","minor","patch","join","BladeApi","controller","controller_","viewProps","disabled","set","hidden","TpEvent","TpChangeEvent","presetKey","last","TpUpdateEvent","TpFoldEvent","expanded","isEmpty","deepEqualsArray","a1","a2","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","context","name","nomatchingcontroller","nomatchingview","JSON","stringify","params","notbindable","propertynotfound","shouldneverhappen","TpError","config","_a","message","type","stack","Error","BindingTarget","opt_id","obj_","key_","presetKey_","valueObj","read","isBindable","notBindable","propertyNotFound","ButtonApi","label","valueController","title","eventName","handler","bh","emitter","on","_this","Emitter","observers_","observers","observer","event","PREFIX","ClassName","viewName","opt_elementName","opt_modifier","extractValue","ev","rawValue","bindValue","applyValue","h1","h2","input","bindValueMap","valueMap","valueToClassName","elem","className","active","classList","add","remove","applyClass","bindValueToTextContent","textContent","className$q","ButtonView","doc","element","createElement","bindClassModifiers","buttonElem","bindDisabled","appendChild","buttonElement","titleElem","ButtonController","onClick_","view","addEventListener","emit","sender","BoundValue","initialValue","constraint_","constraint","equals_","equals","v1","v2","rawValue_","setRawValue","forceEmit","options","opts","constrainedValue","constrain","PrimitiveValue","value_","createValue","ValueMap","valMap_","_this1","_loop","reduce","assign","createCore","createParamsParserBuilder","parse","optional","v","succeeded","createParamsParserBuilders","custom","boolean","number","string","function","constant","raw","keyToParserMap","tmp","parser","parseObject","array","itemParser","parseItem","item","$44ff19cc49d55455$export$2e2bcd8739ae039","ParamsParsers","required","parseParams","className$p","POS_TO_CLASS_NAME_MAP","veryfirst","first","verylast","BladeController","parent_","blade","pos","handleDispose","parentElement","removeChild","disposeElement","SVG_NS","forceReflow","offsetHeight","supportsTouch","ontouchstart","getWindowDocument","document","ICON_ID_TO_INNER_HTML_MAP","check","dropdown","p2dpad","createSvgIconElement","iconId","createElementNS","innerHTML","insertElementAt","index","insertBefore","children","removeElement","removeChildElements","findNextTarget","relatedTarget","explicitOriginalTarget","className$o","LabelView","labelElem","childNodes","removeChildNodes","frag","createDocumentFragment","map","line","createTextNode","lineNode","createLabelNode","labelElement","valueElem","valueElement","LabelController","ButtonBladePlugin","id","accept","fromObject","api","ValueBladeController","createBlade","positions","Foldable","ValueMap1","styleExpanded","exHeight","expandedClassName","coreObj","completed","expandedHeight","shouldFixHeight","temporaryExpanded","applyHeight","foldable","style","height","styleHeight","bindFoldable","folder","containerElement","callback","t","clientHeight","transition","propertyName","RackLikeApi","rackApi","rackApi_","NestedOrderedSet","extract","items_","cache_","Set","onSubListAdd_","onSubListRemove_","extract_","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","allItems","next","done","err","return","item1","opt_index","includes","shouldNeverHappen","splice","subList","root","indexOf","delete","off","InputBindingApi","onBindingChange_","emitter_","binding","InputBindingController","MonitorBindingApi","onBindingUpdate_","MonitorBindingController","ticker","dispose","findSubBladeApiSet","RackApi","getApiByController","apiSet","api1","find","createBindingTarget","pool","onRackAdd_","onRackRemove_","onRackInputChange_","onRackMonitorUpdate_","apiSet_","pool_","rack","bc","setUpApi_","opt_params","ownerDocument","createInput","createMonitor","addBlade","addFolderAsBlade","addButtonAsBlade","addSeparatorAsBlade","addTabAsBlade","gapi","createBladeApi","bladeController","isRoot","api3","FolderApi","rackController","addInput","addMonitor","addFolder","addButton","addSeparator","addTab","RackLikeController","PlainView","findSubRack","RackController","findSubBladeControllerSet","BladeRack","onBladePositionsChange_","onSetAdd_","onSetRemove_","onChildDispose_","onChildPositionsChange_","onChildInputChange_","onChildMonitorUpdate_","onChildValueChange_","onChildViewPropsChange_","onDescendantLayout_","onDescendantInputChange_","onDescendantMonitorUpdate_","blade_","bcSet_","items","parent","controllerClass","updatePositions_","visibleItems","firstVisibleItem","lastVisibleItem","ps","_ev","bcs","b","findInputBindingController","findMonitorBindingController","findValueBladeController","_","bladeContainerClassName","FolderView","className_","foldable_","bindExpandedClass","titleElement","markElem","containerElem","FolderController","rc","onTitleClick_","FolderBladePlugin","LabeledValueController","SeparatorApi","className$n","SeparatorView","hrElem","SeparatorController","SeparatorBladePlugin","className$m","valueToModifier","modifier","ViewProps","ValueMap2","tabIndex","disposed","opt_initialValue","_b","className$l","TabItemView","selected","TabItemController","TabPageController","onItemClick_","ic_","itemProps","cc_","itemController","contentController","TabPageApi","contentRackApi","TabApi","onPageAdd_","onPageRemove_","pageApiMap_","Map","pageSet","pc","setUpPageApi_","api4","className$k","TabView","empty","itemsElem","itemsElement","contentsElem","contentsElement","TabController","cr","onPageSelectedChange_","pageSet_","empty_","applyPages_","keepSelection_","firstSelIndex","findIndex","TabBladePlugin","pages","c","createBladeController","plugin","ac","ManualTicker","IntervalTicker","interval","disabled_","timerId_","onTick_","doc_","interval_","setTimer_","inactive","clearTimer_","win","defaultView","clearInterval","setInterval","CompositeConstraint","constraints","findConstraint","constraintClass","tmpResult","sc","ListConstraint","RangeConstraint","maxValue","max","minValue","min","Math","StepConstraint","step","round","className$j","ListView","onValueChange_","props_","selectElem","optionElem","dataset","String","selectElement","update_","ListController","onSelectChange_","optElem","currentTarget","selectedOptions","itemIndex","Number","className$i","PopupView","shows","PopupController","className$h","TextView","onChange_","inputElem","inputElement","refresh","formatter","TextController","onInputChange_","parser_","parsedValue","boolFromUnknown","BooleanFormatter","boolToString","NumberLiteralNode","BINARY_OPERATION_MAP","pow","BinaryOperationNode","operator","left","right","op","evaluate","UNARY_OPERATION_MAP","UnaryOperationNode","expr","expression","combineReader","parsers","cursor","readWhitespace","m","substr","match","readDecimalDigits","readExponentPart","toLowerCase","si","ds","sign","sds","readSignedInteger","readDecimalIntegerLiteral","ch","nzd","readNonZeroDigit","readDecimalLiteral","dil","dot","dds","readNonDecimalIntegerLiteral","prefix","bds","parseBinaryDigits","ods","readOctalDigits","hds","readHexDigits","readNumericLiteral","parsePrimaryExpression","num","evaluable","parseLiteral","parseExpression","cl","parseParenthesizedExpression","readBinaryOperator","ops","op1","startsWith","parseBinaryOperationExpression","exprParser","firstExpr","nextExpr","createBinaryOperationExpressionParser","parseUnaryExpression","parseNumber","r","parseEcmaNumberExpression","numberFromUnknown","pv","numberToString","createNumberFormatter","digits","toFixed","innerFormatter","formatPercentage","stringFromUnknown","formatString","fillBuffer","buffer","bufferSize","initializeBuffer","connectValues","param","primary","secondary","forward","backward","changing","preventFeedback","getStepForKey","baseStep","altKey","shiftKey","upKey","downKey","getVerticalStepKeys","getHorizontalStepKeys","isArrowKey","isVerticalArrowKey","computeOffset$1","rect","getBoundingClientRect","x","pageX","scrollX","y","pageY","scrollY","top","PointerHandler","lastTouch_","onDocumentMouseMove_","onDocumentMouseUp_","onMouseDown_","onTouchEnd_","onTouchMove_","onTouchStart_","elem_","passive","offset","bounds","width","point","preventDefault","focus","data","computePosition_","removeEventListener","touch","targetTouches","clientX","clientY","mapRange","start1","end1","start2","end2","getDecimalDigits","replace","constrainRange","loopRange","className$g","NumberTextView","arrayPosition","onDraggingChange_","dragging_","dragging","knobElem","knobElement","guideElem","bodyElem","guideBodyElem_","headElem","guideHeadElem_","tooltipElem","tooltipElem_","aox","adx","setAttributeNS","NumberTextController","originRawValue_","onInputKeyDown_","onInputKeyUp_","onPointerDown_","onPointerMove_","onPointerUp_","baseStep_","ph","dx","computeDraggingValue_","className$f","SliderView","trackElem","bindTabIndex","trackElement","SliderController","onKeyDown_","onKeyUp_","onPointerDownOrMove_","ptHandler_","d","handlePointerEvent_","className$e","SliderTextView","sliderElem","sliderView_","sliderView","textElem","textView_","textView","SliderTextController","sliderC_","sliderProps","textC_","textProps","writePrimitive","write","parseListOptions","parsePickerLayout","parsePointDimensionParams","normalizeListOptions","createListConstraint","findListItems","getSuitableDecimalDigits","getBaseStep","findStep","getSuitableDraggingScale","abs","floor","log10","className$d","CheckboxView","wrapperElem","checked","CheckboxController","BooleanInputPlugin","reader","_args","lc","writer","className$c","ColorView","swatchElem","swatchElement","textElement","pickerLayout","pickerElem","pickerElement","hsvToRgb","h","s","rp","gp","bp","hp","sp","vp","ref6","ref7","ref8","ref9","ref10","removeAlphaComponent","comps","appendAlphaComponent","alpha","MODE_CONVERTER_MAP","hsl","l","hsv","sd","rgb","lp","ref1","ref2","ref3","ref4","ref5","g","cmax","cmin","CONSTRAINT_MAP","isRgbColorComponent","Color","mode","mode_","comps_","opt_mode","components","fromMode","toMode","_fromMode","rgbComps","getComponents","color","toRgbaObject","isRgbColorObject","comps1","comps2","className$b","ColorPickerView","alphaViews_","hsvElem","svElem","svPaletteView_","svPaletteView","hElem","hPaletteView_","hPaletteView","rgbElem","alphaViews","palette","aElem","apElem","atElem","elems","modeSelectElement","textViews","parseColorInputParams","picker","getBaseStepForColor","forAlpha","parseCssNumberOrPercentage","parseFloat","ANGLE_TO_DEG_MAP","deg","angle","grad","rad","PI","turn","parseCssNumberOrAngle","unit","NOTATION_TO_PARSER_MAP","isNaN","mRgb","mRrggbb","getColorNotation","notation","subparser","CompositeColorParser","hasAlphaComponent","colorFromString","cv","black","zerofill","comp","hex","colorToHexRgbString","hexes","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","colorToFunctionalRgbaString","aFormatter","rgbFormatter","NOTATION_TO_STRINGIFIER_MAP","formatters","getColorStringifier","className$a","APaletteView","barElem","colorElem","colorElem_","markerElem","markerElem_","previewElem","previewElem_","leftColor","rightColor","gradientComps","background","backgroundColor","APaletteController","className$9","ColorTextView","modeElem","modeElem_","createModeSelectElement","modeMarkerElem","textsElem","textsElem_","textViews_","applyTextViews_","colorMode","compElem","FORMATTER","MODE_TO_CONSTRAINT_MAP","createComponentController","draggingScale","ColorTextController","onModeSelectChange_","ccs_","createComponentControllers_","cc","ccs","cs","_this2","pickedMode","className$8","HPaletteView","HPaletteController","hue","className$7","SvPaletteView","canvasElem","canvasElement","ctx","getContext","hsvComps","imgData","getImageData","iy","ix","putImageData","SvPaletteController","saturation","dv","ColorPickerController","hPaletteC_","svPaletteC_","alphaIcs_","supportsAlpha","className$6","ColorSwatchView","swatchElem_","ColorSwatchController","ColorController","onButtonBlur_","onButtonClick_","onPopupChildBlur_","onPopupChildKeydown_","swatchC_","popC_","pickerC","allFocusableElements","pickerC_","nextTarget","contains","colorFromObject","isColorObject","colorToRgbNumber","colorToRgbaNumber","colorFromRgbNumber","colorFromRgbaNumber","writeRgbaColorObject","writeProperty","writeRgbColorObject","shouldSupportAlpha$1","inputParams","createFormatter$1","NumberColorInputPlugin","colorToNumber","ObjectColorInputPlugin","isRgbaColorObject","StringColorInputPlugin","createColorStringWriter","stringifier","PointNdConstraint","asm_","assembly","toComponents","fromComponents","className$5","PointNdTextView","axisElem","PointNdTextController","acs_","axes","createAxisController","createConstraint$4","createStepConstraint","createRangeConstraint","estimateSuitableRange","findRange","NumberInputPlugin","format","Point2d","Point2dAssembly","$fb222e0933d810ce$export$2e2bcd8739ae039","className$4","Point2dView","className$3","Point2dPickerView","onFoldableChange_","invertsY_","invertsY","maxValue_","layout","padElem","padElement","svgElem","svgElem_","xAxisElem","yAxisElem","lineElem","lineElem_","px","py","ipy","computeOffset","baseSteps","Point2dPickerController","onPadKeyDown_","onPadKeyUp_","baseSteps_","dy","Point2dController","onPadButtonBlur_","onPadButtonClick_","padC","point2dFromUnknown","isObject","writePoint2d","createDimensionConstraint$2","getSuitableMaxDimensionValue","createAxis$2","shouldInvertY","yParams","inverted","Point2dInputPlugin","xc","yc","xr","yr","Point3d","z","Point3dAssembly","point3dFromUnknown","writePoint3d","createDimensionConstraint$1","createAxis$1","Point3dInputPlugin","Point4d","w","Point4dAssembly","point4dFromUnknown","writePoint4d","createDimensionConstraint","Point4dInputPlugin","StringInputPlugin","Constants","defaultInterval","defaultLineCount","className$2","MultiLogView","onValueUpdate_","formatter_","textareaElem","lineCount","readOnly","textareaElem_","shouldScroll","scrollTop","scrollHeight","lines","MultiLogController","className$1","SingleLogView","values","lastValue","SingleLogController","BooleanMonitorPlugin","GraphCursor","index_","className1","GraphLogView","onCursorChange_","minValue_","cursor_","maxIndex","points","tx","ty","GraphLogController","onGraphMouseMove_","onGraphMouseLeave_","onGraphPointerDown_","onGraphPointerMove_","onGraphPointerUp_","offsetX","createFormatter","shouldShowGraph","NumberMonitorPlugin","defaultBufferSize","_c","createGraphMonitor","createTextMonitor","StringMonitorPlugin","multiline","InputBinding","targetValue","write_","MonitorBinding","reader_","newValue","newBuffer","slice","createTrimmedBuffer","createPushedBuffer","createTicker","PluginPool","pluginsMap_","blades","inputs","monitors","unshift","valueArgs","createInputBindingController","P","bindingArgs","createMonitorBindingController","ListApi","SliderApi","sliderController","TextApi","ListBladePlugin","ic","RootApi","preset","targets","importPresetJson","ibc","exportPresetJson","mbc","RootController","SliderBladePlugin","vc","TextBladePlugin","embedStyle","css","querySelector","styleElem","tpStyle","head","Pane","opt_config","register","createDefaultPluginPool","rootController","containerElem_","container","body","createDefaultWrapperElement","usesDefaultWrapper_","setUpDefaultPlugins_","alreadyDisposed","reciever","parentElem","bundle","plugins","embedPluginStyle_","getAll","registerPlugin","VERSION","$ad914f4ec673f32c$exports","define","amd","globalThis","Tweakpane","$bddce99c0c610ba2$export$fd293b15f47e270","$bddce99c0c610ba2$export$b67359430d3b1b2","Float32Array","$bddce99c0c610ba2$export$5ada478c8a628231","random","$2e616e7f2b93d8b0$export$185802fd694ee1f5","out","$2e616e7f2b93d8b0$export$9cd59f9826255e47","$2e616e7f2b93d8b0$export$784d13d8ee351f07","$2e616e7f2b93d8b0$export$a82be99ed2a44a7d","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","$2e616e7f2b93d8b0$export$adaa4cf7ef1b65be","$2e616e7f2b93d8b0$export$f0954fd7d5368655","$2e616e7f2b93d8b0$export$9cb09a71b7d66923","a01","a02","a03","a12","a13","a23","$2e616e7f2b93d8b0$export$6897c284b6f9f4dc","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","$2e616e7f2b93d8b0$export$33f3c024b4ae00a1","$2e616e7f2b93d8b0$export$a04698f914c55ed9","$2e616e7f2b93d8b0$export$2060d2db72cce88f","b0","b1","b2","b3","$2e616e7f2b93d8b0$export$d73ee8ef04f5226a","$2e616e7f2b93d8b0$export$dcdf75081b88279d","$2e616e7f2b93d8b0$export$bb628a54ab399bc9","axis","b12","b20","b21","b22","len","hypot","sin","cos","$2e616e7f2b93d8b0$export$a59c8716592e09af","$2e616e7f2b93d8b0$export$cf71e4d4ca4d1cfd","$2e616e7f2b93d8b0$export$ea6eae3365de5b9c","$2e616e7f2b93d8b0$export$bc9e79e74e9fddf6","$2e616e7f2b93d8b0$export$832ca188ffb1955d","$2e616e7f2b93d8b0$export$926fc125ff3c666c","$2e616e7f2b93d8b0$export$dd47cc2f828c32ef","$2e616e7f2b93d8b0$export$7dc997d67d2b7f33","$2e616e7f2b93d8b0$export$ad5ddaedc8f405df","$2e616e7f2b93d8b0$export$9545ac307f2a256b","q","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","$2e616e7f2b93d8b0$export$ff497f2be31cc6a","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","$2e616e7f2b93d8b0$export$202e99f82f7f0395","mat","$2e616e7f2b93d8b0$export$71dc54d92bd04b57","$2e616e7f2b93d8b0$export$df3937d3b537df0a","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","sqrt","$2e616e7f2b93d8b0$export$ddf9c55c9f2be172","sx","sy","sz","$2e616e7f2b93d8b0$export$1def1f860edc4b1f","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","$2e616e7f2b93d8b0$export$2ff2bbe382249af7","yx","zx","zy","$2e616e7f2b93d8b0$export$89b5708c387cac6c","bottom","near","far","rl","tb","nf","$2e616e7f2b93d8b0$export$4cf19729ec9a96b8","fovy","aspect","f","tan","Infinity","$2e616e7f2b93d8b0$export$541149539f3a4684","$2e616e7f2b93d8b0$export$294bba99a6af0c0c","$2e616e7f2b93d8b0$export$58ae211c788e338f","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","$2e616e7f2b93d8b0$export$c5f65ef3eb668f27","lr","bt","$2e616e7f2b93d8b0$export$4f2167e613cfc87b","$2e616e7f2b93d8b0$export$b1d31ea7b4d854e","$2e616e7f2b93d8b0$export$d924e14fd6d9aa66","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","$2e616e7f2b93d8b0$export$aa67782f4dc9e52c","$2e616e7f2b93d8b0$export$42d51816ce590c93","$2e616e7f2b93d8b0$export$326827e8268e9cdb","$2e616e7f2b93d8b0$export$e16d8520af44a096","$2e616e7f2b93d8b0$export$4e2d2ead65e5f7e3","$2e616e7f2b93d8b0$export$c697bed75648cdb7","$2e616e7f2b93d8b0$export$553579f63bdd7137","$2e616e7f2b93d8b0$export$f2599a5cf1109d8","$2e616e7f2b93d8b0$export$e9bab7fafb253603","a0","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","$2e616e7f2b93d8b0$export$6e3a27864ab166fe","$2e616e7f2b93d8b0$export$f93b5905241a7cca","$b817ce0f5cdadb29$export$185802fd694ee1f5","$b817ce0f5cdadb29$export$9cd59f9826255e47","$b817ce0f5cdadb29$export$f24224f1c91d8156","$b817ce0f5cdadb29$export$a82be99ed2a44a7d","$b817ce0f5cdadb29$export$784d13d8ee351f07","$b817ce0f5cdadb29$export$adaa4cf7ef1b65be","$b817ce0f5cdadb29$export$e16d8520af44a096","$b817ce0f5cdadb29$export$4e2d2ead65e5f7e3","$b817ce0f5cdadb29$export$2060d2db72cce88f","$b817ce0f5cdadb29$export$cd007d971a5a2143","$b817ce0f5cdadb29$export$803ce6b71a0a94b2","ceil","$b817ce0f5cdadb29$export$a3fe094919f356fd","$b817ce0f5cdadb29$export$96ec731ed4dcb222","$b817ce0f5cdadb29$export$8960430cfd85939f","$b817ce0f5cdadb29$export$2077e0241d6afd3c","$b817ce0f5cdadb29$export$dcdf75081b88279d","$b817ce0f5cdadb29$export$19cedf1da84ba854","$b817ce0f5cdadb29$export$9f17032d917177de","$b817ce0f5cdadb29$export$88e6ebb4fe54f538","$b817ce0f5cdadb29$export$ab44e1323ffc8376","$b817ce0f5cdadb29$export$aef51622e549b8b0","$b817ce0f5cdadb29$export$70ae2c07e401031b","$b817ce0f5cdadb29$export$a3295358bff77e","$b817ce0f5cdadb29$export$fc1400facf92c78","$b817ce0f5cdadb29$export$94132a0e348806d4","$b817ce0f5cdadb29$export$bb646b20bb93d339","$b817ce0f5cdadb29$export$3a89f8d6f6bf6c9f","$b817ce0f5cdadb29$export$ae8865616f30561c","factorTimes2","factor1","factor2","factor3","factor4","$b817ce0f5cdadb29$export$b9c5f84610baddaf","inverseFactor","inverseFactorTimesTwo","$b817ce0f5cdadb29$export$4385e60b38654f68","zScale","$b817ce0f5cdadb29$export$5ffbd13800309d59","$b817ce0f5cdadb29$export$f0bfa0a0024626ee","$b817ce0f5cdadb29$export$c32adef9e939ce85","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","$b817ce0f5cdadb29$export$a59c8716592e09af","$b817ce0f5cdadb29$export$cf71e4d4ca4d1cfd","$b817ce0f5cdadb29$export$ea6eae3365de5b9c","$b817ce0f5cdadb29$export$944b09d2ad10b378","mag","cosine","acos","$b817ce0f5cdadb29$export$7f9972325ebfd559","$b817ce0f5cdadb29$export$42d51816ce590c93","$b817ce0f5cdadb29$export$f2599a5cf1109d8","$b817ce0f5cdadb29$export$e9bab7fafb253603","vec","$b817ce0f5cdadb29$export$f93b5905241a7cca","$b817ce0f5cdadb29$export$6e3a27864ab166fe","$b817ce0f5cdadb29$export$159d9494db57879b","$b817ce0f5cdadb29$export$6c4a311cc157c764","$b817ce0f5cdadb29$export$2422cd6c492a8b3a","$b817ce0f5cdadb29$export$99d8dd3f32a3435","$b817ce0f5cdadb29$export$4b80e395e36b5a56","stride","count","arg","$3843f3adc77d8e3a$export$f24224f1c91d8156","$3843f3adc77d8e3a$export$ab44e1323ffc8376","$3612f84116b201a9$export$185802fd694ee1f5","$3612f84116b201a9$export$f0954fd7d5368655","$3612f84116b201a9$export$4286ddefc8f49512","$3612f84116b201a9$export$3f70be5e7d7dc51","out_axis","$3612f84116b201a9$export$b363da9ded343252","dotproduct","$3612f84116b201a9$export$94132a0e348806d4","$3612f84116b201a9$export$2060d2db72cce88f","$3612f84116b201a9$export$a59c8716592e09af","$3612f84116b201a9$export$cf71e4d4ca4d1cfd","$3612f84116b201a9$export$ea6eae3365de5b9c","$3612f84116b201a9$export$fb72b72e8d764d4e","$3612f84116b201a9$export$b310ec824aaee37f","et","exp","$3612f84116b201a9$export$876cb1b29620556f","atan2","log","$3612f84116b201a9$export$9c297f60e22e3389","$3612f84116b201a9$export$dcdf75081b88279d","$3612f84116b201a9$export$1544d9bc2995de08","omega","cosom","sinom","scale0","scale1","$3612f84116b201a9$export$4385e60b38654f68","u1","u2","u3","sqrt1MinusU1","sqrtU1","$3612f84116b201a9$export$6897c284b6f9f4dc","invDot","$3612f84116b201a9$export$7679f47e72c62560","$3612f84116b201a9$export$272a1eb8e5a4b55b","fRoot","fTrace","j","k","$3612f84116b201a9$export$7a404a587ea85af","halfToRad","cx","cy","cz","$3612f84116b201a9$export$42d51816ce590c93","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","$3612f84116b201a9$export$9cd59f9826255e47","$3612f84116b201a9$export$a82be99ed2a44a7d","$3612f84116b201a9$export$784d13d8ee351f07","$3612f84116b201a9$export$adaa4cf7ef1b65be","$3612f84116b201a9$export$e16d8520af44a096","$3612f84116b201a9$export$6e3a27864ab166fe","$3612f84116b201a9$export$3a89f8d6f6bf6c9f","$3612f84116b201a9$export$f24224f1c91d8156","$3612f84116b201a9$export$fc1400facf92c78","$3612f84116b201a9$export$ab44e1323ffc8376","$3612f84116b201a9$export$99d8dd3f32a3435","$3612f84116b201a9$export$a3295358bff77e","$3843f3adc77d8e3a$export$fc1400facf92c78","$3612f84116b201a9$export$f2599a5cf1109d8","$3612f84116b201a9$export$e9bab7fafb253603","$3612f84116b201a9$export$72d66f5842c00904","$3612f84116b201a9$export$699b0866ca50f6cb","$3612f84116b201a9$export$937ca0a544b2d712","$fb2eb0662db21c15$export$5dc878ab9e1f1ddf","canvas","camera","updateCallback","pointerDown","pointerDownPos","pointerPos","followPos","prevFollowPos","phi","theta","touchAction","pointerDownCameraUp","pointerDownRotation","rotation","delta","$d48ddae4a704ec47$export$2e2bcd8739ae039","$3612f84116b201a9$exports","fromEuler","orbit","$b817ce0f5cdadb29$exports","transformQuat","position","distance","$d30a187f4772cbec$var$Grad","dot2","dot3","$d30a187f4772cbec$var$grad3","$d30a187f4772cbec$var$p","$d30a187f4772cbec$var$perm","$d30a187f4772cbec$var$gradP","$d30a187f4772cbec$export$7f7d45814fc23e4d","$d30a187f4772cbec$var$F2","$d30a187f4772cbec$var$G2","_render","WeakSet","_renderBlurPass","_init","_createXYPlaneGeometry","_createBuffer","_initOrbitControls","_createFramebuffer","_makeVertexArray","_createShader","_createProgram","_setFramebuffer","_createAndSetupTexture","_resizeTextures","_updateCameraMatrix","_updateProjectionMatrix","_resizeCanvasToDisplaySize","_initTweakpane","_createTweakpaneSlider","$82a6767c6f190a98$export$501e333efb002ee5","pane","oninit","_time","_frames","_deltaTime","_isDestroyed","matrix","$2e616e7f2b93d8b0$exports","fromValues","radius","scale","init","gl","resizeCanvasToDisplaySize","viewport","drawingBufferWidth","drawingBufferHeight","resizeTextures","updateProjectionMatrix","time","$8670bb7693f1be6c$export$2e2bcd8739ae039","control","update","worldInvers","invert","drawUniforms","u_worldMatrix","transpose","u_worldInverseTransposeMatrix","render","requestAnimationFrame","run","WeakMap","enable","DEPTH_TEST","disable","CULL_FACE","setFramebuffer","drawFramebuffer","drawFramebufferWidth","drawFramebufferHeight","useProgram","drawProgram","bindVertexArray","objectVAO","uniformMatrix4fv","drawLocations","u_viewMatrix","u_projectionMatrix","uniform3f","u_cameraPosition","uniform1f","u_frames","clearBufferfv","COLOR","DEPTH","drawElements","TRIANGLES","objectBuffers","numElem","UNSIGNED_SHORT","BLEND","blendFunc","ONE","SRC_COLOR","blendEquation","FUNC_SUBTRACT","portalProgram","centerObjectVAO","portalLocations","portalUniforms","drawArrays","centerObjectBuffers","bindFramebuffer","READ_FRAMEBUFFER","DRAW_FRAMEBUFFER","blitFramebuffer","COLOR_BUFFER_BIT","NEAREST","DEPTH_BUFFER_BIT","renderBlurPass","hexBlur1Framebuffer","hexBlur1Program","hexBlur1Locations","u_colorTexture","colorTexture","u_depthTexture","depthTexture","u_radiusScale","blur","u_maxCoCRadius","hexBlur2Framebuffer","hexBlur2Program","hexBlur2Locations","u_verticalBlurTexture","hex1VerticalBlurTexture","u_diagonalBlurTexture","hex1DiagonalBlurTexture","clearColor","clear","compositeProgram","quadVAO","uniform1i","compositeLocations","u_texture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","hex2BlurTexture","quadBuffers","fbo","program","locTex","locFloat","locInt","ndx","loc","_param","texture","antialias","$45c6f556fa958784$export$2e2bcd8739ae039","createProgram","$parcel$interopDefault","a_position","a_normal","a_uv","getAttribLocation","getUniformLocation","rotate","translate","objectGeometry","createXYPlaneGeometry","n","xin","yin","i1","j1","gi0","gi1","gi2","t0","t1","t2","$d30a187f4772cbec$export$d2c234accf62d50d","lw","asin","createBuffer","vertices","normal","normals","uv","uvs","makeVertexArray","indices","quadPositions","pR","rot","centerObjectPositions","clientWidth","createFramebuffer","FRAMEBUFFER","depthRenderbuffer","createRenderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorageMultisample","getParameter","MAX_SAMPLES","DEPTH_COMPONENT32F","framebufferRenderbuffer","DEPTH_ATTACHMENT","colorRenderbuffer","RGBA8","COLOR_ATTACHMENT0","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","console","error","createAndSetupTexture","texImage2D","DEPTH_COMPONENT","FLOAT","framebufferTexture2D","LINEAR","RGBA","UNSIGNED_BYTE","resize","updateCameraMatrix","initOrbitControls","initTweakpane","wSegments","hSegments","distort","wOff","dd","cross","normalize","iy1","ix1","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","colorAttachements","drawBuffers","attachmentPoint","bufLocNumElmPairs","va","createVertexArray","_value","enableVertexAttribArray","vertexAttribPointer","indexBuffer","ELEMENT_ARRAY_BUFFER","Uint16Array","createShader","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","shaderSources","transformFeedbackVaryings","attribLocations","VERTEX_SHADER","FRAGMENT_SHADER","attachShader","SEPARATE_ATTRIBS","attrib","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","minFilter","magFilter","createTexture","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","targetTo","perspective","displayWidth","displayHeight","needResize","cameraFolder","createTweakpaneSlider","blurSettings","propName","stepSize","slider","$3015b282b063971c$var$sketch","$3015b282b063971c$var$resizeTimeoutId","$3015b282b063971c$var$queryString","window","location","search","$3015b282b063971c$var$DEBUG","URLSearchParams","sketch","clearTimeout","setTimeout"],"version":3,"file":"index.255df7e2.js.map"}