{"mappings":"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","sources":["node_modules/tweakpane/dist/tweakpane.js","node_modules/@swc/helpers/src/_assert_this_initialized.js","node_modules/@swc/helpers/src/_class_call_check.js","node_modules/@swc/helpers/src/_class_private_field_get.js","node_modules/@swc/helpers/src/_class_private_field_set.js","node_modules/@swc/helpers/src/_class_private_method_get.js","node_modules/@swc/helpers/src/_construct.js","node_modules/@swc/helpers/src/_create_class.js","node_modules/@swc/helpers/src/_define_property.js","node_modules/@swc/helpers/src/_get_prototype_of.js","node_modules/@swc/helpers/src/_get.js","node_modules/@swc/helpers/src/_super_prop_base.js","node_modules/@swc/helpers/src/_set_prototype_of.js","node_modules/@swc/helpers/src/_inherits.js","node_modules/@swc/helpers/src/_object_spread.js","node_modules/@swc/helpers/src/_iterable_to_array.js","node_modules/@swc/helpers/src/_sliced_to_array.js","node_modules/@swc/helpers/src/_array_with_holes.js","node_modules/@swc/helpers/src/_non_iterable_rest.js","node_modules/@swc/helpers/src/_to_consumable_array.js","node_modules/@swc/helpers/src/_array_without_holes.js","node_modules/@swc/helpers/src/_non_iterable_spread.js","node_modules/@swc/helpers/src/_possible_constructor_return.js","node_modules/@swc/helpers/src/_type_of.js","node_modules/@swc/helpers/src/_create_super.js","node_modules/@swc/helpers/src/_is_native_reflect_construct.js","node_modules/gl-matrix/esm/common.js","node_modules/gl-matrix/esm/mat4.js","node_modules/gl-matrix/esm/mat3.js","node_modules/gl-matrix/esm/vec3.js","node_modules/gl-matrix/esm/vec4.js","node_modules/gl-matrix/esm/quat.js","src/orbit-control.js","src/noise.js","src/hexagonal-bokeh.js","src/shader/draw.vert","src/shader/draw.frag","src/shader/portal.vert","src/shader/portal.frag","src/shader/hex-blur-1.vert","src/shader/hex-blur-1.frag","src/shader/hex-blur-2.vert","src/shader/hex-blur-2.frag","src/shader/composite.vert","src/shader/composite.frag","src/app.js"],"sourcesContent":["/*! Tweakpane 3.0.7 (c) 2016 cocopon, licensed under the MIT license. */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Tweakpane = {}));\n})(this, (function (exports) { 'use strict';\n\n    /***\n     * A simple semantic versioning perser.\n     */\n    class Semver {\n        /**\n         * @hidden\n         */\n        constructor(text) {\n            const [core, prerelease] = text.split('-');\n            const coreComps = core.split('.');\n            this.major = parseInt(coreComps[0], 10);\n            this.minor = parseInt(coreComps[1], 10);\n            this.patch = parseInt(coreComps[2], 10);\n            this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n        }\n        toString() {\n            const core = [this.major, this.minor, this.patch].join('.');\n            return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n        }\n    }\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n    class TpUpdateEvent extends TpEvent {\n        constructor(target, value, presetKey) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n        }\n    }\n    class TpFoldEvent extends TpEvent {\n        constructor(target, expanded) {\n            super(target);\n            this.expanded = expanded;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) {\n            return false;\n        }\n        for (let i = 0; i < a1.length; i++) {\n            if (a1[i] !== a2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n    }\n\n    class BindingTarget {\n        constructor(obj, key, opt_id) {\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        static isBindable(obj) {\n            if (obj === null) {\n                return false;\n            }\n            if (typeof obj !== 'object') {\n                return false;\n            }\n            return true;\n        }\n        get key() {\n            return this.key_;\n        }\n        get presetKey() {\n            return this.presetKey_;\n        }\n        read() {\n            return this.obj_[this.key_];\n        }\n        write(value) {\n            this.obj_[this.key_] = value;\n        }\n        writeProperty(name, value) {\n            const valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) {\n                throw TpError.notBindable();\n            }\n            if (!(name in valueObj)) {\n                throw TpError.propertyNotFound(name);\n            }\n            valueObj[name] = value;\n        }\n    }\n\n    class ButtonApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.valueController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.valueController.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.valueController.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$q = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$q());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$q('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$q('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const changed = !this.equals_(this.rawValue_, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            if (this.value_ === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$p = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return new Function('return this')();\n    }\n    function getWindowDocument() {\n        const globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function getCanvasContext(canvasElement) {\n        const win = canvasElement.ownerDocument.defaultView;\n        if (!win) {\n            return null;\n        }\n        const isBrowser = 'document' in win;\n        return isBrowser ? canvasElement.getContext('2d') : null;\n    }\n    const ICON_ID_TO_INNER_HTML_MAP = {\n        check: '<path d=\"M2 8l4 4l8 -8\"/>',\n        dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n        p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n    };\n    function createSvgIconElement(document, iconId) {\n        const elem = document.createElementNS(SVG_NS, 'svg');\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function removeElement(element) {\n        if (element.parentElement) {\n            element.parentElement.removeChild(element);\n        }\n    }\n    function removeChildElements(element) {\n        while (element.children.length > 0) {\n            element.removeChild(element.children[0]);\n        }\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$o = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$o());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$o('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$o(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$o(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$o('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    const ButtonBladePlugin = {\n        id: 'button',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('button'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonController(args.document, {\n                    props: ValueMap.fromObject({\n                        title: args.params.title,\n                    }),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonController)) {\n                return null;\n            }\n            return new ButtonApi(args.controller);\n        },\n    };\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    function createBlade() {\n        return new ValueMap({\n            positions: createValue([], {\n                equals: deepEqualsArray,\n            }),\n        });\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            bindValueMap(this, 'expanded', () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            });\n        }\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                foldable.set('expandedHeight', computeExpandedFolderHeight(foldable, elem));\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.set('shouldFixHeight', false);\n            foldable.set('expandedHeight', null);\n            foldable.set('completed', true);\n        });\n    }\n\n    class RackLikeApi extends BladeApi {\n        constructor(controller, rackApi) {\n            super(controller);\n            this.rackApi_ = rackApi;\n        }\n    }\n\n    function addButtonAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n    }\n    function addFolderAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n    }\n    function addSeparatorAsBlade(api, opt_params) {\n        const params = opt_params || {};\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'separator' }));\n    }\n    function addTabAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n    }\n\n    class NestedOrderedSet {\n        constructor(extract) {\n            this.emitter = new Emitter();\n            this.items_ = [];\n            this.cache_ = new Set();\n            this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n            this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n            this.extract_ = extract;\n        }\n        get items() {\n            return this.items_;\n        }\n        allItems() {\n            return Array.from(this.cache_);\n        }\n        find(callback) {\n            for (const item of this.allItems()) {\n                if (callback(item)) {\n                    return item;\n                }\n            }\n            return null;\n        }\n        includes(item) {\n            return this.cache_.has(item);\n        }\n        add(item, opt_index) {\n            if (this.includes(item)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.cache_.add(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.on('add', this.onSubListAdd_);\n                subList.emitter.on('remove', this.onSubListRemove_);\n                subList.allItems().forEach((item) => {\n                    this.cache_.add(item);\n                });\n            }\n            this.emitter.emit('add', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            this.cache_.delete(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.off('add', this.onSubListAdd_);\n                subList.emitter.off('remove', this.onSubListRemove_);\n            }\n            this.emitter.emit('remove', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        onSubListAdd_(ev) {\n            this.cache_.add(ev.item);\n            this.emitter.emit('add', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n        onSubListRemove_(ev) {\n            this.cache_.delete(ev.item);\n            this.emitter.emit('remove', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n    }\n\n    class InputBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingChange_ = this.onBindingChange_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('change', this.onBindingChange_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingChange_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('change', {\n                event: new TpChangeEvent(this, forceCast(value), this.controller_.binding.target.presetKey, ev.options.last),\n            });\n        }\n    }\n\n    class InputBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n        }\n    }\n\n    class MonitorBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingUpdate_ = this.onBindingUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('update', this.onBindingUpdate_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingUpdate_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(this, forceCast(value), this.controller_.binding.target.presetKey),\n            });\n        }\n    }\n\n    class MonitorBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n            this.viewProps.bindDisabled(this.binding.ticker);\n            this.viewProps.handleDispose(() => {\n                this.binding.dispose();\n            });\n        }\n    }\n\n    function findSubBladeApiSet(api) {\n        if (api instanceof RackApi) {\n            return api['apiSet_'];\n        }\n        if (api instanceof RackLikeApi) {\n            return api['rackApi_']['apiSet_'];\n        }\n        return null;\n    }\n    function getApiByController(apiSet, controller) {\n        const api = apiSet.find((api) => api.controller_ === controller);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return api;\n    }\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) {\n            throw TpError.notBindable();\n        }\n        return new BindingTarget(obj, key, opt_id);\n    }\n    class RackApi extends BladeApi {\n        constructor(controller, pool) {\n            super(controller);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.onRackInputChange_ = this.onRackInputChange_.bind(this);\n            this.onRackMonitorUpdate_ = this.onRackMonitorUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.apiSet_ = new NestedOrderedSet(findSubBladeApiSet);\n            this.pool_ = pool;\n            const rack = this.controller_.rack;\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            rack.emitter.on('inputchange', this.onRackInputChange_);\n            rack.emitter.on('monitorupdate', this.onRackMonitorUpdate_);\n            rack.children.forEach((bc) => {\n                this.setUpApi_(bc);\n            });\n        }\n        get children() {\n            return this.controller_.rack.children.map((bc) => getApiByController(this.apiSet_, bc));\n        }\n        addInput(object, key, opt_params) {\n            const params = opt_params || {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createInput(doc, createBindingTarget(object, key, params.presetKey), params);\n            const api = new InputBindingApi(bc);\n            return this.add(api, params.index);\n        }\n        addMonitor(object, key, opt_params) {\n            const params = opt_params || {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createMonitor(doc, createBindingTarget(object, key), params);\n            const api = new MonitorBindingApi(bc);\n            return forceCast(this.add(api, params.index));\n        }\n        addFolder(params) {\n            return addFolderAsBlade(this, params);\n        }\n        addButton(params) {\n            return addButtonAsBlade(this, params);\n        }\n        addSeparator(opt_params) {\n            return addSeparatorAsBlade(this, opt_params);\n        }\n        addTab(params) {\n            return addTabAsBlade(this, params);\n        }\n        add(api, opt_index) {\n            this.controller_.rack.add(api.controller_, opt_index);\n            const gapi = this.apiSet_.find((a) => a.controller_ === api.controller_);\n            if (gapi) {\n                this.apiSet_.remove(gapi);\n            }\n            this.apiSet_.add(api);\n            return api;\n        }\n        remove(api) {\n            this.controller_.rack.remove(api.controller_);\n        }\n        addBlade(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createBlade(doc, params);\n            const api = this.pool_.createBladeApi(bc);\n            return this.add(api, params.index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpApi_(bc) {\n            const api = this.apiSet_.find((api) => api.controller_ === bc);\n            if (!api) {\n                this.apiSet_.add(this.pool_.createBladeApi(bc));\n            }\n        }\n        onRackAdd_(ev) {\n            this.setUpApi_(ev.bladeController);\n        }\n        onRackRemove_(ev) {\n            if (ev.isRoot) {\n                const api = getApiByController(this.apiSet_, ev.bladeController);\n                this.apiSet_.remove(api);\n            }\n        }\n        onRackInputChange_(ev) {\n            const bc = ev.bladeController;\n            if (bc instanceof InputBindingController) {\n                const api = getApiByController(this.apiSet_, bc);\n                const binding = bc.binding;\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, forceCast(binding.target.read()), binding.target.presetKey, ev.options.last),\n                });\n            }\n            else if (bc instanceof ValueBladeController) {\n                const api = getApiByController(this.apiSet_, bc);\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, bc.value.rawValue, undefined, ev.options.last),\n                });\n            }\n        }\n        onRackMonitorUpdate_(ev) {\n            if (!(ev.bladeController instanceof MonitorBindingController)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = getApiByController(this.apiSet_, ev.bladeController);\n            const binding = ev.bladeController.binding;\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(api, forceCast(binding.target.read()), binding.target.presetKey),\n            });\n        }\n    }\n\n    class FolderApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.emitter_ = new Emitter();\n            this.controller_.foldable\n                .value('expanded')\n                .emitter.on('change', (ev) => {\n                this.emitter_.emit('fold', {\n                    event: new TpFoldEvent(this, ev.sender.rawValue),\n                });\n            });\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n        }\n        get expanded() {\n            return this.controller_.foldable.get('expanded');\n        }\n        set expanded(expanded) {\n            this.controller_.foldable.set('expanded', expanded);\n        }\n        get title() {\n            return this.controller_.props.get('title');\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            return this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class RackLikeController extends BladeController {\n        constructor(config) {\n            super({\n                blade: config.blade,\n                view: config.view,\n                viewProps: config.rackController.viewProps,\n            });\n            this.rackController = config.rackController;\n        }\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    function findInputBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof InputBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findMonitorBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof MonitorBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findValueBladeController(bcs, v) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof ValueBladeController && bc.value === v) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findSubRack(bc) {\n        if (bc instanceof RackController) {\n            return bc.rack;\n        }\n        if (bc instanceof RackLikeController) {\n            return bc.rackController.rack;\n        }\n        return null;\n    }\n    function findSubBladeControllerSet(bc) {\n        const rack = findSubRack(bc);\n        return rack ? rack['bcSet_'] : null;\n    }\n    class BladeRack {\n        constructor(blade) {\n            var _a;\n            this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n            this.onSetAdd_ = this.onSetAdd_.bind(this);\n            this.onSetRemove_ = this.onSetRemove_.bind(this);\n            this.onChildDispose_ = this.onChildDispose_.bind(this);\n            this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n            this.onChildInputChange_ = this.onChildInputChange_.bind(this);\n            this.onChildMonitorUpdate_ = this.onChildMonitorUpdate_.bind(this);\n            this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n            this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n            this.onDescendantLayout_ = this.onDescendantLayout_.bind(this);\n            this.onDescendantInputChange_ = this.onDescendantInputChange_.bind(this);\n            this.onDescendantMonitorUpdate_ =\n                this.onDescendantMonitorUpdate_.bind(this);\n            this.emitter = new Emitter();\n            this.blade_ = blade !== null && blade !== void 0 ? blade : null;\n            (_a = this.blade_) === null || _a === void 0 ? void 0 : _a.value('positions').emitter.on('change', this.onBladePositionsChange_);\n            this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n            this.bcSet_.emitter.on('add', this.onSetAdd_);\n            this.bcSet_.emitter.on('remove', this.onSetRemove_);\n        }\n        get children() {\n            return this.bcSet_.items;\n        }\n        add(bc, opt_index) {\n            if (bc.parent) {\n                bc.parent.remove(bc);\n            }\n            bc['parent_'] = this;\n            this.bcSet_.add(bc, opt_index);\n        }\n        remove(bc) {\n            bc['parent_'] = null;\n            this.bcSet_.remove(bc);\n        }\n        find(controllerClass) {\n            return forceCast(this.bcSet_.allItems().filter((bc) => {\n                return bc instanceof controllerClass;\n            }));\n        }\n        onSetAdd_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('add', {\n                bladeController: ev.item,\n                index: ev.index,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n            bc.blade\n                .value('positions')\n                .emitter.on('change', this.onChildPositionsChange_);\n            bc.viewProps.handleDispose(this.onChildDispose_);\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.on('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.on('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.on('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.on('layout', this.onDescendantLayout_);\n                    emitter.on('inputchange', this.onDescendantInputChange_);\n                    emitter.on('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        onSetRemove_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('remove', {\n                bladeController: ev.item,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.off('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.off('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.off('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.off('layout', this.onDescendantLayout_);\n                    emitter.off('inputchange', this.onDescendantInputChange_);\n                    emitter.off('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        updatePositions_() {\n            const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n            const firstVisibleItem = visibleItems[0];\n            const lastVisibleItem = visibleItems[visibleItems.length - 1];\n            this.bcSet_.items.forEach((bc) => {\n                const ps = [];\n                if (bc === firstVisibleItem) {\n                    ps.push('first');\n                    if (!this.blade_ ||\n                        this.blade_.get('positions').includes('veryfirst')) {\n                        ps.push('veryfirst');\n                    }\n                }\n                if (bc === lastVisibleItem) {\n                    ps.push('last');\n                    if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                        ps.push('verylast');\n                    }\n                }\n                bc.blade.set('positions', ps);\n            });\n        }\n        onChildPositionsChange_() {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildViewPropsChange_(_ev) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildDispose_() {\n            const disposedUcs = this.bcSet_.items.filter((bc) => {\n                return bc.viewProps.get('disposed');\n            });\n            disposedUcs.forEach((bc) => {\n                this.bcSet_.remove(bc);\n            });\n        }\n        onChildInputChange_(ev) {\n            const bc = findInputBindingController(this.find(InputBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onChildMonitorUpdate_(ev) {\n            const bc = findMonitorBindingController(this.find(MonitorBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('monitorupdate', {\n                bladeController: bc,\n                sender: this,\n            });\n        }\n        onChildValueChange_(ev) {\n            const bc = findValueBladeController(this.find(ValueBladeController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantLayout_(_) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onDescendantInputChange_(ev) {\n            this.emitter.emit('inputchange', {\n                bladeController: ev.bladeController,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantMonitorUpdate_(ev) {\n            this.emitter.emit('monitorupdate', {\n                bladeController: ev.bladeController,\n                sender: this,\n            });\n        }\n        onBladePositionsChange_() {\n            this.updatePositions_();\n        }\n    }\n\n    class RackController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new PlainView(doc, {\n                    viewName: 'brk',\n                    viewProps: config.viewProps,\n                }) }));\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            const rack = new BladeRack(config.root ? undefined : config.blade);\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            this.rack = rack;\n            this.viewProps.handleDispose(() => {\n                for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                    const bc = this.rack.children[i];\n                    bc.viewProps.set('disposed', true);\n                }\n            });\n        }\n        onRackAdd_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            insertElementAt(this.view.element, ev.bladeController.view.element, ev.index);\n        }\n        onRackRemove_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            removeElement(ev.bladeController.view.element);\n        }\n    }\n\n    const bladeContainerClassName = ClassName('cnt');\n\n    class FolderView {\n        constructor(doc, config) {\n            this.className_ = ClassName(config.viewName || 'fld');\n            this.element = doc.createElement('div');\n            this.element.classList.add(this.className_(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            this.foldable_ = config.foldable;\n            this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n            bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(this.className_('b'));\n            bindValueMap(config.props, 'title', (title) => {\n                if (isEmpty(title)) {\n                    this.element.classList.add(this.className_(undefined, 'not'));\n                }\n                else {\n                    this.element.classList.remove(this.className_(undefined, 'not'));\n                }\n            });\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(this.className_('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(this.className_('m'));\n            this.buttonElement.appendChild(markElem);\n            const containerElem = config.containerElement;\n            containerElem.classList.add(this.className_('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n        }\n    }\n\n    class FolderController extends RackLikeController {\n        constructor(doc, config) {\n            var _a;\n            const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            const rc = new RackController(doc, {\n                blade: config.blade,\n                root: config.root,\n                viewProps: config.viewProps,\n            });\n            super(Object.assign(Object.assign({}, config), { rackController: rc, view: new FolderView(doc, {\n                    containerElement: rc.view.element,\n                    foldable: foldable,\n                    props: config.props,\n                    viewName: config.root ? 'rot' : undefined,\n                    viewProps: config.viewProps,\n                }) }));\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.props = config.props;\n            this.foldable = foldable;\n            bindFoldable(this.foldable, this.view.containerElement);\n            this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n        }\n        get document() {\n            return this.view.element.ownerDocument;\n        }\n        onTitleClick_() {\n            this.foldable.set('expanded', !this.foldable.get('expanded'));\n        }\n    }\n\n    const FolderBladePlugin = {\n        id: 'folder',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('folder'),\n                expanded: p.optional.boolean,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new FolderController(args.document, {\n                blade: args.blade,\n                expanded: args.params.expanded,\n                props: ValueMap.fromObject({\n                    title: args.params.title,\n                }),\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof FolderController)) {\n                return null;\n            }\n            return new FolderApi(args.controller, args.pool);\n        },\n    };\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class SeparatorApi extends BladeApi {\n    }\n\n    const className$n = ClassName('spr');\n    class SeparatorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$n());\n            config.viewProps.bindClassModifiers(this.element);\n            const hrElem = doc.createElement('hr');\n            hrElem.classList.add(className$n('r'));\n            this.element.appendChild(hrElem);\n        }\n    }\n\n    class SeparatorController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                    viewProps: config.viewProps,\n                }) }));\n        }\n    }\n\n    const SeparatorBladePlugin = {\n        id: 'separator',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('separator'),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new SeparatorController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof SeparatorController)) {\n                return null;\n            }\n            return new SeparatorApi(args.controller);\n        },\n    };\n\n    const className$m = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$m(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(opt_initialValue) {\n            var _a, _b;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            const coreObj = {\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new ViewProps(core);\n        }\n        bindClassModifiers(elem) {\n            bindValueMap(this, 'disabled', valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n    }\n\n    const className$l = ClassName('tbi');\n    class TabItemView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$l());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValueMap(config.props, 'selected', (selected) => {\n                if (selected) {\n                    this.element.classList.add(className$l(undefined, 'sel'));\n                }\n                else {\n                    this.element.classList.remove(className$l(undefined, 'sel'));\n                }\n            });\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$l('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$l('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n        }\n    }\n\n    class TabItemController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new TabItemView(doc, {\n                props: config.props,\n                viewProps: config.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class TabPageController {\n        constructor(doc, config) {\n            this.onItemClick_ = this.onItemClick_.bind(this);\n            this.ic_ = new TabItemController(doc, {\n                props: config.itemProps,\n                viewProps: ViewProps.create(),\n            });\n            this.ic_.emitter.on('click', this.onItemClick_);\n            this.cc_ = new RackController(doc, {\n                blade: createBlade(),\n                viewProps: ViewProps.create(),\n            });\n            this.props = config.props;\n            bindValueMap(this.props, 'selected', (selected) => {\n                this.itemController.props.set('selected', selected);\n                this.contentController.viewProps.set('hidden', !selected);\n            });\n        }\n        get itemController() {\n            return this.ic_;\n        }\n        get contentController() {\n            return this.cc_;\n        }\n        onItemClick_() {\n            this.props.set('selected', true);\n        }\n    }\n\n    class TabPageApi {\n        constructor(controller, contentRackApi) {\n            this.controller_ = controller;\n            this.rackApi_ = contentRackApi;\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.itemController.props.set('title', title);\n        }\n        get selected() {\n            return this.controller_.props.get('selected');\n        }\n        set selected(selected) {\n            this.controller_.props.set('selected', selected);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n    }\n\n    class TabApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.emitter_ = new Emitter();\n            this.pageApiMap_ = new Map();\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n            this.controller_.pageSet.emitter.on('add', this.onPageAdd_);\n            this.controller_.pageSet.emitter.on('remove', this.onPageRemove_);\n            this.controller_.pageSet.items.forEach((pc) => {\n                this.setUpPageApi_(pc);\n            });\n        }\n        get pages() {\n            return this.controller_.pageSet.items.map((pc) => {\n                const api = this.pageApiMap_.get(pc);\n                if (!api) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return api;\n            });\n        }\n        addPage(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const pc = new TabPageController(doc, {\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: params.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n            });\n            this.controller_.add(pc, params.index);\n            const api = this.pageApiMap_.get(pc);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n        removePage(index) {\n            this.controller_.remove(index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpPageApi_(pc) {\n            const rackApi = this.rackApi_['apiSet_'].find((api) => api.controller_ === pc.contentController);\n            if (!rackApi) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = new TabPageApi(pc, rackApi);\n            this.pageApiMap_.set(pc, api);\n        }\n        onPageAdd_(ev) {\n            this.setUpPageApi_(ev.item);\n        }\n        onPageRemove_(ev) {\n            const api = this.pageApiMap_.get(ev.item);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.pageApiMap_.delete(ev.item);\n        }\n    }\n\n    const className$k = ClassName('tab');\n    class TabView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$k(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.empty, valueToClassName(this.element, className$k(undefined, 'nop')));\n            const itemsElem = doc.createElement('div');\n            itemsElem.classList.add(className$k('i'));\n            this.element.appendChild(itemsElem);\n            this.itemsElement = itemsElem;\n            const contentsElem = config.contentsElement;\n            contentsElem.classList.add(className$k('c'));\n            this.element.appendChild(contentsElem);\n            this.contentsElement = contentsElem;\n        }\n    }\n\n    class TabController extends RackLikeController {\n        constructor(doc, config) {\n            const cr = new RackController(doc, {\n                blade: config.blade,\n                viewProps: config.viewProps,\n            });\n            const empty = createValue(true);\n            super({\n                blade: config.blade,\n                rackController: cr,\n                view: new TabView(doc, {\n                    contentsElement: cr.view.element,\n                    empty: empty,\n                    viewProps: config.viewProps,\n                }),\n            });\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.onPageSelectedChange_ = this.onPageSelectedChange_.bind(this);\n            this.pageSet_ = new NestedOrderedSet(() => null);\n            this.pageSet_.emitter.on('add', this.onPageAdd_);\n            this.pageSet_.emitter.on('remove', this.onPageRemove_);\n            this.empty_ = empty;\n            this.applyPages_();\n        }\n        get pageSet() {\n            return this.pageSet_;\n        }\n        add(pc, opt_index) {\n            this.pageSet_.add(pc, opt_index !== null && opt_index !== void 0 ? opt_index : this.pageSet_.items.length);\n        }\n        remove(index) {\n            this.pageSet_.remove(this.pageSet_.items[index]);\n        }\n        applyPages_() {\n            this.keepSelection_();\n            this.empty_.rawValue = this.pageSet_.items.length === 0;\n        }\n        onPageAdd_(ev) {\n            const pc = ev.item;\n            insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n            this.rackController.rack.add(pc.contentController, ev.index);\n            pc.props.value('selected').emitter.on('change', this.onPageSelectedChange_);\n            this.applyPages_();\n        }\n        onPageRemove_(ev) {\n            const pc = ev.item;\n            removeElement(pc.itemController.view.element);\n            this.rackController.rack.remove(pc.contentController);\n            pc.props\n                .value('selected')\n                .emitter.off('change', this.onPageSelectedChange_);\n            this.applyPages_();\n        }\n        keepSelection_() {\n            if (this.pageSet_.items.length === 0) {\n                return;\n            }\n            const firstSelIndex = this.pageSet_.items.findIndex((pc) => pc.props.get('selected'));\n            if (firstSelIndex < 0) {\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === 0);\n                });\n            }\n            else {\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === firstSelIndex);\n                });\n            }\n        }\n        onPageSelectedChange_(ev) {\n            if (ev.rawValue) {\n                const index = this.pageSet_.items.findIndex((pc) => pc.props.value('selected') === ev.sender);\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === index);\n                });\n            }\n            else {\n                this.keepSelection_();\n            }\n        }\n    }\n\n    const TabBladePlugin = {\n        id: 'tab',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                pages: p.required.array(p.required.object({ title: p.required.string })),\n                view: p.required.constant('tab'),\n            });\n            if (!result || result.pages.length === 0) {\n                return null;\n            }\n            return { params: result };\n        },\n        controller(args) {\n            const c = new TabController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n            args.params.pages.forEach((p) => {\n                const pc = new TabPageController(args.document, {\n                    itemProps: ValueMap.fromObject({\n                        selected: false,\n                        title: p.title,\n                    }),\n                    props: ValueMap.fromObject({\n                        selected: false,\n                    }),\n                });\n                c.add(pc);\n            });\n            return c;\n        },\n        api(args) {\n            if (!(args.controller instanceof TabController)) {\n                return null;\n            }\n            return new TabApi(args.controller, args.pool);\n        },\n    };\n\n    function createBladeController(plugin, args) {\n        const ac = plugin.accept(args.params);\n        if (!ac) {\n            return null;\n        }\n        const disabled = ParamsParsers.optional.boolean(args.params['disabled']).value;\n        const hidden = ParamsParsers.optional.boolean(args.params['hidden']).value;\n        return plugin.controller({\n            blade: createBlade(),\n            document: args.document,\n            params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: disabled, hidden: hidden })),\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class ListConstraint {\n        constructor(options) {\n            this.options = options;\n        }\n        constrain(value) {\n            const opts = this.options;\n            if (opts.length === 0) {\n                return value;\n            }\n            const matched = opts.filter((item) => {\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        }\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.maxValue = config.max;\n            this.minValue = config.min;\n        }\n        constrain(value) {\n            let result = value;\n            if (!isEmpty(this.minValue)) {\n                result = Math.max(result, this.minValue);\n            }\n            if (!isEmpty(this.maxValue)) {\n                result = Math.min(result, this.maxValue);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step) {\n            this.step = step;\n        }\n        constrain(value) {\n            const r = value < 0\n                ? -Math.round(-value / this.step)\n                : Math.round(value / this.step);\n            return r * this.step;\n        }\n    }\n\n    const className$j = ClassName('lst');\n    class ListView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.props_ = config.props;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$j());\n            config.viewProps.bindClassModifiers(this.element);\n            const selectElem = doc.createElement('select');\n            selectElem.classList.add(className$j('s'));\n            bindValueMap(this.props_, 'options', (opts) => {\n                removeChildElements(selectElem);\n                opts.forEach((item, index) => {\n                    const optionElem = doc.createElement('option');\n                    optionElem.dataset.index = String(index);\n                    optionElem.textContent = item.text;\n                    optionElem.value = String(item.value);\n                    selectElem.appendChild(optionElem);\n                });\n            });\n            config.viewProps.bindDisabled(selectElem);\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(className$j('m'));\n            markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            this.element.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value_ = config.value;\n            this.update_();\n        }\n        update_() {\n            this.selectElement.value = String(this.value_.rawValue);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ListController {\n        constructor(doc, config) {\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ListView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\n        }\n        onSelectChange_(e) {\n            const selectElem = forceCast(e.currentTarget);\n            const optElem = selectElem.selectedOptions.item(0);\n            if (!optElem) {\n                return;\n            }\n            const itemIndex = Number(optElem.dataset.index);\n            this.value.rawValue = this.props.get('options')[itemIndex].value;\n        }\n    }\n\n    const className$i = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$i());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$i(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$h = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$h());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$h('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    function boolToString(value) {\n        return String(value);\n    }\n    function boolFromUnknown(value) {\n        if (value === 'false') {\n            return false;\n        }\n        return !!value;\n    }\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        return (parseLiteral(text, cursor) || parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function numberToString(value) {\n        return String(value);\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    function formatString(value) {\n        return value;\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset$1(ev, elem) {\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((win && win.scrollX) || 0) + rect.left),\n            y: ev.pageY - (((win && win.scrollY) || 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_, {\n                passive: false,\n            });\n            element.addEventListener('touchmove', this.onTouchMove_, {\n                passive: true,\n            });\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return ((value % max) + max) % max;\n    }\n\n    const className$g = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g(), className$g(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$g(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$g('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$g());\n            this.inputElement.classList.add(className$g('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$g('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$g('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$g('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$g('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$g(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$g(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.originRawValue_ + dx * this.props.get('draggingScale');\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    const className$f = ClassName('sld');\n    class SliderView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$f());\n            config.viewProps.bindClassModifiers(this.element);\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$f('t'));\n            config.viewProps.bindTabIndex(trackElem);\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$f('k'));\n            this.trackElement.appendChild(knobElem);\n            this.knobElement = knobElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('minValue'), this.props_.get('maxValue'), 0, 100), 0, 100);\n            this.knobElement.style.width = `${p}%`;\n        }\n        onChange_() {\n            this.update_();\n        }\n    }\n\n    class SliderController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.props = config.props;\n            this.view = new SliderView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.trackElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n            this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('minValue'), this.props.get('maxValue')), opts);\n        }\n        onPointerDownOrMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$e = ClassName('sldtxt');\n    class SliderTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$e('s'));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$e('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    class SliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sliderC_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                props: config.sliderProps,\n                value: config.value,\n                viewProps: this.viewProps,\n            });\n            this.textC_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                parser: config.parser,\n                props: config.textProps,\n                value: config.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get sliderController() {\n            return this.sliderC_;\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function parseListOptions(value) {\n        const p = ParamsParsers;\n        if (Array.isArray(value)) {\n            return p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            }))(value).value;\n        }\n        if (typeof value === 'object') {\n            return p.required.raw(value)\n                .value;\n        }\n        return undefined;\n    }\n    function parsePickerLayout(value) {\n        if (value === 'inline' || value === 'popup') {\n            return value;\n        }\n        return undefined;\n    }\n    function parsePointDimensionParams(value) {\n        const p = ParamsParsers;\n        return p.required.object({\n            max: p.optional.number,\n            min: p.optional.number,\n            step: p.optional.number,\n        })(value).value;\n    }\n    function normalizeListOptions(options) {\n        if (Array.isArray(options)) {\n            return options;\n        }\n        const items = [];\n        Object.keys(options).forEach((text) => {\n            items.push({ text: text, value: options[text] });\n        });\n        return items;\n    }\n    function createListConstraint(options) {\n        return !isEmpty(options)\n            ? new ListConstraint(normalizeListOptions(forceCast(options)))\n            : null;\n    }\n    function findListItems(constraint) {\n        const c = constraint\n            ? findConstraint(constraint, ListConstraint)\n            : null;\n        if (!c) {\n            return null;\n        }\n        return c.options;\n    }\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    const className$d = ClassName('ckb');\n    class CheckboxView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className$d('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$d('i'));\n            inputElem.type = 'checkbox';\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.viewProps.bindDisabled(this.inputElement);\n            const wrapperElem = doc.createElement('div');\n            wrapperElem.classList.add(className$d('w'));\n            labelElem.appendChild(wrapperElem);\n            const markElem = createSvgIconElement(doc, 'check');\n            wrapperElem.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            this.inputElement.checked = this.value.rawValue;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class CheckboxController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n        }\n    }\n\n    function createConstraint$5(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const BooleanInputPlugin = {\n        id: 'input-bool',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n            constraint: (args) => createConstraint$5(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new CheckboxController(doc, {\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className$c = ClassName('col');\n    class ColorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.foldable.bindExpandedClass(this.element, className$c(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$c(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$c('h'));\n            this.element.appendChild(headElem);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$c('s'));\n            headElem.appendChild(swatchElem);\n            this.swatchElement = swatchElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$c('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$c('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    function rgbToHsl(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const c = cmax - cmin;\n        let h = 0;\n        let s = 0;\n        const l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = c / (1 - Math.abs(cmax + cmin - 1));\n            if (rp === cmax) {\n                h = (gp - bp) / c;\n            }\n            else if (gp === cmax) {\n                h = 2 + (bp - rp) / c;\n            }\n            else {\n                h = 4 + (rp - gp) / c;\n            }\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [h * 360, s * 100, l * 100];\n    }\n    function hslToRgb(h, s, l) {\n        const hp = ((h % 360) + 360) % 360;\n        const sp = constrainRange(s / 100, 0, 1);\n        const lp = constrainRange(l / 100, 0, 1);\n        const c = (1 - Math.abs(2 * lp - 1)) * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = lp - c / 2;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function rgbToHsv(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const d = cmax - cmin;\n        let h;\n        if (d === 0) {\n            h = 0;\n        }\n        else if (cmax === rp) {\n            h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n        }\n        else if (cmax === gp) {\n            h = 60 * ((bp - rp) / d + 2);\n        }\n        else {\n            h = 60 * ((rp - gp) / d + 4);\n        }\n        const s = cmax === 0 ? 0 : d / cmax;\n        const v = cmax;\n        return [h, s * 100, v * 100];\n    }\n    function hsvToRgb(h, s, v) {\n        const hp = loopRange(h, 360);\n        const sp = constrainRange(s / 100, 0, 1);\n        const vp = constrainRange(v / 100, 0, 1);\n        const c = vp * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = vp - c;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function hslToHsv(h, s, l) {\n        const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n        return [\n            h,\n            sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n            l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n        ];\n    }\n    function hsvToHsl(h, s, v) {\n        const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n        return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n    }\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n    function appendAlphaComponent(comps, alpha) {\n        return [comps[0], comps[1], comps[2], alpha];\n    }\n    const MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: (h, s, l) => [h, s, l],\n            hsv: hslToHsv,\n            rgb: hslToRgb,\n        },\n        hsv: {\n            hsl: hsvToHsl,\n            hsv: (h, s, v) => [h, s, v],\n            rgb: hsvToRgb,\n        },\n        rgb: {\n            hsl: rgbToHsl,\n            hsv: rgbToHsv,\n            rgb: (r, g, b) => [r, g, b],\n        },\n    };\n    function convertColorMode(components, fromMode, toMode) {\n        return MODE_CONVERTER_MAP[fromMode][toMode](...components);\n    }\n\n    const CONSTRAINT_MAP = {\n        hsl: (comps) => {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        hsv: (comps) => {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        rgb: (comps) => {\n            var _a;\n            return [\n                constrainRange(comps[0], 0, 255),\n                constrainRange(comps[1], 0, 255),\n                constrainRange(comps[2], 0, 255),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n    };\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== 'object' || isEmpty(obj)) {\n            return false;\n        }\n        return key in obj && typeof obj[key] === 'number';\n    }\n    class Color {\n        constructor(comps, mode) {\n            this.mode_ = mode;\n            this.comps_ = CONSTRAINT_MAP[mode](comps);\n        }\n        static black() {\n            return new Color([0, 0, 0], 'rgb');\n        }\n        static fromObject(obj) {\n            const comps = 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n            return new Color(comps, 'rgb');\n        }\n        static toRgbaObject(color) {\n            return color.toRgbaObject();\n        }\n        static isRgbColorObject(obj) {\n            return (isRgbColorComponent(obj, 'r') &&\n                isRgbColorComponent(obj, 'g') &&\n                isRgbColorComponent(obj, 'b'));\n        }\n        static isRgbaColorObject(obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n        }\n        static isColorObject(obj) {\n            return this.isRgbColorObject(obj);\n        }\n        static equals(v1, v2) {\n            if (v1.mode_ !== v2.mode_) {\n                return false;\n            }\n            const comps1 = v1.comps_;\n            const comps2 = v2.comps_;\n            for (let i = 0; i < comps1.length; i++) {\n                if (comps1[i] !== comps2[i]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        get mode() {\n            return this.mode_;\n        }\n        getComponents(opt_mode) {\n            return appendAlphaComponent(convertColorMode(removeAlphaComponent(this.comps_), this.mode_, opt_mode || this.mode_), this.comps_[3]);\n        }\n        toRgbaObject() {\n            const rgbComps = this.getComponents('rgb');\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3],\n            };\n        }\n    }\n\n    const className$b = ClassName('colp');\n    class ColorPickerView {\n        constructor(doc, config) {\n            this.alphaViews_ = null;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            const hsvElem = doc.createElement('div');\n            hsvElem.classList.add(className$b('hsv'));\n            const svElem = doc.createElement('div');\n            svElem.classList.add(className$b('sv'));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            const hElem = doc.createElement('div');\n            hElem.classList.add(className$b('h'));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            const rgbElem = doc.createElement('div');\n            rgbElem.classList.add(className$b('rgb'));\n            this.textView_ = config.textView;\n            rgbElem.appendChild(this.textView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text,\n                };\n                const aElem = doc.createElement('div');\n                aElem.classList.add(className$b('a'));\n                const apElem = doc.createElement('div');\n                apElem.classList.add(className$b('ap'));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                const atElem = doc.createElement('div');\n                atElem.classList.add(className$b('at'));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n        }\n        get allFocusableElements() {\n            const elems = [\n                this.svPaletteView_.element,\n                this.hPaletteView_.element,\n                this.textView_.modeSelectElement,\n                ...this.textView_.textViews.map((v) => v.inputElement),\n            ];\n            if (this.alphaViews_) {\n                elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n            }\n            return elems;\n        }\n    }\n\n    function parseColorInputParams(params) {\n        const p = ParamsParsers;\n        return parseParams(params, {\n            alpha: p.optional.boolean,\n            expanded: p.optional.boolean,\n            picker: p.optional.custom(parsePickerLayout),\n        });\n    }\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n\n    function parseCssNumberOrPercentage(text, maxValue) {\n        const m = text.match(/^(.+)%$/);\n        if (!m) {\n            return Math.min(parseFloat(text), maxValue);\n        }\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    const ANGLE_TO_DEG_MAP = {\n        deg: (angle) => angle,\n        grad: (angle) => (angle * 360) / 400,\n        rad: (angle) => (angle * 360) / (2 * Math.PI),\n        turn: (angle) => angle * 360,\n    };\n    function parseCssNumberOrAngle(text) {\n        const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) {\n            return parseFloat(text);\n        }\n        const angle = parseFloat(m[1]);\n        const unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    const NOTATION_TO_PARSER_MAP = {\n        'func.rgb': (text) => {\n            const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.rgba': (text) => {\n            const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.hsl': (text) => {\n            const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'func.hsla': (text) => {\n            const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'hex.rgb': (text) => {\n            const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1] + mRgb[1], 16),\n                    parseInt(mRgb[2] + mRgb[2], 16),\n                    parseInt(mRgb[3] + mRgb[3], 16),\n                ], 'rgb');\n            }\n            const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1], 16),\n                    parseInt(mRrggbb[2], 16),\n                    parseInt(mRrggbb[3], 16),\n                ], 'rgb');\n            }\n            return null;\n        },\n        'hex.rgba': (text) => {\n            const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1] + mRgb[1], 16),\n                    parseInt(mRgb[2] + mRgb[2], 16),\n                    parseInt(mRgb[3] + mRgb[3], 16),\n                    mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1], 16),\n                    parseInt(mRrggbb[2], 16),\n                    parseInt(mRrggbb[3], 16),\n                    mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            return null;\n        },\n    };\n    function getColorNotation(text) {\n        const notations = Object.keys(NOTATION_TO_PARSER_MAP);\n        return notations.reduce((result, notation) => {\n            if (result) {\n                return result;\n            }\n            const subparser = NOTATION_TO_PARSER_MAP[notation];\n            return subparser(text) ? notation : null;\n        }, null);\n    }\n    const CompositeColorParser = (text) => {\n        const notation = getColorNotation(text);\n        return notation ? NOTATION_TO_PARSER_MAP[notation](text) : null;\n    };\n    function hasAlphaComponent(notation) {\n        return (notation === 'func.hsla' ||\n            notation === 'func.rgba' ||\n            notation === 'hex.rgba');\n    }\n    function colorFromString(value) {\n        if (typeof value === 'string') {\n            const cv = CompositeColorParser(value);\n            if (cv) {\n                return cv;\n            }\n        }\n        return Color.black();\n    }\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = '#') {\n        const hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = '#') {\n        const rgbaComps = value.getComponents('rgb');\n        const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value) {\n        const formatter = createNumberFormatter(0);\n        const comps = removeAlphaComponent(value.getComponents('rgb')).map((comp) => formatter(comp));\n        return `rgb(${comps.join(', ')})`;\n    }\n    function colorToFunctionalRgbaString(value) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(0);\n        const comps = value.getComponents('rgb').map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n        return `hsl(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        const comps = value\n            .getComponents('hsl')\n            .map((comp, index) => formatters[index](comp));\n        return `hsla(${comps.join(', ')})`;\n    }\n    const NOTATION_TO_STRINGIFIER_MAP = {\n        'func.hsl': colorToFunctionalHslString,\n        'func.hsla': colorToFunctionalHslaString,\n        'func.rgb': colorToFunctionalRgbString,\n        'func.rgba': colorToFunctionalRgbaString,\n        'hex.rgb': colorToHexRgbString,\n        'hex.rgba': colorToHexRgbaString,\n    };\n    function getColorStringifier(notation) {\n        return NOTATION_TO_STRINGIFIER_MAP[notation];\n    }\n\n    const className$a = ClassName('apl');\n    class APaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a());\n            config.viewProps.bindTabIndex(this.element);\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$a('b'));\n            this.element.appendChild(barElem);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$a('c'));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$a('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$a('p'));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const rgbaComps = c.getComponents('rgb');\n            const leftColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n            const rightColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n            const gradientComps = [\n                'to right',\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor),\n            ];\n            this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class APaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const alpha = d.point.x / d.bounds.width;\n            const c = this.value.rawValue;\n            const [h, s, v] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, alpha], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, a + step], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$9 = ClassName('coltxt');\n    function createModeSelectElement(doc) {\n        const selectElem = doc.createElement('select');\n        const items = [\n            { text: 'RGB', value: 'rgb' },\n            { text: 'HSL', value: 'hsl' },\n            { text: 'HSV', value: 'hsv' },\n        ];\n        selectElem.appendChild(items.reduce((frag, item) => {\n            const optElem = doc.createElement('option');\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    class ColorTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            const modeElem = doc.createElement('div');\n            modeElem.classList.add(className$9('m'));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$9('ms'));\n            modeElem.appendChild(this.modeSelectElement);\n            const modeMarkerElem = doc.createElement('div');\n            modeMarkerElem.classList.add(className$9('mm'));\n            modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            const textsElem = doc.createElement('div');\n            textsElem.classList.add(className$9('w'));\n            this.element.appendChild(textsElem);\n            this.textsElem_ = textsElem;\n            this.textViews_ = config.textViews;\n            this.applyTextViews_();\n            bindValue(config.colorMode, (mode) => {\n                this.modeElem_.value = mode;\n            });\n        }\n        get modeSelectElement() {\n            return this.modeElem_;\n        }\n        get textViews() {\n            return this.textViews_;\n        }\n        set textViews(textViews) {\n            this.textViews_ = textViews;\n            this.applyTextViews_();\n        }\n        applyTextViews_() {\n            removeChildElements(this.textsElem_);\n            const doc = this.element.ownerDocument;\n            this.textViews_.forEach((v) => {\n                const compElem = doc.createElement('div');\n                compElem.classList.add(className$9('c'));\n                compElem.appendChild(v.element);\n                this.textsElem_.appendChild(compElem);\n            });\n        }\n    }\n\n    const FORMATTER = createNumberFormatter(0);\n    const MODE_TO_CONSTRAINT_MAP = {\n        rgb: () => {\n            return new RangeConstraint({ min: 0, max: 255 });\n        },\n        hsl: (index) => {\n            return index === 0\n                ? new RangeConstraint({ min: 0, max: 360 })\n                : new RangeConstraint({ min: 0, max: 100 });\n        },\n        hsv: (index) => {\n            return index === 0\n                ? new RangeConstraint({ min: 0, max: 360 })\n                : new RangeConstraint({ min: 0, max: 100 });\n        },\n    };\n    function createComponentController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n            baseStep: getBaseStepForColor(false),\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                draggingScale: 1,\n                formatter: FORMATTER,\n            }),\n            value: createValue(0, {\n                constraint: MODE_TO_CONSTRAINT_MAP[config.colorMode](index),\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class ColorTextController {\n        constructor(doc, config) {\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.colorMode = createValue(this.value.rawValue.mode);\n            this.ccs_ = this.createComponentControllers_(doc);\n            this.view = new ColorTextView(doc, {\n                colorMode: this.colorMode,\n                textViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n            });\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n        }\n        createComponentControllers_(doc) {\n            const cc = {\n                colorMode: this.colorMode.rawValue,\n                parser: this.parser_,\n                viewProps: this.viewProps,\n            };\n            const ccs = [\n                createComponentController(doc, cc, 0),\n                createComponentController(doc, cc, 1),\n                createComponentController(doc, cc, 2),\n            ];\n            ccs.forEach((cs, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: cs.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents(this.colorMode.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const pickedMode = this.colorMode.rawValue;\n                        const comps = p.rawValue.getComponents(pickedMode);\n                        comps[index] = s.rawValue;\n                        return new Color(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode);\n                    },\n                });\n            });\n            return ccs;\n        }\n        onModeSelectChange_(ev) {\n            const selectElem = ev.currentTarget;\n            this.colorMode.rawValue = selectElem.value;\n            this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n            this.view.textViews = [\n                this.ccs_[0].view,\n                this.ccs_[1].view,\n                this.ccs_[2].view,\n            ];\n        }\n    }\n\n    const className$8 = ClassName('hpl');\n    class HPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindTabIndex(this.element);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$8('c'));\n            this.element.appendChild(colorElem);\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$8('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const [h] = c.getComponents('hsv');\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([h, 100, 100], 'hsv'));\n            const left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class HPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const hue = mapRange(d.point.x, 0, d.bounds.width, 0, 360);\n            const c = this.value.rawValue;\n            const [, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([hue, s, v, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h + step, s, v, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$7 = ClassName('svp');\n    const CANVAS_RESOL = 64;\n    class SvPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindTabIndex(this.element);\n            const canvasElem = doc.createElement('canvas');\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$7('c'));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$7('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const hsvComps = c.getComponents('hsv');\n            const width = this.canvasElement.width;\n            const height = this.canvasElement.height;\n            const imgData = ctx.getImageData(0, 0, width, height);\n            const data = imgData.data;\n            for (let iy = 0; iy < height; iy++) {\n                for (let ix = 0; ix < width; ix++) {\n                    const s = mapRange(ix, 0, width, 0, 100);\n                    const v = mapRange(iy, 0, height, 100, 0);\n                    const rgbComps = hsvToRgb(hsvComps[0], s, v);\n                    const i = (iy * width + ix) * 4;\n                    data[i] = rgbComps[0];\n                    data[i + 1] = rgbComps[1];\n                    data[i + 2] = rgbComps[2];\n                    data[i + 3] = 255;\n                }\n            }\n            ctx.putImageData(imgData, 0, 0);\n            const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n            const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = `${top}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class SvPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n            const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n            const [h, , , a] = this.value.rawValue.getComponents('hsv');\n            this.value.setRawValue(new Color([h, saturation, value, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(new Color([h, s + ds, v + dv, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class ColorPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.hPaletteC_ = new HPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.svPaletteC_ = new SvPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.alphaIcs_ = config.supportsAlpha\n                ? {\n                    palette: new APaletteController(doc, {\n                        value: this.value,\n                        viewProps: this.viewProps,\n                    }),\n                    text: new NumberTextController(doc, {\n                        parser: parseNumber,\n                        baseStep: 0.1,\n                        props: ValueMap.fromObject({\n                            draggingScale: 0.01,\n                            formatter: createNumberFormatter(2),\n                        }),\n                        value: createValue(0, {\n                            constraint: new RangeConstraint({ min: 0, max: 1 }),\n                        }),\n                        viewProps: this.viewProps,\n                    }),\n                }\n                : null;\n            if (this.alphaIcs_) {\n                connectValues({\n                    primary: this.value,\n                    secondary: this.alphaIcs_.text.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents()[3];\n                    },\n                    backward: (p, s) => {\n                        const comps = p.rawValue.getComponents();\n                        comps[3] = s.rawValue;\n                        return new Color(comps, p.rawValue.mode);\n                    },\n                });\n            }\n            this.textC_ = new ColorTextController(doc, {\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_\n                    ? {\n                        palette: this.alphaIcs_.palette.view,\n                        text: this.alphaIcs_.text.view,\n                    }\n                    : null,\n                hPaletteView: this.hPaletteC_.view,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    const className$6 = ClassName('colsw');\n    class ColorSwatchView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$6('sw'));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$6('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            this.update_();\n        }\n        update_() {\n            const value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ColorSwatchController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ColorSwatchView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class ColorController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.swatchC_ = new ColorSwatchController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            const buttonElem = this.swatchC_.view.buttonElement;\n            buttonElem.addEventListener('blur', this.onButtonBlur_);\n            buttonElem.addEventListener('click', this.onButtonClick_);\n            this.textC_ = new TextController(doc, {\n                parser: config.parser,\n                props: ValueMap.fromObject({\n                    formatter: config.formatter,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n            });\n            this.view.swatchElement.appendChild(this.swatchC_.view.element);\n            this.view.textElement.appendChild(this.textC_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new ColorPickerController(doc, {\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(pickerC.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        get textController() {\n            return this.textC_;\n        }\n        onButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.swatchC_.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.swatchC_.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function colorFromObject(value) {\n        if (Color.isColorObject(value)) {\n            return Color.fromObject(value);\n        }\n        return Color.black();\n    }\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n            return (result << 8) | (Math.floor(comp) & 0xff);\n        }, 0);\n    }\n    function colorToRgbaNumber(value) {\n        return (value.getComponents('rgb').reduce((result, comp, index) => {\n            const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return (result << 8) | hex;\n        }, 0) >>> 0);\n    }\n    function numberToRgbColor(num) {\n        return new Color([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n    }\n    function numberToRgbaColor(num) {\n        return new Color([\n            (num >> 24) & 0xff,\n            (num >> 16) & 0xff,\n            (num >> 8) & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1),\n        ], 'rgb');\n    }\n    function colorFromRgbNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbColor(value);\n    }\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbaColor(value);\n    }\n\n    function createColorStringWriter(notation) {\n        const stringify = getColorStringifier(notation);\n        return (target, value) => {\n            writePrimitive(target, stringify(value));\n        };\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return (target, value) => {\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value) {\n        const obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n        target.writeProperty('a', obj.a);\n    }\n    function writeRgbColorObject(target, value) {\n        const obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha) {\n        return supportsAlpha ? writeRgbaColorObject : writeRgbColorObject;\n    }\n\n    function shouldSupportAlpha$1(inputParams) {\n        return 'alpha' in inputParams && inputParams.alpha === true;\n    }\n    function createFormatter$1(supportsAlpha) {\n        return supportsAlpha\n            ? (v) => colorToHexRgbaString(v, '0x')\n            : (v) => colorToHexRgbString(v, '0x');\n    }\n    const NumberColorInputPlugin = {\n        id: 'input-color-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            if (!('view' in params)) {\n                return null;\n            }\n            if (params.view !== 'color') {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => {\n                return shouldSupportAlpha$1(args.params)\n                    ? colorFromRgbaNumber\n                    : colorFromRgbNumber;\n            },\n            equals: Color.equals,\n            writer: (args) => {\n                return createColorNumberWriter(shouldSupportAlpha$1(args.params));\n            },\n        },\n        controller: (args) => {\n            const supportsAlpha = shouldSupportAlpha$1(args.params);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createFormatter$1(supportsAlpha),\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function shouldSupportAlpha(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    const ObjectColorInputPlugin = {\n        id: 'input-color-object',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Color.isColorObject(value)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => colorFromObject,\n            equals: Color.equals,\n            writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue)),\n        },\n        controller: (args) => {\n            const supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            const formatter = supportsAlpha\n                ? colorToHexRgbaString\n                : colorToHexRgbString;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: formatter,\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const StringColorInputPlugin = {\n        id: 'input-color-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            if ('view' in params && params.view === 'text') {\n                return null;\n            }\n            const notation = getColorNotation(value);\n            if (!notation) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => colorFromString,\n            equals: Color.equals,\n            writer: (args) => {\n                const notation = getColorNotation(args.initialValue);\n                if (!notation) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return createColorStringWriter(notation);\n            },\n        },\n        controller: (args) => {\n            const notation = getColorNotation(args.initialValue);\n            if (!notation) {\n                throw TpError.shouldNeverHappen();\n            }\n            const stringifier = getColorStringifier(notation);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: stringifier,\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: hasAlphaComponent(notation),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$5 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$5('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (('max' in params && !isEmpty(params.max)) ||\n            ('min' in params && !isEmpty(params.min))) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n    function createConstraint$4(params) {\n        const constraints = [];\n        const sc = createStepConstraint(params);\n        if (sc) {\n            constraints.push(sc);\n        }\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function findRange(constraint) {\n        const c = constraint ? findConstraint(constraint, RangeConstraint) : null;\n        if (!c) {\n            return [undefined, undefined];\n        }\n        return [c.minValue, c.maxValue];\n    }\n    function estimateSuitableRange(constraint) {\n        const [min, max] = findRange(constraint);\n        return [min !== null && min !== void 0 ? min : 0, max !== null && max !== void 0 ? max : 100];\n    }\n    const NumberInputPlugin = {\n        id: 'input-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                options: p.optional.custom(parseListOptions),\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            constraint: (args) => createConstraint$4(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a, _b;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            const formatter = (_b = ('format' in args.params ? args.params.format : undefined)) !== null && _b !== void 0 ? _b : createNumberFormatter(getSuitableDecimalDigits(c, value.rawValue));\n            if (c && findConstraint(c, RangeConstraint)) {\n                const [min, max] = estimateSuitableRange(c);\n                return new SliderTextController(args.document, {\n                    baseStep: getBaseStep(c),\n                    parser: parseNumber,\n                    sliderProps: ValueMap.fromObject({\n                        maxValue: max,\n                        minValue: min,\n                    }),\n                    textProps: ValueMap.fromObject({\n                        draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                        formatter: formatter,\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new NumberTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                props: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point2d {\n        constructor(x = 0, y = 0) {\n            this.x = x;\n            this.y = y;\n        }\n        getComponents() {\n            return [this.x, this.y];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            if (typeof x !== 'number' || typeof y !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n            };\n        }\n    }\n    const Point2dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point2d(...comps),\n    };\n\n    const className$4 = ClassName('p2d');\n    class Point2dView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.expanded, valueToClassName(this.element, className$4(undefined, 'expanded')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$4('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$4('b'));\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n            config.viewProps.bindDisabled(buttonElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$4('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$4('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$3 = ClassName('p2dp');\n    class Point2dPickerView {\n        constructor(doc, config) {\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            if (config.layout === 'popup') {\n                this.element.classList.add(className$3(undefined, 'p'));\n            }\n            const padElem = doc.createElement('div');\n            padElem.classList.add(className$3('p'));\n            config.viewProps.bindTabIndex(padElem);\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$3('g'));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n            xAxisElem.classList.add(className$3('ax'));\n            xAxisElem.setAttributeNS(null, 'x1', '0');\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\n            this.svgElem_.appendChild(xAxisElem);\n            const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n            yAxisElem.classList.add(className$3('ax'));\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\n            yAxisElem.setAttributeNS(null, 'y1', '0');\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\n            this.svgElem_.appendChild(yAxisElem);\n            const lineElem = doc.createElementNS(SVG_NS, 'line');\n            lineElem.classList.add(className$3('l'));\n            lineElem.setAttributeNS(null, 'x1', '50%');\n            lineElem.setAttributeNS(null, 'y1', '50%');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$3('m'));\n            this.padElement.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        get allFocusableElements() {\n            return [this.padElement];\n        }\n        update_() {\n            const [x, y] = this.value.rawValue.getComponents();\n            const max = this.maxValue_;\n            const px = mapRange(x, -max, +max, 0, 100);\n            const py = mapRange(y, -max, +max, 0, 100);\n            const ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n            this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n            this.markerElem_.style.left = `${px}%`;\n            this.markerElem_.style.top = `${ipy}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n        onFoldableChange_() {\n            this.update_();\n        }\n    }\n\n    function computeOffset(ev, baseSteps, invertsY) {\n        return [\n            getStepForKey(baseSteps[0], getHorizontalStepKeys(ev)),\n            getStepForKey(baseSteps[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n        ];\n    }\n    class Point2dPickerController {\n        constructor(doc, config) {\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPickerView(doc, {\n                invertsY: this.invertsY_,\n                layout: config.layout,\n                maxValue: this.maxValue_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.padElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n            this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const max = this.maxValue_;\n            const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n            const py = mapRange(this.invertsY_ ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n            this.value.setRawValue(new Point2d(px, py), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPadKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPadKeyUp_(ev) {\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class Point2dController {\n        constructor(doc, config) {\n            var _a, _b;\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const padC = new Point2dPickerController(doc, {\n                baseSteps: [config.axes[0].baseStep, config.axes[1].baseStep],\n                invertsY: config.invertsY,\n                layout: config.pickerLayout,\n                maxValue: config.maxValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            padC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = padC;\n            this.textC_ = new PointNdTextController(doc, {\n                assembly: Point2dAssembly,\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new Point2dView(doc, {\n                expanded: this.foldable_.value('expanded'),\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.textC_.view.element);\n            (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n            (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onPadButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onPadButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value)\n            ? new Point2d(value.x, value.y)\n            : new Point2d();\n    }\n    function writePoint2d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n    }\n\n    function createDimensionConstraint$2(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$3(params) {\n        return new PointNdConstraint({\n            assembly: Point2dAssembly,\n            components: [\n                createDimensionConstraint$2('x' in params ? params.x : undefined),\n                createDimensionConstraint$2('y' in params ? params.y : undefined),\n            ],\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        const rc = constraint && findConstraint(constraint, RangeConstraint);\n        if (rc) {\n            return Math.max(Math.abs(rc.minValue || 0), Math.abs(rc.maxValue || 0));\n        }\n        const step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    function getSuitableMaxValue(initialValue, constraint) {\n        const xc = constraint instanceof PointNdConstraint\n            ? constraint.components[0]\n            : undefined;\n        const yc = constraint instanceof PointNdConstraint\n            ? constraint.components[1]\n            : undefined;\n        const xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        const yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createAxis$2(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    function shouldInvertY(params) {\n        if (!('y' in params)) {\n            return false;\n        }\n        const yParams = params.y;\n        if (!yParams) {\n            return false;\n        }\n        return 'inverted' in yParams ? !!yParams.inverted : false;\n    }\n    const Point2dInputPlugin = {\n        id: 'input-point2d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point2d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                expanded: p.optional.boolean,\n                picker: p.optional.custom(parsePickerLayout),\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.object({\n                    inverted: p.optional.boolean,\n                    max: p.optional.number,\n                    min: p.optional.number,\n                    step: p.optional.number,\n                }),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point2dFromUnknown,\n            constraint: (args) => createConstraint$3(args.params),\n            equals: Point2d.equals,\n            writer: (_args) => writePoint2d,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new Point2dController(doc, {\n                axes: [\n                    createAxis$2(value.rawValue.x, c.components[0]),\n                    createAxis$2(value.rawValue.y, c.components[1]),\n                ],\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                invertsY: shouldInvertY(args.params),\n                maxValue: getSuitableMaxValue(value.rawValue, c),\n                parser: parseNumber,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point3d {\n        constructor(x = 0, y = 0, z = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n            };\n        }\n    }\n    const Point3dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point3d(...comps),\n    };\n\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value)\n            ? new Point3d(value.x, value.y, value.z)\n            : new Point3d();\n    }\n    function writePoint3d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n    }\n\n    function createDimensionConstraint$1(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$2(params) {\n        return new PointNdConstraint({\n            assembly: Point3dAssembly,\n            components: [\n                createDimensionConstraint$1('x' in params ? params.x : undefined),\n                createDimensionConstraint$1('y' in params ? params.y : undefined),\n                createDimensionConstraint$1('z' in params ? params.z : undefined),\n            ],\n        });\n    }\n    function createAxis$1(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point3dInputPlugin = {\n        id: 'input-point3d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point3d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point3dFromUnknown,\n            constraint: (args) => createConstraint$2(args.params),\n            equals: Point3d.equals,\n            writer: (_args) => writePoint3d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point3dAssembly,\n                axes: [\n                    createAxis$1(value.rawValue.x, c.components[0]),\n                    createAxis$1(value.rawValue.y, c.components[1]),\n                    createAxis$1(value.rawValue.z, c.components[2]),\n                ],\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point4d {\n        constructor(x = 0, y = 0, z = 0, w = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            this.w = w;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z, this.w];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            const w = obj.w;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number' ||\n                typeof w !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n                w: this.w,\n            };\n        }\n    }\n    const Point4dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point4d(...comps),\n    };\n\n    function point4dFromUnknown(value) {\n        return Point4d.isObject(value)\n            ? new Point4d(value.x, value.y, value.z, value.w)\n            : new Point4d();\n    }\n    function writePoint4d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n        target.writeProperty('w', value.w);\n    }\n\n    function createDimensionConstraint(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$1(params) {\n        return new PointNdConstraint({\n            assembly: Point4dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined),\n                createDimensionConstraint('y' in params ? params.y : undefined),\n                createDimensionConstraint('z' in params ? params.z : undefined),\n                createDimensionConstraint('w' in params ? params.w : undefined),\n            ],\n        });\n    }\n    function createAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point4dInputPlugin = {\n        id: 'input-point4d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point4d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n                w: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point4dFromUnknown,\n            constraint: (args) => createConstraint$1(args.params),\n            equals: Point4d.equals,\n            writer: (_args) => writePoint4d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point4dAssembly,\n                axes: value.rawValue\n                    .getComponents()\n                    .map((comp, index) => createAxis(comp, c.components[index])),\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function createConstraint(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const StringInputPlugin = {\n        id: 'input-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n            constraint: (args) => createConstraint(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new TextController(doc, {\n                parser: (v) => v,\n                props: ValueMap.fromObject({\n                    formatter: formatString,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    const className$2 = ClassName('mll');\n    class MultiLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            config.viewProps.bindClassModifiers(this.element);\n            const textareaElem = doc.createElement('textarea');\n            textareaElem.classList.add(className$2('i'));\n            textareaElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            textareaElem.readOnly = true;\n            config.viewProps.bindDisabled(textareaElem);\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const elem = this.textareaElem_;\n            const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            const lines = [];\n            this.value.rawValue.forEach((value) => {\n                if (value !== undefined) {\n                    lines.push(this.formatter_(value));\n                }\n            });\n            elem.textContent = lines.join('\\n');\n            if (shouldScroll) {\n                elem.scrollTop = elem.scrollHeight;\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class MultiLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$1 = ClassName('sgl');\n    class SingleLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$1('i'));\n            inputElem.readOnly = true;\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const values = this.value.rawValue;\n            const lastValue = values[values.length - 1];\n            this.inputElement.value =\n                lastValue !== undefined ? this.formatter_(lastValue) : '';\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class SingleLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const BooleanMonitorPlugin = {\n        id: 'monitor-bool',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            if (args.value.rawValue.length === 1) {\n                return new SingleLogController(args.document, {\n                    formatter: BooleanFormatter,\n                    value: args.value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class GraphCursor {\n        constructor() {\n            this.emitter = new Emitter();\n            this.index_ = -1;\n        }\n        get index() {\n            return this.index_;\n        }\n        set index(index) {\n            const changed = this.index_ !== index;\n            if (changed) {\n                this.index_ = index;\n                this.emitter.emit('change', {\n                    index: index,\n                    sender: this,\n                });\n            }\n        }\n    }\n\n    const className = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.minValue_ = config.minValue;\n            this.maxValue_ = config.maxValue;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.minValue_;\n            const max = this.maxValue_;\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.index];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.index, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className('t', 'a'))) {\n                tooltipElem.classList.add(className('t', 'a'), className('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = new GraphCursor();\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.index = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.index = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.index = -1;\n                return;\n            }\n            this.cursor_.index = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.index = -1;\n        }\n    }\n\n    function createFormatter(params) {\n        return 'format' in params && !isEmpty(params.format)\n            ? params.format\n            : createNumberFormatter(2);\n    }\n    function createTextMonitor(args) {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: createFormatter(args.params),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function createGraphMonitor(args) {\n        var _a, _b, _c;\n        return new GraphLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            maxValue: (_b = ('max' in args.params ? args.params.max : null)) !== null && _b !== void 0 ? _b : 100,\n            minValue: (_c = ('min' in args.params ? args.params.min : null)) !== null && _c !== void 0 ? _c : 0,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function shouldShowGraph(params) {\n        return 'view' in params && params.view === 'graph';\n    }\n    const NumberMonitorPlugin = {\n        id: 'monitor-number',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n                view: p.optional.string,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n            reader: (_args) => numberFromUnknown,\n        },\n        controller: (args) => {\n            if (shouldShowGraph(args.params)) {\n                return createGraphMonitor(args);\n            }\n            return createTextMonitor(args);\n        },\n    };\n\n    const StringMonitorPlugin = {\n        id: 'monitor-string',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n                multiline: p.optional.boolean,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const multiline = value.rawValue.length > 1 ||\n                ('multiline' in args.params && args.params.multiline);\n            if (multiline) {\n                return new MultiLogController(args.document, {\n                    formatter: formatString,\n                    lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new SingleLogController(args.document, {\n                formatter: formatString,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class InputBinding {\n        constructor(config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue !== undefined) {\n                this.value.rawValue = this.reader(targetValue);\n            }\n        }\n        write_(rawValue) {\n            this.writer(this.target, rawValue);\n        }\n        onValueChange_(ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit('change', {\n                options: ev.options,\n                rawValue: ev.rawValue,\n                sender: this,\n            });\n        }\n    }\n\n    function createInputBindingController(plugin, args) {\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const p = ParamsParsers;\n        const valueArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(valueArgs);\n        const constraint = plugin.binding.constraint\n            ? plugin.binding.constraint(valueArgs)\n            : undefined;\n        const value = createValue(reader(result.initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals,\n        });\n        const binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs),\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            constraint: constraint,\n            document: args.document,\n            initialValue: result.initialValue,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = p.optional.string(args.params.label).value;\n        return new InputBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label || args.target.key,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class MonitorBinding {\n        constructor(config) {\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on('tick', this.onTick_);\n            this.read();\n        }\n        dispose() {\n            this.ticker.dispose();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue === undefined) {\n                return;\n            }\n            const buffer = this.value.rawValue;\n            const newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit('update', {\n                rawValue: newValue,\n                sender: this,\n            });\n        }\n        onTick_(_) {\n            this.read();\n        }\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createMonitorBindingController(plugin, args) {\n        var _a, _b, _c;\n        const P = ParamsParsers;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const bindingArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(bindingArgs);\n        const bufferSize = (_b = (_a = P.optional.number(args.params.bufferSize).value) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n            plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n        const interval = P.optional.number(args.params.interval).value;\n        const binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, interval),\n            value: initializeBuffer(bufferSize),\n        });\n        const disabled = P.optional.boolean(args.params.disabled).value;\n        const hidden = P.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            document: args.document,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = (_c = P.optional.string(args.params.label).value) !== null && _c !== void 0 ? _c : args.target.key;\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class PluginPool {\n        constructor() {\n            this.pluginsMap_ = {\n                blades: [],\n                inputs: [],\n                monitors: [],\n            };\n        }\n        getAll() {\n            return [\n                ...this.pluginsMap_.blades,\n                ...this.pluginsMap_.inputs,\n                ...this.pluginsMap_.monitors,\n            ];\n        }\n        register(r) {\n            if (r.type === 'blade') {\n                this.pluginsMap_.blades.unshift(r);\n            }\n            else if (r.type === 'input') {\n                this.pluginsMap_.inputs.unshift(r);\n            }\n            else if (r.type === 'monitor') {\n                this.pluginsMap_.monitors.unshift(r);\n            }\n        }\n        createInput(document, target, params) {\n            const initialValue = target.read();\n            if (isEmpty(initialValue)) {\n                throw new TpError({\n                    context: {\n                        key: target.key,\n                    },\n                    type: 'nomatchingcontroller',\n                });\n            }\n            const bc = this.pluginsMap_.inputs.reduce((result, plugin) => result ||\n                createInputBindingController(plugin, {\n                    document: document,\n                    target: target,\n                    params: params,\n                }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createMonitor(document, target, params) {\n            const bc = this.pluginsMap_.monitors.reduce((result, plugin) => result ||\n                createMonitorBindingController(plugin, {\n                    document: document,\n                    params: params,\n                    target: target,\n                }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createBlade(document, params) {\n            const bc = this.pluginsMap_.blades.reduce((result, plugin) => result ||\n                createBladeController(plugin, {\n                    document: document,\n                    params: params,\n                }), null);\n            if (!bc) {\n                throw new TpError({\n                    type: 'nomatchingview',\n                    context: {\n                        params: params,\n                    },\n                });\n            }\n            return bc;\n        }\n        createBladeApi(bc) {\n            if (bc instanceof InputBindingController) {\n                return new InputBindingApi(bc);\n            }\n            if (bc instanceof MonitorBindingController) {\n                return new MonitorBindingApi(bc);\n            }\n            if (bc instanceof RackController) {\n                return new RackApi(bc, this);\n            }\n            const api = this.pluginsMap_.blades.reduce((result, plugin) => result ||\n                plugin.api({\n                    controller: bc,\n                    pool: this,\n                }), null);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n    }\n\n    function createDefaultPluginPool() {\n        const pool = new PluginPool();\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            Point4dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n            BooleanMonitorPlugin,\n            StringMonitorPlugin,\n            NumberMonitorPlugin,\n            ButtonBladePlugin,\n            FolderBladePlugin,\n            SeparatorBladePlugin,\n            TabBladePlugin,\n        ].forEach((p) => {\n            pool.register(p);\n        });\n        return pool;\n    }\n\n    class ListApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get options() {\n            return this.controller_.valueController.props.get('options');\n        }\n        set options(options) {\n            this.controller_.valueController.props.set('options', options);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class SliderApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get maxValue() {\n            return this.controller_.valueController.sliderController.props.get('maxValue');\n        }\n        set maxValue(maxValue) {\n            this.controller_.valueController.sliderController.props.set('maxValue', maxValue);\n        }\n        get minValue() {\n            return this.controller_.valueController.sliderController.props.get('minValue');\n        }\n        set minValue(minValue) {\n            this.controller_.valueController.sliderController.props.set('minValue', minValue);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class TextApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get formatter() {\n            return this.controller_.valueController.props.get('formatter');\n        }\n        set formatter(formatter) {\n            this.controller_.valueController.props.set('formatter', formatter);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    const ListBladePlugin = (function () {\n        return {\n            id: 'list',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    options: p.required.custom(parseListOptions),\n                    value: p.required.raw,\n                    view: p.required.constant('list'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                const ic = new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: normalizeListOptions(args.params.options),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof ListController)) {\n                    return null;\n                }\n                return new ListApi(args.controller);\n            },\n        };\n    })();\n\n    /**\n     * @hidden\n     */\n    function exportPresetJson(targets) {\n        return targets.reduce((result, target) => {\n            return Object.assign(result, {\n                [target.presetKey]: target.read(),\n            });\n        }, {});\n    }\n    /**\n     * @hidden\n     */\n    function importPresetJson(targets, preset) {\n        targets.forEach((target) => {\n            const value = preset[target.presetKey];\n            if (value !== undefined) {\n                target.write(value);\n            }\n        });\n    }\n\n    class RootApi extends FolderApi {\n        /**\n         * @hidden\n         */\n        constructor(controller, pool) {\n            super(controller, pool);\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        /**\n         * Imports a preset of all inputs.\n         * @param preset The preset object to import.\n         */\n        importPreset(preset) {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            importPresetJson(targets, preset);\n            this.refresh();\n        }\n        /**\n         * Exports a preset of all inputs.\n         * @return An exported preset object.\n         */\n        exportPreset() {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        }\n        /**\n         * Refreshes all bindings of the pane.\n         */\n        refresh() {\n            // Force-read all input bindings\n            this.controller_.rackController.rack\n                .find(InputBindingController)\n                .forEach((ibc) => {\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller_.rackController.rack\n                .find(MonitorBindingController)\n                .forEach((mbc) => {\n                mbc.binding.read();\n            });\n        }\n    }\n\n    class RootController extends FolderController {\n        constructor(doc, config) {\n            super(doc, {\n                expanded: config.expanded,\n                blade: config.blade,\n                props: config.props,\n                root: true,\n                viewProps: config.viewProps,\n            });\n        }\n    }\n\n    const SliderBladePlugin = {\n        id: 'slider',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                max: p.required.number,\n                min: p.required.number,\n                view: p.required.constant('slider'),\n                format: p.optional.function,\n                label: p.optional.string,\n                value: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const v = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n            const vc = new SliderTextController(args.document, {\n                baseStep: 1,\n                parser: parseNumber,\n                sliderProps: ValueMap.fromObject({\n                    maxValue: args.params.max,\n                    minValue: args.params.min,\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(undefined, v),\n                    formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n                }),\n                value: createValue(v),\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof SliderTextController)) {\n                return null;\n            }\n            return new SliderApi(args.controller);\n        },\n    };\n\n    const TextBladePlugin = (function () {\n        return {\n            id: 'text',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    parse: p.required.function,\n                    value: p.required.raw,\n                    view: p.required.constant('text'),\n                    format: p.optional.function,\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                var _a;\n                const ic = new TextController(args.document, {\n                    parser: args.params.parse,\n                    props: ValueMap.fromObject({\n                        formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof TextController)) {\n                    return null;\n                }\n                return new TextApi(args.controller);\n            },\n        };\n    })();\n\n    function createDefaultWrapperElement(doc) {\n        const elem = doc.createElement('div');\n        elem.classList.add(ClassName('dfw')());\n        if (doc.body) {\n            doc.body.appendChild(elem);\n        }\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n            return;\n        }\n        const styleElem = doc.createElement('style');\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    /**\n     * The root pane of Tweakpane.\n     */\n    class Pane extends RootApi {\n        constructor(opt_config) {\n            var _a;\n            const config = opt_config || {};\n            const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            const pool = createDefaultPluginPool();\n            const rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: createBlade(),\n                props: ValueMap.fromObject({\n                    title: config.title,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            super(rootController, pool);\n            this.pool_ = pool;\n            this.containerElem_ = config.container || createDefaultWrapperElement(doc);\n            this.containerElem_.appendChild(this.element);\n            this.doc_ = doc;\n            this.usesDefaultWrapper_ = !config.container;\n            this.setUpDefaultPlugins_();\n        }\n        get document() {\n            if (!this.doc_) {\n                throw TpError.alreadyDisposed();\n            }\n            return this.doc_;\n        }\n        dispose() {\n            const containerElem = this.containerElem_;\n            if (!containerElem) {\n                throw TpError.alreadyDisposed();\n            }\n            if (this.usesDefaultWrapper_) {\n                const parentElem = containerElem.parentElement;\n                if (parentElem) {\n                    parentElem.removeChild(containerElem);\n                }\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            super.dispose();\n        }\n        registerPlugin(bundle) {\n            const plugins = 'plugin' in bundle\n                ? [bundle.plugin]\n                : 'plugins' in bundle\n                    ? bundle.plugins\n                    : [];\n            plugins.forEach((p) => {\n                this.pool_.register(p);\n                this.embedPluginStyle_(p);\n            });\n        }\n        embedPluginStyle_(plugin) {\n            if (plugin.css) {\n                embedStyle(this.document, `plugin-${plugin.id}`, plugin.css);\n            }\n        }\n        setUpDefaultPlugins_() {\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            embedStyle(this.document, 'default', '.tp-lstv_s,.tp-btnv_b,.tp-p2dv_b,.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i,.tp-grlv_g,.tp-sglv_i,.tp-mllv_i,.tp-fldv_b,.tp-rotv_b,.tp-ckbv_i,.tp-coltxtv_ms,.tp-tbiv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-lstv_s,.tp-btnv_b,.tp-p2dv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-lstv_s:hover,.tp-btnv_b:hover,.tp-p2dv_b:hover{background-color:var(--btn-bg-h)}.tp-lstv_s:focus,.tp-btnv_b:focus,.tp-p2dv_b:focus{background-color:var(--btn-bg-f)}.tp-lstv_s:active,.tp-btnv_b:active,.tp-p2dv_b:active{background-color:var(--btn-bg-a)}.tp-lstv_s:disabled,.tp-btnv_b:disabled,.tp-p2dv_b:disabled{opacity:0.5}.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-colswv_sw:hover,.tp-p2dpv_p:hover,.tp-txtv_i:hover{background-color:var(--in-bg-h)}.tp-colswv_sw:focus,.tp-p2dpv_p:focus,.tp-txtv_i:focus{background-color:var(--in-bg-f)}.tp-colswv_sw:active,.tp-p2dpv_p:active,.tp-txtv_i:active{background-color:var(--in-bg-a)}.tp-colswv_sw:disabled,.tp-p2dpv_p:disabled,.tp-txtv_i:disabled{opacity:0.5}.tp-grlv_g,.tp-sglv_i,.tp-mllv_i{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);width:100%}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono,Source Code Pro,Menlo,Courier,monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #2f3137);--bs-sh: var(--tp-base-shadow-color, rgba(0,0,0,0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #2f3137);--cnt-bg: var(--tp-container-background-color, rgba(187,188,196,0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187,188,196,0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187,188,196,0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187,188,196,0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187,188,196,0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187,188,196,0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187,188,196,0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187,188,196,0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187,188,196,0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0,0,0,0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187,188,196,0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(0,0,0,0.2))}.tp-fldv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-rotv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-v-p))}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-rotv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-fldv_c>.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv{margin-left:4px}.tp-fldv_c>.tp-fldv>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c .tp-fldv>.tp-fldv_c,.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-tabv>.tp-tabv_i,.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-fldv_c .tp-tabv>.tp-tabv_c,.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_b,.tp-rotv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-fldv_b:hover,.tp-rotv_b:hover{background-color:var(--cnt-bg-h)}.tp-fldv_b:focus,.tp-rotv_b:focus{background-color:var(--cnt-bg-f)}.tp-fldv_b:active,.tp-rotv_b:active{background-color:var(--cnt-bg-a)}.tp-fldv_b:disabled,.tp-rotv_b:disabled{opacity:0.5}.tp-fldv_m,.tp-rotv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\\'\\';display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px) / 2 - 2px);margin:auto;opacity:0.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m,.tp-rotv.tp-rotv-expanded .tp-rotv_m{transform:none}.tp-fldv_c,.tp-rotv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c,.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c{display:none}.tp-fldv.tp-fldv-expanded>.tp-fldv_c,.tp-rotv.tp-rotv-expanded .tp-rotv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-coltxtv_m,.tp-lstv{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-coltxtv_mm,.tp-lstv_m{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-coltxtv_mm svg,.tp-lstv_m svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-coltxtv_mm svg path,.tp-lstv_m svg path{fill:currentColor}.tp-coltxtv_w,.tp-pndtxtv{display:flex}.tp-coltxtv_c,.tp-pndtxtv_a{width:100%}.tp-coltxtv_c+.tp-coltxtv_c,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-pndtxtv_a{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:0.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:\\'\\';height:2px;left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us) * 4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0,0,0,0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,0.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,0.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br)}.tp-colswv.tp-v-disabled{opacity:0.5}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,0.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:\\'\\';display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left 0.05s, top 0.05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:0.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:0.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:0.5}.tp-mllv_i{display:block;height:calc(var(--bld-us) * 3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:0.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:0.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\\'\\';display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\\'\\';display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:\\'\\';display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:0.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:\\'\\';height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:\\'\\';height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:0.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:0.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:0.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\\'\\';height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:0.1;position:absolute;top:0;transition:border-radius 0.1s, height 0.1s, transform 0.1s, width 0.1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:\\'\\';font-size:0.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}');\n            this.pool_.getAll().forEach((plugin) => {\n                this.embedPluginStyle_(plugin);\n            });\n            this.registerPlugin({\n                plugins: [\n                    SliderBladePlugin,\n                    ListBladePlugin,\n                    TabBladePlugin,\n                    TextBladePlugin,\n                ],\n            });\n        }\n    }\n\n    const VERSION = new Semver('3.0.7');\n\n    exports.BladeApi = BladeApi;\n    exports.ButtonApi = ButtonApi;\n    exports.FolderApi = FolderApi;\n    exports.InputBindingApi = InputBindingApi;\n    exports.ListApi = ListApi;\n    exports.MonitorBindingApi = MonitorBindingApi;\n    exports.Pane = Pane;\n    exports.SeparatorApi = SeparatorApi;\n    exports.SliderApi = SliderApi;\n    exports.TabApi = TabApi;\n    exports.TabPageApi = TabPageApi;\n    exports.TextApi = TextApi;\n    exports.TpChangeEvent = TpChangeEvent;\n    exports.VERSION = VERSION;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _classPrivateFieldGet(receiver, privateMap) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return privateMap.get(receiver).value;\n}\n","export default function _classPrivateFieldSet(receiver, privateMap, value) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to set private field on non-instance\");\n  }\n\n  var descriptor = privateMap.get(receiver);\n\n  if (!descriptor.writable) {\n    throw new TypeError(\"attempted to set read only private field\");\n  }\n\n  descriptor.value = value;\n  return value;\n}\n","export default function _classPrivateMethodGet(receiver, privateSet, fn) {\n  if (!privateSet.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return fn;\n}\n","function isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () { }));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    construct = Reflect.construct;\n  } else {\n    construct = function construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return construct.apply(null, arguments);\n}\n\nexport default function _construct(Parent, args, Class) {\n  return construct.apply(null, arguments);\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","function getPrototypeOf(o) {\n  getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return getPrototypeOf(o);\n}\n\nexport default function _getPrototypeOf(o) {\n  return getPrototypeOf(o);\n}","import superPropBase from './_super_prop_base';\n\nfunction get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    get = Reflect.get;\n  } else {\n    get = function get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver || target);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return get(target, property, receiver);\n}\n\nexport default function _get(target, property, reciever) {\n  return get(target, property, reciever);\n}\n","import getPrototypeOf from './_get_prototype_of';\n\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n","function setPrototypeOf(o, p) {\n  setPrototypeOf = Object.setPrototypeOf || function setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return setPrototypeOf(o, p);\n}\n\nexport default function _setPrototypeOf(o, p) {\n  return setPrototypeOf(o, p);\n}\n","import setPrototypeOf from './_set_prototype_of';\n\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n","import defineProperty from './_define_property';\n\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n","import arrayWithHoles from './_array_with_holes';\nimport iterableToArrayLimit from './_iterable_to_array';\nimport nonIterableRest from './_non_iterable_rest';\n\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n","import arrayWithoutHoles from './_array_without_holes';\nimport iterableToArray from './_iterable_to_array';\nimport nonIterableSpread from './_non_iterable_spread';\n\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n","import assertThisInitialized from './_assert_this_initialized';\nimport _typeof from './_type_of';\n\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n","export default function _typeof(obj) {\n    return obj && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n};\n","import _isNativeReflectConstruct from \"./_is_native_reflect_construct\";\nimport _getPrototypeOf from \"./_get_prototype_of\";\nimport _possibleConstructorReturn from './_possible_constructor_return';\n\nexport default function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n    return function _createSuperInternal() {\n        var Super = _getPrototypeOf(Derived),\n            result;\n        if (hasNativeReflectConstruct) {\n            var NewTarget = _getPrototypeOf(this).constructor;\n            result = Reflect.construct(Super, arguments, NewTarget);\n        } else {\n            result = Super.apply(this, arguments);\n        }\n        return _possibleConstructorReturn(this, result);\n    };\n}","export default function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n    try {\n        Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () { }));\n        return true;\n    } catch (e) {\n        return false;\n    }\n}","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\n * Returns a string representation of a quatenion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var clone = vec4.clone;\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var fromValues = vec4.fromValues;\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\n\nexport var copy = vec4.copy;\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\n\nexport var set = vec4.set;\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\n\nexport var add = vec4.add;\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\n\nexport var scale = vec4.scale;\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = vec4.dot;\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\n\nexport var lerp = vec4.lerp;\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport var length = vec4.length;\n/**\n * Alias for {@link quat.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\n\nexport var normalize = vec4.normalize;\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat} a The first vector.\n * @param {ReadonlyQuat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var equals = vec4.equals;\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import { mat4, quat, vec3 } from 'gl-matrix';\n\nexport class OrbitControl {\n\n    constructor(canvas, camera, updateCallback) {\n        this.pointerDown = false;\n        this.pointerDownPos = { x: 0, y: 0 };\n        this.pointerPos = { x: 0, y: 0 };\n        this.followPos = { x: 0, y: 0 };\n        this.prevFollowPos = {x: 0, y: 0};\n        this.phi = 0.;\n        this.theta = 0.;\n        this.camera = camera;\n        this.updateCallback = updateCallback;\n\n        canvas.addEventListener('pointerdown', e => {\n            this.pointerDownPos = { x: e.clientX, y: e.clientY }\n            this.followPos = { x: e.clientX, y: e.clientY }\n            this.pointerPos = { x: e.clientX, y: e.clientY }\n            this.prevFollowPos = { x: e.clientX, y: e.clientY }\n            this.pointerDownCameraUp = [...this.camera.up];\n            this.pointerDownRotation = [...this.camera.rotation];\n            this.pointerDown = true;\n        });\n        canvas.addEventListener('pointerup', e => {\n            this.pointerDown = false;\n        });\n        canvas.addEventListener('pointermove', e => {\n            if (this.pointerDown) {\n                this.pointerPos = { x: e.clientX, y: e.clientY }\n            }\n        });\n    }\n\n    update() {\n        if (this.pointerDown) {\n            const damping = 10;\n            this.followPos.x += (this.pointerPos.x - this.followPos.x) / damping;\n            this.followPos.y += (this.pointerPos.y - this.followPos.y) / damping;\n\n            const delta = {\n                x: this.followPos.x - this.prevFollowPos.x,\n                y: this.followPos.y - this.prevFollowPos.y\n            };\n            this.prevFollowPos = { ...this.followPos };\n\n            const speed = 0.2;\n            this.phi = delta.x * speed;\n            this.theta = delta.y * speed;\n        } else {\n            this.phi *= 0.96;\n            this.theta *= 0.96;\n        }\n\n        this.camera.rotation[0] -= this.theta;\n        this.camera.rotation[1] -= this.phi;\n\n        const thetaLimitUp = -8;\n        const thetaLimitDown = -80;\n        if (this.camera.rotation[0] > thetaLimitUp) {\n            this.camera.rotation[0] = thetaLimitUp;\n        } else if (this.camera.rotation[0] < thetaLimitDown) {\n            this.camera.rotation[0] = thetaLimitDown;\n        }\n\n        quat.fromEuler(this.camera.orbit, this.camera.rotation[0], this.camera.rotation[1], this.camera.rotation[2]);\n        vec3.transformQuat(this.camera.position, [0, 0, this.camera.distance], this.camera.orbit);\n\n        this.updateCallback();\n    }\n\n}","/*\n * A speed-improved perlin and simplex noise algorithms for 2D.\n *\n * Based on example code by Stefan Gustavson (stegu@itn.liu.se).\n * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\n * Better rank ordering method by Stefan Gustavson in 2012.\n * Converted to Javascript by Joseph Gentle.\n *\n * Version 2012-03-09\n *\n * This code was placed in the public domain by its original author,\n * Stefan Gustavson. You may use it as you see fit, but\n * attribution is appreciated.\n *\n */\n\nfunction Grad(x, y, z) {\n    this.x = x; this.y = y; this.z = z;\n}\n\nGrad.prototype.dot2 = function(x, y) {\n    return this.x*x + this.y*y;\n};\n\nGrad.prototype.dot3 = function(x, y, z) {\n    return this.x*x + this.y*y + this.z*z;\n};\n\nvar grad3 = [new Grad(1,1,0),new Grad(-1,1,0),new Grad(1,-1,0),new Grad(-1,-1,0),\n                new Grad(1,0,1),new Grad(-1,0,1),new Grad(1,0,-1),new Grad(-1,0,-1),\n                new Grad(0,1,1),new Grad(0,-1,1),new Grad(0,1,-1),new Grad(0,-1,-1)];\n\nvar p = [151,160,137,91,90,15,\n131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,\n190, 6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,\n88,237,149,56,87,174,20,125,136,171,168, 68,175,74,165,71,134,139,48,27,166,\n77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,\n102,143,54, 65,25,63,161, 1,216,80,73,209,76,132,187,208, 89,18,169,200,196,\n135,130,116,188,159,86,164,100,109,198,173,186, 3,64,52,217,226,250,124,123,\n5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,\n223,183,170,213,119,248,152, 2,44,154,163, 70,221,153,101,155,167, 43,172,9,\n129,22,39,253, 19,98,108,110,79,113,224,232,178,185, 112,104,218,246,97,228,\n251,34,242,193,238,210,144,12,191,179,162,241, 81,51,145,235,249,14,239,107,\n49,192,214, 31,181,199,106,157,184, 84,204,176,115,121,50,45,127, 4,150,254,\n138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];\n// To remove the need for index wrapping, double the permutation table length\nvar perm = new Array(512);\nvar gradP = new Array(512);\n\n// This isn't a very good seeding function, but it works ok. It supports 2^16\n// different seed values. Write something better if you need more seeds.\nexport const seed = function(seed) {\n    if(seed > 0 && seed < 1) {\n    // Scale the seed out\n    seed *= 65536;\n    }\n\n    seed = Math.floor(seed);\n    if(seed < 256) {\n    seed |= seed << 8;\n    }\n\n    for(var i = 0; i < 256; i++) {\n    var v;\n    if (i & 1) {\n        v = p[i] ^ (seed & 255);\n    } else {\n        v = p[i] ^ ((seed>>8) & 255);\n    }\n\n    perm[i] = perm[i + 256] = v;\n    gradP[i] = gradP[i + 256] = grad3[v % 12];\n    }\n};\n\nseed(0);\n\n/*\nfor(var i=0; i<256; i++) {\n    perm[i] = perm[i + 256] = p[i];\n    gradP[i] = gradP[i + 256] = grad3[perm[i] % 12];\n}*/\n\n// Skewing and unskewing factors for 2, 3, and 4 dimensions\nvar F2 = 0.5*(Math.sqrt(3)-1);\nvar G2 = (3-Math.sqrt(3))/6;\n\nvar F3 = 1/3;\nvar G3 = 1/6;\n\n// 2D simplex noise\nexport const simplex2 = function(xin, yin) {\n    var n0, n1, n2; // Noise contributions from the three corners\n    // Skew the input space to determine which simplex cell we're in\n    var s = (xin+yin)*F2; // Hairy factor for 2D\n    var i = Math.floor(xin+s);\n    var j = Math.floor(yin+s);\n    var t = (i+j)*G2;\n    var x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    var y0 = yin-j+t;\n    // For the 2D case, the simplex shape is an equilateral triangle.\n    // Determine which simplex we are in.\n    var i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n    if(x0>y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n    i1=1; j1=0;\n    } else {    // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n    i1=0; j1=1;\n    }\n    // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n    // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n    // c = (3-sqrt(3))/6\n    var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n    var y1 = y0 - j1 + G2;\n    var x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords\n    var y2 = y0 - 1 + 2 * G2;\n    // Work out the hashed gradient indices of the three simplex corners\n    i &= 255;\n    j &= 255;\n    var gi0 = gradP[i+perm[j]];\n    var gi1 = gradP[i+i1+perm[j+j1]];\n    var gi2 = gradP[i+1+perm[j+1]];\n    // Calculate the contribution from the three corners\n    var t0 = 0.5 - x0*x0-y0*y0;\n    if(t0<0) {\n    n0 = 0;\n    } else {\n    t0 *= t0;\n    n0 = t0 * t0 * gi0.dot2(x0, y0);  // (x,y) of grad3 used for 2D gradient\n    }\n    var t1 = 0.5 - x1*x1-y1*y1;\n    if(t1<0) {\n    n1 = 0;\n    } else {\n    t1 *= t1;\n    n1 = t1 * t1 * gi1.dot2(x1, y1);\n    }\n    var t2 = 0.5 - x2*x2-y2*y2;\n    if(t2<0) {\n    n2 = 0;\n    } else {\n    t2 *= t2;\n    n2 = t2 * t2 * gi2.dot2(x2, y2);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 70 * (n0 + n1 + n2);\n};\n\n// 3D simplex noise\nexport const simplex3 = function(xin, yin, zin) {\n    var n0, n1, n2, n3; // Noise contributions from the four corners\n\n    // Skew the input space to determine which simplex cell we're in\n    var s = (xin+yin+zin)*F3; // Hairy factor for 2D\n    var i = Math.floor(xin+s);\n    var j = Math.floor(yin+s);\n    var k = Math.floor(zin+s);\n\n    var t = (i+j+k)*G3;\n    var x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    var y0 = yin-j+t;\n    var z0 = zin-k+t;\n\n    // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n    // Determine which simplex we are in.\n    var i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n    var i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n    if(x0 >= y0) {\n    if(y0 >= z0)      { i1=1; j1=0; k1=0; i2=1; j2=1; k2=0; }\n    else if(x0 >= z0) { i1=1; j1=0; k1=0; i2=1; j2=0; k2=1; }\n    else              { i1=0; j1=0; k1=1; i2=1; j2=0; k2=1; }\n    } else {\n    if(y0 < z0)      { i1=0; j1=0; k1=1; i2=0; j2=1; k2=1; }\n    else if(x0 < z0) { i1=0; j1=1; k1=0; i2=0; j2=1; k2=1; }\n    else             { i1=0; j1=1; k1=0; i2=1; j2=1; k2=0; }\n    }\n    // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n    // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n    // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n    // c = 1/6.\n    var x1 = x0 - i1 + G3; // Offsets for second corner\n    var y1 = y0 - j1 + G3;\n    var z1 = z0 - k1 + G3;\n\n    var x2 = x0 - i2 + 2 * G3; // Offsets for third corner\n    var y2 = y0 - j2 + 2 * G3;\n    var z2 = z0 - k2 + 2 * G3;\n\n    var x3 = x0 - 1 + 3 * G3; // Offsets for fourth corner\n    var y3 = y0 - 1 + 3 * G3;\n    var z3 = z0 - 1 + 3 * G3;\n\n    // Work out the hashed gradient indices of the four simplex corners\n    i &= 255;\n    j &= 255;\n    k &= 255;\n    var gi0 = gradP[i+   perm[j+   perm[k   ]]];\n    var gi1 = gradP[i+i1+perm[j+j1+perm[k+k1]]];\n    var gi2 = gradP[i+i2+perm[j+j2+perm[k+k2]]];\n    var gi3 = gradP[i+ 1+perm[j+ 1+perm[k+ 1]]];\n\n    // Calculate the contribution from the four corners\n    var t0 = 0.6 - x0*x0 - y0*y0 - z0*z0;\n    if(t0<0) {\n    n0 = 0;\n    } else {\n    t0 *= t0;\n    n0 = t0 * t0 * gi0.dot3(x0, y0, z0);  // (x,y) of grad3 used for 2D gradient\n    }\n    var t1 = 0.6 - x1*x1 - y1*y1 - z1*z1;\n    if(t1<0) {\n    n1 = 0;\n    } else {\n    t1 *= t1;\n    n1 = t1 * t1 * gi1.dot3(x1, y1, z1);\n    }\n    var t2 = 0.6 - x2*x2 - y2*y2 - z2*z2;\n    if(t2<0) {\n    n2 = 0;\n    } else {\n    t2 *= t2;\n    n2 = t2 * t2 * gi2.dot3(x2, y2, z2);\n    }\n    var t3 = 0.6 - x3*x3 - y3*y3 - z3*z3;\n    if(t3<0) {\n    n3 = 0;\n    } else {\n    t3 *= t3;\n    n3 = t3 * t3 * gi3.dot3(x3, y3, z3);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 32 * (n0 + n1 + n2 + n3);\n\n};\n\n// ##### Perlin noise stuff\n\nfunction fade(t) {\n    return t*t*t*(t*(t*6-15)+10);\n}\n\nfunction lerp(a, b, t) {\n    return (1-t)*a + t*b;\n}\n\n// 2D Perlin Noise\nexport const perlin2 = function(x, y) {\n    // Find unit grid cell containing point\n    var X = Math.floor(x), Y = Math.floor(y);\n    // Get relative xy coordinates of point within that cell\n    x = x - X; y = y - Y;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255;\n\n    // Calculate noise contributions from each of the four corners\n    var n00 = gradP[X+perm[Y]].dot2(x, y);\n    var n01 = gradP[X+perm[Y+1]].dot2(x, y-1);\n    var n10 = gradP[X+1+perm[Y]].dot2(x-1, y);\n    var n11 = gradP[X+1+perm[Y+1]].dot2(x-1, y-1);\n\n    // Compute the fade curve value for x\n    var u = fade(x);\n\n    // Interpolate the four results\n    return lerp(\n        lerp(n00, n10, u),\n        lerp(n01, n11, u),\n        fade(y));\n};\n\n// 3D Perlin Noise\nexport const perlin3 = function(x, y, z) {\n    // Find unit grid cell containing point\n    var X = Math.floor(x), Y = Math.floor(y), Z = Math.floor(z);\n    // Get relative xyz coordinates of point within that cell\n    x = x - X; y = y - Y; z = z - Z;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255; Z = Z & 255;\n\n    // Calculate noise contributions from each of the eight corners\n    var n000 = gradP[X+  perm[Y+  perm[Z  ]]].dot3(x,   y,     z);\n    var n001 = gradP[X+  perm[Y+  perm[Z+1]]].dot3(x,   y,   z-1);\n    var n010 = gradP[X+  perm[Y+1+perm[Z  ]]].dot3(x,   y-1,   z);\n    var n011 = gradP[X+  perm[Y+1+perm[Z+1]]].dot3(x,   y-1, z-1);\n    var n100 = gradP[X+1+perm[Y+  perm[Z  ]]].dot3(x-1,   y,   z);\n    var n101 = gradP[X+1+perm[Y+  perm[Z+1]]].dot3(x-1,   y, z-1);\n    var n110 = gradP[X+1+perm[Y+1+perm[Z  ]]].dot3(x-1, y-1,   z);\n    var n111 = gradP[X+1+perm[Y+1+perm[Z+1]]].dot3(x-1, y-1, z-1);\n\n    // Compute the fade curve value for x, y, z\n    var u = fade(x);\n    var v = fade(y);\n    var w = fade(z);\n\n    // Interpolate\n    return lerp(\n        lerp(\n        lerp(n000, n100, u),\n        lerp(n001, n101, u), w),\n        lerp(\n        lerp(n010, n110, u),\n        lerp(n011, n111, u), w),\n        v);\n};","\nimport { mat4, quat, vec3 } from 'gl-matrix';\nimport { OrbitControl } from './orbit-control';\nimport { simplex2 } from './noise';\n\nimport drawVertShaderSource from './shader/draw.vert';\nimport drawFragShaderSource from './shader/draw.frag';\nimport portalVertShaderSource from './shader/portal.vert';\nimport portalFragShaderSource from './shader/portal.frag';\nimport compositeVertShaderSource from './shader/composite.vert';\nimport compositeFragShaderSource from './shader/composite.frag';\nimport hexBlur1VertShaderSource from './shader/hex-blur-1.vert';\nimport hexBlur1FragShaderSource from './shader/hex-blur-1.frag';\nimport hexBlur2VertShaderSource from './shader/hex-blur-2.vert';\nimport hexBlur2FragShaderSource from './shader/hex-blur-2.frag';\n\nexport class HexagonalBokeh {\n    oninit;\n\n    #time = 0;\n    #frames = 0;\n    #deltaTime = 0;\n    #isDestroyed = false;\n\n    camera = {\n        matrix: mat4.create(),\n        near: 80,\n        far: 350,\n        distance: 150,\n        orbit: quat.create(),\n        position: vec3.create(),\n        rotation: vec3.create(),\n        up: vec3.fromValues(0, 1, 0)\n    };\n\n    blur = {\n        radius: 7,\n        scale: 2\n    }\n\n    constructor(canvas, pane, oninit = null) {\n        this.canvas = canvas;\n        this.pane = pane;\n        this.oninit = oninit;\n\n        this.#init();\n    }\n\n    resize() {\n        const gl = this.gl;\n\n        this.#resizeCanvasToDisplaySize(gl.canvas);\n        \n        // When you need to set the viewport to match the size of the canvas's\n        // drawingBuffer this will always be correct\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n        // resize the framebuffer textures\n        this.#resizeTextures(gl);\n\n        this.#updateProjectionMatrix(gl);\n    }\n\n    run(time = 0) {\n        this.#deltaTime = time - this.#time;\n        this.#time = time;\n        this.#frames += this.#deltaTime / 16;\n\n        if (this.#isDestroyed) return;\n\n        this.control.update();\n\n        const worldInvers = mat4.create();\n        mat4.invert(worldInvers, this.drawUniforms.u_worldMatrix);\n        mat4.transpose(this.drawUniforms.u_worldInverseTransposeMatrix, worldInvers);\n\n        this.#render();\n\n        requestAnimationFrame((t) => this.run(t));\n    }\n\n    #render() {\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n        gl.enable(gl.DEPTH_TEST);\n        gl.disable(gl.CULL_FACE);\n\n        // draw depth and color \n        this.#setFramebuffer(gl, this.drawFramebuffer, this.drawFramebufferWidth, this.drawFramebufferHeight);\n        gl.useProgram(this.drawProgram);\n        gl.bindVertexArray(this.objectVAO);\n        gl.uniformMatrix4fv(this.drawLocations.u_worldMatrix, false, this.drawUniforms.u_worldMatrix);\n        gl.uniformMatrix4fv(this.drawLocations.u_viewMatrix, false, this.drawUniforms.u_viewMatrix);\n        gl.uniformMatrix4fv(this.drawLocations.u_projectionMatrix, false, this.drawUniforms.u_projectionMatrix);\n        gl.uniformMatrix4fv(this.drawLocations.u_worldInverseTransposeMatrix, false, this.drawUniforms.u_worldInverseTransposeMatrix);\n        gl.uniform3f(this.drawLocations.u_cameraPosition, this.camera.position[0], this.camera.position[1], this.camera.position[2]);\n        gl.uniform1f(this.drawLocations.u_frames, this.#frames);\n        gl.clearBufferfv(gl.COLOR, 0, [0.0, 0.0, 0.0, 0.0]);\n        gl.clearBufferfv(gl.DEPTH, 0, [1.]);\n        gl.drawElements(gl.TRIANGLES, this.objectBuffers.numElem, gl.UNSIGNED_SHORT, 0);\n        // draw the portal triangle on top\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, gl.SRC_COLOR);\n        gl.blendEquation(gl.FUNC_SUBTRACT);\n        gl.useProgram(this.portalProgram);\n        gl.bindVertexArray(this.centerObjectVAO);\n        gl.uniformMatrix4fv(this.portalLocations.u_worldMatrix, false, this.portalUniforms.u_worldMatrix);\n        gl.uniformMatrix4fv(this.portalLocations.u_viewMatrix, false, this.drawUniforms.u_viewMatrix);\n        gl.uniformMatrix4fv(this.portalLocations.u_projectionMatrix, false, this.drawUniforms.u_projectionMatrix);\n        gl.uniform1f(this.portalLocations.u_frames, this.#frames);\n        gl.drawArrays(gl.TRIANGLES, 0, this.centerObjectBuffers.numElem);\n        gl.disable(gl.BLEND);\n        this.#setFramebuffer(gl, null, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n        // blit depth and color\n        gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this.drawFramebuffer);\n        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this.blitFramebuffer);\n        gl.clearBufferfv(gl.COLOR, 0, [0.0, 0.0, 0.0, 1.0]);\n        gl.clearBufferfv(gl.DEPTH, 0, [0]);\n        gl.blitFramebuffer(0, 0, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, 0, this.drawFramebufferWidth, this.drawFramebufferHeight, gl.COLOR_BUFFER_BIT, gl.NEAREST);\n        gl.blitFramebuffer(0, 0, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, 0, this.drawFramebufferWidth, this.drawFramebufferHeight, gl.DEPTH_BUFFER_BIT, gl.NEAREST);\n        this.#setFramebuffer(gl, null, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n        // render first blur pass\n        this.#renderBlurPass(\n            this.hexBlur1Framebuffer, \n            this.drawFramebufferWidth, this.drawFramebufferHeight, \n            this.hexBlur1Program,\n            [\n                [this.hexBlur1Locations.u_colorTexture, this.colorTexture],\n                [this.hexBlur1Locations.u_depthTexture, this.depthTexture]\n            ],\n            [\n                [this.hexBlur1Locations.u_radiusScale, this.blur.scale]\n            ],\n            [\n                [this.hexBlur1Locations.u_maxCoCRadius, this.blur.radius]\n            ]\n        );\n\n        // render second blur pass\n        this.#renderBlurPass(\n            this.hexBlur2Framebuffer, \n            this.drawFramebufferWidth, this.drawFramebufferHeight, \n            this.hexBlur2Program,\n            [\n                [this.hexBlur2Locations.u_verticalBlurTexture, this.hex1VerticalBlurTexture],\n                [this.hexBlur2Locations.u_diagonalBlurTexture, this.hex1DiagonalBlurTexture],\n                [this.hexBlur2Locations.u_depthTexture, this.depthTexture]\n            ],\n            [\n                [this.hexBlur2Locations.u_radiusScale, this.blur.scale]\n            ],\n            [\n                [this.hexBlur2Locations.u_maxCoCRadius, this.blur.radius]\n            ]\n        );\n\n        // draw to the canvas\n        gl.clearColor(0, 0, 0, 1);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.useProgram(this.compositeProgram);\n        gl.bindVertexArray(this.quadVAO);\n        gl.uniform1i(this.compositeLocations.u_texture, 0);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex2BlurTexture);\n        gl.drawArrays(gl.TRIANGLES, 0, this.quadBuffers.numElem);\n    }\n\n    #renderBlurPass(fbo, w, h, program, locTex, locFloat = [], locInt = []) {\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n       this.#setFramebuffer(gl, fbo, w, h);\n       gl.useProgram(program);\n       gl.clearColor(0, 0, 0, 1);\n       gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n       gl.bindVertexArray(this.quadVAO);\n\n       locTex.forEach(([loc, texture], ndx) => {\n           gl.uniform1i(loc, ndx);\n           gl.activeTexture(gl[`TEXTURE${ndx}`]);\n           gl.bindTexture(gl.TEXTURE_2D, texture);\n       });\n\n       locFloat.forEach(([loc, value]) => {\n           gl.uniform1f(loc, value);\n       });\n\n       locInt.forEach(([loc, value]) => {\n           gl.uniform1i(loc, value);\n       });\n\n       gl.drawArrays(gl.TRIANGLES, 0, this.quadBuffers.numElem);\n       this.#setFramebuffer(gl, null, gl.drawingBufferWidth, gl.drawingBufferHeight);\n   }\n\n    destroy() {\n        this.#isDestroyed = true;\n    }\n\n    #init() {\n        this.gl = this.canvas.getContext('webgl2', { antialias: false, alpha: false });\n\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n        if (!gl) {\n            throw new Error('No WebGL 2 context!')\n        }\n\n        ///////////////////////////////////  PROGRAM SETUP\n\n        // setup programs\n        this.drawProgram = this.#createProgram(gl, [drawVertShaderSource, drawFragShaderSource]);\n        this.portalProgram = this.#createProgram(gl, [portalVertShaderSource, portalFragShaderSource]);\n        this.hexBlur1Program = this.#createProgram(gl, [hexBlur1VertShaderSource, hexBlur1FragShaderSource], null, { a_position: 0 });\n        this.hexBlur2Program = this.#createProgram(gl, [hexBlur2VertShaderSource, hexBlur2FragShaderSource], null, { a_position: 0 });\n        this.compositeProgram = this.#createProgram(gl, [compositeVertShaderSource, compositeFragShaderSource], null, { a_position: 0 });\n\n        // find the locations\n        this.drawLocations = {\n            a_position: gl.getAttribLocation(this.drawProgram, 'a_position'),\n            a_normal: gl.getAttribLocation(this.drawProgram, 'a_normal'),\n            a_uv: gl.getAttribLocation(this.drawProgram, 'a_uv'),\n            u_worldMatrix: gl.getUniformLocation(this.drawProgram, 'u_worldMatrix'),\n            u_viewMatrix: gl.getUniformLocation(this.drawProgram, 'u_viewMatrix'),\n            u_projectionMatrix: gl.getUniformLocation(this.drawProgram, 'u_projectionMatrix'),\n            u_worldInverseTransposeMatrix: gl.getUniformLocation(this.drawProgram, 'u_worldInverseTransposeMatrix'),\n            u_cameraPosition: gl.getUniformLocation(this.drawProgram, 'u_cameraPosition'),\n            u_frames: gl.getUniformLocation(this.drawProgram, 'u_frames')\n        };\n        this.portalLocations = {\n            a_position: gl.getAttribLocation(this.portalProgram, 'a_position'),\n            a_uv: gl.getAttribLocation(this.portalProgram, 'a_uv'),\n            u_worldMatrix: gl.getUniformLocation(this.portalProgram, 'u_worldMatrix'),\n            u_viewMatrix: gl.getUniformLocation(this.portalProgram, 'u_viewMatrix'),\n            u_projectionMatrix: gl.getUniformLocation(this.portalProgram, 'u_projectionMatrix'),\n            u_frames: gl.getUniformLocation(this.portalProgram, 'u_frames')\n        };\n        this.hexBlur1Locations = {\n            a_position: gl.getAttribLocation(this.hexBlur1Program, 'a_position'),\n            u_colorTexture: gl.getUniformLocation(this.hexBlur1Program, 'u_colorTexture'),\n            u_depthTexture: gl.getUniformLocation(this.hexBlur1Program, 'u_depthTexture'),\n            u_maxCoCRadius: gl.getUniformLocation(this.hexBlur1Program, 'u_maxCoCRadius'),\n            u_radiusScale: gl.getUniformLocation(this.hexBlur1Program, 'u_radiusScale')\n        };\n        this.hexBlur2Locations = {\n            a_position: gl.getAttribLocation(this.hexBlur2Program, 'a_position'),\n            u_verticalBlurTexture: gl.getUniformLocation(this.hexBlur2Program, 'u_verticalBlurTexture'),\n            u_diagonalBlurTexture: gl.getUniformLocation(this.hexBlur2Program, 'u_diagonalBlurTexture'),\n            u_depthTexture: gl.getUniformLocation(this.hexBlur2Program, 'u_depthTexture'),\n            u_maxCoCRadius: gl.getUniformLocation(this.hexBlur2Program, 'u_maxCoCRadius'),\n            u_radiusScale: gl.getUniformLocation(this.hexBlur2Program, 'u_radiusScale')\n        };\n        this.compositeLocations = {\n            a_position: gl.getAttribLocation(this.compositeProgram, 'a_position'),\n            u_texture: gl.getUniformLocation(this.compositeProgram, 'u_texture')\n        };\n\n        // setup uniforms\n        this.drawUniforms = {\n            u_worldMatrix: mat4.create(),\n            u_viewMatrix: mat4.create(),\n            u_projectionMatrix: mat4.create(),\n            u_worldInverseTransposeMatrix: mat4.create()\n        };\n        mat4.rotate(this.drawUniforms.u_worldMatrix, this.drawUniforms.u_worldMatrix, -Math.PI / 2, [1, 0, 0]);\n        mat4.scale(this.drawUniforms.u_worldMatrix, this.drawUniforms.u_worldMatrix, [50, 50, 50]);\n        mat4.translate(this.drawUniforms.u_worldMatrix, this.drawUniforms.u_worldMatrix, [0, 0, 0]);\n\n        this.portalUniforms = {\n            u_worldMatrix: mat4.create()\n        }\n        mat4.translate(this.portalUniforms.u_worldMatrix, this.portalUniforms.u_worldMatrix, [0, 5, 0]);\n\n        /////////////////////////////////// GEOMETRY / MESH SETUP\n\n        // create object VAO\n        const size = 8;\n        this.objectGeometry = this.#createXYPlaneGeometry(size, size, 110, 110, (p) => {\n            const maxHeight = 0.4;\n            const scale = 0.9;\n            const n = simplex2(p.x * scale, p.y * scale);\n            const l = vec3.length([p.x, p.y, p.z]);\n            let lw = (l / 4) * 1.;\n            const c = Math.sin(Math.acos(p.x / 5)) * Math.cos(Math.asin(p.y / 5));\n            return {x: p.x, y: p.y, z: n * maxHeight * lw - c * 6.5 + 5.3 } \n        });\n        this.objectBuffers = { \n            position: this.#createBuffer(gl, this.objectGeometry.vertices),\n            normal: this.#createBuffer(gl, this.objectGeometry.normals),\n            uv: this.#createBuffer(gl, this.objectGeometry.uvs),\n            numElem: this.objectGeometry.count\n        };\n        this.objectVAO = this.#makeVertexArray(gl, [\n            [this.objectBuffers.position, this.drawLocations.a_position, 3],\n            [this.objectBuffers.normal, this.drawLocations.a_normal, 3],\n            [this.objectBuffers.uv, this.drawLocations.a_uv, 2]\n        ], this.objectGeometry.indices);\n\n        // create quad VAO\n        const quadPositions = [\n            -1, -1,\n            3, -1,\n            -1, 3\n        ];\n        this.quadBuffers = {\n            position: this.#createBuffer(gl, quadPositions),\n            numElem: quadPositions.length / 2\n        };\n        this.quadVAO = this.#makeVertexArray(gl, [[this.quadBuffers.position, this.drawLocations.a_position, 2]]);\n\n        // create center triangle VAO\n        const pR = 30;\n        const rot = -Math.PI / 2;\n        const centerObjectPositions = [\n            Math.cos(0 + rot) * pR, Math.sin(0 + rot) * pR, 0,\n            Math.cos(2 * Math.PI / 3 + rot) * pR, Math.sin(2 * Math.PI / 3 + rot) * pR, 0,\n            Math.cos(4 * Math.PI / 3 + rot) * pR, Math.sin(4 * Math.PI / 3 + rot) * pR, 0\n        ];\n        this.centerObjectBuffers = {\n            position: this.#createBuffer(gl, centerObjectPositions),\n            uv: this.#createBuffer(gl, [0, 0, 0, 1, 1, 1]),\n            numElem: centerObjectPositions.length / 3\n        };\n        this.centerObjectVAO = this.#makeVertexArray(gl, [\n            [this.centerObjectBuffers.position, this.portalLocations.a_position, 3],\n            [this.centerObjectBuffers.uv, this.portalLocations.a_uv, 2]\n        ]);\n\n        // initial client dimensions\n        const clientWidth = gl.canvas.clientWidth;\n        const clientHeight = gl.canvas.clientHeight;\n\n         \n        /////////////////////////////////// INITIAL DRAW PASS SETUP\n\n        this.drawFramebufferWidth = clientWidth;\n        this.drawFramebufferHeight = clientHeight;\n\n        // the initial draw pass renders the scene using multisample renderbuffers for\n        // color and depth which are then blitted to separate textures\n\n        // draw framebuffer setup\n        this.drawFramebuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.drawFramebuffer);\n        // depth render buffer setup\n        this.depthRenderbuffer = gl.createRenderbuffer();\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.depthRenderbuffer);\n        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, 4, gl.DEPTH_COMPONENT32F, this.drawFramebufferWidth, this.drawFramebufferHeight);\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, this.depthRenderbuffer);\n        // color renderbuffer setup\n        this.colorRenderbuffer = gl.createRenderbuffer();\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.colorRenderbuffer);\n        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, gl.getParameter(gl.MAX_SAMPLES), gl.RGBA8, this.drawFramebufferWidth, this.drawFramebufferHeight);\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.RENDERBUFFER, this.colorRenderbuffer);\n        if(gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE) {\n            console.error('could not complete render framebuffer setup')\n        }\n\n        // blit framebuffer setup\n        this.blitFramebuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.blitFramebuffer);\n        // depth texture setup\n        this.depthTexture = this.#createAndSetupTexture(gl, gl.NEAREST, gl.NEAREST);\n        gl.bindTexture(gl.TEXTURE_2D, this.depthTexture);\n        gl.texImage2D(this. gl.TEXTURE_2D, 0, gl.DEPTH_COMPONENT32F, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.DEPTH_COMPONENT, gl.FLOAT, null);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.TEXTURE_2D, this.depthTexture, 0);   \n        // color texture setup\n        this.colorTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.colorTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.colorTexture, 0);\n        if(gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE) {\n            console.error('could not complete render framebuffer setup')\n        }\n\n        /////////////////////////////////// FIRST BLUR PASS SETUP\n\n        this.hex1VerticalBlurTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex1VerticalBlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        this.hex1DiagonalBlurTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex1DiagonalBlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        this.hexBlur1Framebuffer = this.#createFramebuffer(gl, [this.hex1VerticalBlurTexture, this.hex1DiagonalBlurTexture]);\n        if(gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE) {\n            console.error('could not complete blur hexagonal first pass framebuffer setup')\n        }\n\n        /////////////////////////////////// SECOND BLUR PASS SETUP\n\n        this.hex2BlurTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex2BlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        this.hexBlur2Framebuffer = this.#createFramebuffer(gl, [this.hex2BlurTexture]);\n        if(gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE) {\n            console.error('could not complete blur hexagonal second pass framebuffer setup')\n        }\n\n        this.resize();\n\n        this.#updateCameraMatrix();\n        this.#updateProjectionMatrix(gl);\n\n        this.#initOrbitControls();\n        this.#initTweakpane();\n\n        if (this.oninit) this.oninit(this);\n    }\n\n    #createXYPlaneGeometry(w, h, wSegments, hSegments, distort) {\n        let sx = -w / 2;\n        let sy = -h / 2;\n        const dx = w / wSegments;\n        const dy = h / hSegments;\n        const count = wSegments * hSegments * 6;\n        const vertices = [];\n        const normals = [];\n        const uvs = [];\n        const indices = [];\n        const wOff = wSegments + 1;\n        const dd = Math.min(dx, dy) * 0.5;\n\n        for(let iy = 0; iy <= hSegments; ++iy) {\n            for(let ix = 0; ix <= wSegments; ++ix) {\n                let p = {\n                    x: sx + dx * ix,\n                    y: sy + dy * iy,\n                    z: 0\n                };\n                let n = {x: 0, y: 0, z: 1};\n\n                if (distort) {\n                    let x1 = {...p};\n                    let x2 = {...p};\n                    let y1 = {...p};\n                    let y2 = {...p};\n                    x1.x -= dd;\n                    x2.x += dd;\n                    y1.y -= dd;\n                    y2.y += dd;\n                    x1 = distort(x1);\n                    x2 = distort(x2);\n                    y1 = distort(y1);\n                    y2 = distort(y2);\n                    t = vec3.fromValues(\n                        x2.x - x1.x,\n                        x2.y - x1.y,\n                        x2.z - x1.z\n                    );\n                    b = vec3.fromValues(\n                        y2.x - y1.x,\n                        y2.y - y1.y,\n                        y2.z - y1.z\n                    );\n                    const normal = vec3.cross(vec3.create(), t, b);\n                    vec3.normalize(normal, normal);\n                    n.x = normal[0];\n                    n.y = normal[1];\n                    n.z = normal[2];\n\n                    p = distort(p);\n                }\n\n                vertices.push(p.x, p.y, p.z);\n                normals.push(n.x, n.y, n.z);\n                uvs.push(ix / wSegments, iy / hSegments);\n            }\n        }\n\n        for(let iy = 0; iy < hSegments; ++iy) {\n            for(let ix = 0; ix < wSegments; ++ix) {\n                indices.push(\n                    iy * wOff + ix,\n                    iy * wOff + ix + 1,\n                    (iy + 1) * wOff + ix + 1\n                );\n                indices.push(\n                    (iy + 1) * wOff + ix + 1,\n                    (iy + 1) * wOff + ix,\n                    iy * wOff + ix\n                );\n            }\n        }\n\n        return {\n            vertices,\n            normals,\n            uvs,\n            indices,\n            count\n        };\n    }\n\n    #createBuffer(gl, data) {\n        const buffer = this.gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        return buffer;\n    }\n\n    #initOrbitControls() {\n        this.control = new OrbitControl(this.canvas, this.camera, () => this.#updateCameraMatrix());\n    }\n\n    #createFramebuffer(gl, colorAttachements) {\n        const fbo = gl.createFramebuffer();\n        const drawBuffers = [];\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n        colorAttachements.forEach((texture, ndx) => {\n            const attachmentPoint = gl[`COLOR_ATTACHMENT${ndx}`];\n            gl.framebufferTexture2D(\n                gl.FRAMEBUFFER,\n                attachmentPoint,\n                gl.TEXTURE_2D, \n                texture,\n                0);\n            drawBuffers.push(attachmentPoint);\n        });\n        gl.drawBuffers(drawBuffers);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        return fbo;\n    }\n\n    #makeVertexArray(gl, bufLocNumElmPairs, indices) {\n        const va = gl.createVertexArray();\n        gl.bindVertexArray(va);\n        for (const [buffer, loc, numElem] of bufLocNumElmPairs) {\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n            gl.enableVertexAttribArray(loc);\n            gl.vertexAttribPointer(\n                loc,      // attribute location\n                numElem,        // number of elements\n                gl.FLOAT, // type of data\n                false,    // normalize\n                0,        // stride (0 = auto)\n                0,        // offset\n            );\n        }\n        if (indices) {\n            const indexBuffer = gl.createBuffer();\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);\n        }\n        gl.bindVertexArray(null);\n        return va;\n    }\n\n    #createShader(gl, type, source) {\n        const shader = gl.createShader(type);\n        gl.shaderSource(shader, source);\n        gl.compileShader(shader);\n        const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n        if (success) {\n            return shader;\n        }\n\n        console.error(gl.getShaderInfoLog(shader));\n        gl.deleteShader(shader);\n    }\n\n    #createProgram(gl, shaderSources, transformFeedbackVaryings, attribLocations) {\n        const program = gl.createProgram();\n\n        [gl.VERTEX_SHADER, gl.FRAGMENT_SHADER].forEach((type, ndx) => {\n            const shader = this.#createShader(gl, type, shaderSources[ndx]);\n            gl.attachShader(program, shader);\n        });\n\n        if (transformFeedbackVaryings) {\n            gl.transformFeedbackVaryings(program, transformFeedbackVaryings, gl.SEPARATE_ATTRIBS);\n        }\n\n        if (attribLocations) {\n            for(const attrib in attribLocations) {\n                gl.bindAttribLocation(program, attribLocations[attrib], attrib);\n            }\n        }\n\n        gl.linkProgram(program);\n        const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n\n        if (success) {\n            return program;\n        }\n\n        console.error(gl.getProgramInfoLog(program));\n        gl.deleteProgram(program);\n    }\n\n    #setFramebuffer(gl, fbo, width, height) {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo); // all draw commands will affect the framebuffer\n        gl.viewport(0, 0, width, height);\n    }\n\n    #createAndSetupTexture(gl, minFilter, magFilter) {\n        const texture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter);\n        return texture;\n    }\n\n    #resizeTextures(gl) {\n        const clientWidth = gl.canvas.clientWidth;\n        const clientHeight = gl.canvas.clientHeight;\n        this.drawFramebufferWidth = clientWidth;\n        this.drawFramebufferHeight = clientHeight;\n\n        // resize draw/blit textures and buffers\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.depthRenderbuffer);\n        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, 4, gl.DEPTH_COMPONENT32F, clientWidth, clientHeight);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.colorRenderbuffer);\n        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, gl.getParameter(gl.MAX_SAMPLES), gl.RGBA8, clientWidth, clientHeight);\n        gl.bindTexture(gl.TEXTURE_2D, this.depthTexture);\n        gl.texImage2D(this. gl.TEXTURE_2D, 0, gl.DEPTH_COMPONENT32F, clientWidth, clientHeight, 0, gl.DEPTH_COMPONENT, gl.FLOAT, null);\n        gl.bindTexture(gl.TEXTURE_2D, this.colorTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, clientWidth, clientHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n        // resize blur texture\n        gl.bindTexture(gl.TEXTURE_2D, this.hex1VerticalBlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex1DiagonalBlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.bindTexture(gl.TEXTURE_2D, this.hex2BlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.drawFramebufferWidth, this.drawFramebufferHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        \n        // reset bindings\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    }\n\n    #updateCameraMatrix() {\n        mat4.targetTo(this.camera.matrix, this.camera.position, [0, 0, 0], this.camera.up);\n        mat4.invert(this.drawUniforms.u_viewMatrix, this.camera.matrix);\n    }\n\n    #updateProjectionMatrix(gl) {\n        const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\n        mat4.perspective(this.drawUniforms.u_projectionMatrix, Math.PI / 4, aspect, this.camera.near, this.camera.far);\n    }\n\n    #resizeCanvasToDisplaySize(canvas) {\n        // Lookup the size the browser is displaying the canvas in CSS pixels.\n        const displayWidth  = canvas.clientWidth;\n        const displayHeight = canvas.clientHeight;\n       \n        // Check if the canvas is not the same size.\n        const needResize = canvas.width  !== displayWidth ||\n                           canvas.height !== displayHeight;\n       \n        if (needResize) {\n          // Make the canvas the same size\n          canvas.width  = displayWidth;\n          canvas.height = displayHeight;\n        }\n       \n        return needResize;\n    }\n\n    #initTweakpane() {\n        if (this.pane) {\n            const maxFar = 700;\n\n            const cameraFolder = this.pane.addFolder({ title: 'Camera' });\n            this.#createTweakpaneSlider(cameraFolder, this.camera, 'near', 'near', 1, maxFar, null, () => this.#updateProjectionMatrix(this.gl));\n            this.#createTweakpaneSlider(cameraFolder, this.camera, 'far', 'far', 1, maxFar, null, () => this.#updateProjectionMatrix(this.gl));\n            const blurSettings = this.pane.addFolder({ title: 'Blur Settings' });\n            this.#createTweakpaneSlider(blurSettings, this.blur, 'radius', 'radius', 0, 30, 1);\n            this.#createTweakpaneSlider(blurSettings, this.blur, 'scale', 'scale', 1, 5, 0.1);\n        }\n    }\n\n    #createTweakpaneSlider(folder, obj, propName, label, min, max, stepSize = null, callback) {\n        const slider = folder.addBlade({\n            view: 'slider',\n            label,\n            min,\n            max,\n            step: stepSize,\n            value: obj[propName],\n        });\n        slider.on('change', e => {\n            obj[propName] = e.value;\n            if(callback) callback();\n        });\n    }\n}\n","#version 300 es\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_worldInverseTransposeMatrix;\nuniform vec3 u_cameraPosition;\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec3 v_position;\nout vec3 v_viewPosition;\nout vec3 v_normal;\nout vec2 v_uv;\nout vec3 v_surfaceToView;\n\nvoid main() {\n    v_uv = a_uv;\n    v_normal = (u_worldInverseTransposeMatrix * vec4(a_normal, 0.)).xyz;\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n    v_surfaceToView = u_cameraPosition - worldPosition.xyz;\n    v_position = a_position.xyz;\n    v_viewPosition = viewPosition.xyz;\n}\n","#version 300 es\n\nprecision highp float;\n\nuniform float u_frames;\n\nin vec3 v_position;\nin vec3 v_normal;\nin vec2 v_uv;\nin vec3 v_surfaceToView;\nin vec3 v_viewPosition;\n\nout vec4 outColor;\n\nfloat hash(vec2 p) {\n    p = fract(p * vec2(153.343, 414.3234));\n    p += dot(p, p + 44.463);\n    return fract(p.x * p.y);\n}\n\n//\tSimplex 3D Noise \n//\tby Ian McEwan, Ashima Arts\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nfloat snoise(vec3 v){ \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  // First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //  x0 = x0 - 0. + 0.0 * C \n  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n  // Permutations\n  i = mod(i, 289.0 ); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  // Gradients\n  // ( N*N points uniformly over a square, mapped onto an octahedron.)\n  float n_ = 1.0/7.0; // N=7\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n  //Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n  // Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\nfloat sparkle(vec2 p, float seed) {\n    vec2 id = floor(p);\n    vec2 suv = fract(p) * 2. - 1.;\n    \n    float r = hash(id);\n    float x = fract(r * 54.32);\n    float y = fract(r * 432.33);\n    vec2 offs = vec2(x, y) * 2. - 1.;\n    \n    float d = length(suv - offs);\n    float m = 1. - smoothstep(.0, .12, d);\n    \n    m *= pow(sin(seed + r), 5.);\n    return abs(m);\n}\n\nvoid main() {\n    vec3 pos = v_position;\n    vec3 n = normalize(v_normal);\n    vec3 v = normalize(v_surfaceToView);\n    vec3 l = vec3(0., 1., 0.);\n\n    float nDL = dot(n, l);\n\n    // calculate the reflection vector\n    float nDv = dot(n, v);\n    vec3 r = nDv * n * 2. - v;\n    r = normalize(r);\n\n    // fade the color to black by the distance from the center\n    float fade = 1. - smoothstep(0.2, 1., length(pos.xy) * 0.25);\n    float sparkleFade = 1. - smoothstep(0.9, 1., length(pos.xy) * 0.25);\n\n    // surface shade\n    float shade = nDL * 0.8 + (snoise(r * .5)) * 0.3;\n    shade *= 0.7;\n\n    // create the sand sparkle effect\n    float t = u_frames * 0.0;\n    float sLayer1 = sparkle(pos.xy * 6., t + abs(dot(r + v_viewPosition * 0.01, vec3(10.))));\n    float sLayer2 = sparkle(pos.xy * 12., t + abs(dot(r + v_viewPosition * 0.01, vec3(9.))));\n\n    outColor = vec4(vec3(shade * shade * fade + sLayer1 * sparkleFade + sLayer2 * sparkleFade * 0.7), 1.);\n    outColor.rgb += r * 0.02;\n}\n","#version 300 es\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\n\nin vec3 a_position;\nin vec2 a_uv;\n\nout vec3 v_position;\nout vec2 v_uv;\n\nvoid main() {\n    v_uv = a_uv;\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n}\n","#version 300 es\n\nprecision highp float;\n\nuniform float u_frames;\n\nin vec3 v_position;\nin vec2 v_uv;\n\nout vec4 outColor;\n\nfloat hash(vec2 p) {\n    p = fract(p * vec2(153.343, 414.3234));\n    p += dot(p, p + 44.463);\n    return fract(p.x * p.y);\n}\n\n//\tSimplex 3D Noise \n//\tby Ian McEwan, Ashima Arts\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nfloat snoise(vec3 v){ \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  // First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //  x0 = x0 - 0. + 0.0 * C \n  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n  // Permutations\n  i = mod(i, 289.0 ); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  // Gradients\n  // ( N*N points uniformly over a square, mapped onto an octahedron.)\n  float n_ = 1.0/7.0; // N=7\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n  //Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n  // Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\n\nvoid main() {\n    vec3 pos = v_position;\n    float n = snoise(vec3(vec2(v_uv.x * 0.001, v_uv.y * 2. - u_frames * 0.008) * 2., u_frames * 0.01)) * 2. - 1.;\n    vec3 color = vec3(0.); //vec3(0.8, 0.9, 1.) * (n * 0.5);\n    outColor = vec4(color, .7);\n    outColor = vec4(0.6, 0.8, 0.8, 1.) * 0.7;\n}\n","#version 300 es\n\nin vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0., 1.);\n}","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D u_colorTexture;\nuniform sampler2D u_depthTexture;\nuniform int u_maxCoCRadius;\nuniform float u_radiusScale;\n\nlayout(location = 0) out vec4 verticalBlurColor;\nlayout(location = 1) out vec4 diagnoalBlurColor;\n\n#pragma glslify: blur = require('./hex-blur.glsl', tex=texture, texSize=textureSize)\n\n#define PI 3.141593\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / vec2(textureSize(u_colorTexture, 0));\n\n    blur(\n        uv,\n        vec2(0., -1.),\n        u_maxCoCRadius,\n        u_radiusScale,\n        u_colorTexture,\n        u_depthTexture,\n        vec2(0.5),\n        verticalBlurColor\n    );\n\n    blur(\n        uv,\n        vec2(cos(PI / 6.), sin(PI / 6.)),\n        u_maxCoCRadius,\n        u_radiusScale,\n        u_colorTexture,\n        u_depthTexture,\n        vec2(0.5),\n        diagnoalBlurColor\n    );\n\n    diagnoalBlurColor = verticalBlurColor + diagnoalBlurColor;\n}","#version 300 es\n\nin vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0., 1.);\n}","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D u_verticalBlurTexture;\nuniform sampler2D u_diagonalBlurTexture;\nuniform sampler2D u_depthTexture;\nuniform int u_maxCoCRadius;\nuniform float u_radiusScale;\n\nlayout(location = 0) out vec4 outColor;\n\n#pragma glslify: blur = require('./hex-blur.glsl', tex=texture, texSize=textureSize)\n\n#define PI 3.141593\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / vec2(textureSize(u_verticalBlurTexture, 0));\n    vec4 verticalBlurColor = texture(u_verticalBlurTexture, uv);\n    vec4 diagnoalBlurColor = texture(u_diagonalBlurTexture, uv);\n    float depth = texture(u_depthTexture, uv).x;\n    vec4 resultColor1;\n    vec4 resultColor2;\n\n    blur(\n        uv,\n        vec2(cos(PI / 6.), sin(PI / 6.)),\n        u_maxCoCRadius,\n        u_radiusScale,\n        u_verticalBlurTexture,\n        u_depthTexture,\n        vec2(0.5),\n        resultColor1\n    );\n\n    blur(\n        uv,\n        vec2(cos((5. * PI) / 6.), sin((5. * PI) / 6.)),\n        u_maxCoCRadius,\n        u_radiusScale,\n        u_diagonalBlurTexture,\n        u_depthTexture,\n        vec2(0.5),\n        resultColor2\n    );\n\n    diagnoalBlurColor = (resultColor1 + resultColor2) * .5;\n\n    outColor = diagnoalBlurColor;\n}","#version 300 es\n\nin vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0., 1.);\n}","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D u_texture;\n\nout vec4 outColor;\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / vec2(textureSize(u_texture, 0));\n    vec4 color = texture(u_texture, uv);\n    float s1 = 0.5;\n    float s2 = 0.8;\n    vec4 boost = smoothstep(s1, s2, color) - smoothstep(s2, s2 + 0.1 , color);\n    outColor = color + boost.rrra * 0.6;\n}","import { Pane } from 'tweakpane';\nimport { HexagonalBokeh } from './hexagonal-bokeh';\n\nconst queryString = window.location.search;\nconst urlParams = new URLSearchParams(queryString);\nconst debugParam = urlParams.get('debug');\n\nlet DEBUG = debugParam !== null;\n\nif (process.env.NODE_ENV !== 'production') {\n    // Only runs in development and will be stripped in production builds.\n    DEBUG = true;\n}\n\nlet sketch;\nlet resizeTimeoutId;\n\nwindow.addEventListener('load', () => {\n    const canvas = document.body.querySelector('#c');\n\n    let pane;\n    if (DEBUG) {\n        pane = new Pane({ title: 'Settings' });\n    }\n\n    sketch = new HexagonalBokeh(canvas, pane, (sketch) => {\n        sketch.run(); \n    });\n});\n\nwindow.addEventListener('resize', () => {\n    if (sketch) {\n        if (resizeTimeoutId)\n            clearTimeout(resizeTimeoutId);\n\n        resizeTimeoutId = setTimeout(() => {\n            resizeTimeoutId = null;\n            sketch.resize();\n        }, 300);\n    }\n});\n\n\n"],"names":["global","factory","self","ReferenceError","instance","Constructor","TypeError","receiver","privateMap","has","get","value","descriptor","writable","privateSet","fn","$fb222e0933d810ce$var$isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","$fb222e0933d810ce$var$construct","Parent1","args1","Class1","Parent","args","Class","a","push","apply","Function","bind","_setPrototypeOf","arguments","$e5f9bd0c37e9914c$var$_defineProperties","target","props","i","length","enumerable","configurable","Object","defineProperty","key","protoProps","staticProps","obj","$7dc24fd3d8e84af6$var$getPrototypeOf","o1","setPrototypeOf","getPrototypeOf","o","__proto__","$5f25f83067750fb9$var$get","target1","property1","receiver1","property","base","object","hasOwnProperty","$7dc24fd3d8e84af6$export$2e2bcd8739ae039","$3ff79f9fa52f36c6$export$2e2bcd8739ae039","desc","getOwnPropertyDescriptor","$ac93fd2313270fd8$var$setPrototypeOf","p1","p","subClass","superClass","create","constructor","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","forEach","$7dbcf7086e8d10dc$export$2e2bcd8739ae039","iter","Symbol","iterator","Array","from","arr","isArray","$6e00726c30bb8aa8$export$2e2bcd8739ae039","$8664303016091545$export$2e2bcd8739ae039","$9e1e3aff84b72d71$export$2e2bcd8739ae039","arr2","$c0e5c3a46846db0d$export$2e2bcd8739ae039","$9a10eb5a4ae3d243$export$2e2bcd8739ae039","$08b63c45f54847ee$export$2e2bcd8739ae039","Derived","hasNativeReflectConstruct","Boolean","valueOf","$d60c94504fa4a111$export$2e2bcd8739ae039","result","Super","NewTarget","this","$87fe16ba8ff029a3$export$2e2bcd8739ae039","undefined","exports","Semver","text","ref","$d8de0eb6e0dd5f0d$export$2e2bcd8739ae039","split","core","prerelease","coreComps","major","parseInt","minor","patch","join","BladeApi","controller","controller_","viewProps","disabled","set","hidden","TpEvent","TpChangeEvent","presetKey","last","TpUpdateEvent","TpFoldEvent","expanded","isEmpty","deepEqualsArray","a1","a2","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","context","name","nomatchingcontroller","nomatchingview","JSON","stringify","params","notbindable","propertynotfound","shouldneverhappen","TpError","config","_a","message","type","stack","Error","BindingTarget","opt_id","obj_","key_","presetKey_","valueObj","read","isBindable","notBindable","propertyNotFound","ButtonApi","label","valueController","title","eventName","handler","bh","emitter","on","_this","Emitter","observers_","observers","observer","event","PREFIX","ClassName","viewName","opt_elementName","opt_modifier","extractValue","ev","rawValue","bindValue","applyValue","h1","h2","input","bindValueMap","valueMap","valueToClassName","elem","className","active","classList","add","remove","applyClass","bindValueToTextContent","textContent","className$q","ButtonView","doc","element","createElement","bindClassModifiers","buttonElem","bindDisabled","appendChild","buttonElement","titleElem","ButtonController","onClick_","view","addEventListener","emit","sender","BoundValue","initialValue","constraint_","constraint","equals_","equals","v1","v2","rawValue_","setRawValue","forceEmit","options","opts","constrainedValue","constrain","PrimitiveValue","value_","createValue","ValueMap","valMap_","_this1","_loop","reduce","assign","createCore","createParamsParserBuilder","parse","optional","v","succeeded","createParamsParserBuilders","custom","boolean","number","string","function","constant","raw","keyToParserMap","tmp","parser","parseObject","array","itemParser","parseItem","item","$44ff19cc49d55455$export$2e2bcd8739ae039","ParamsParsers","required","parseParams","className$p","POS_TO_CLASS_NAME_MAP","veryfirst","first","verylast","BladeController","parent_","blade","pos","handleDispose","parentElement","removeChild","disposeElement","SVG_NS","forceReflow","offsetHeight","supportsTouch","ontouchstart","getWindowDocument","document","ICON_ID_TO_INNER_HTML_MAP","check","dropdown","p2dpad","createSvgIconElement","iconId","createElementNS","innerHTML","insertElementAt","index","insertBefore","children","removeElement","removeChildElements","findNextTarget","relatedTarget","explicitOriginalTarget","className$o","LabelView","labelElem","childNodes","removeChildNodes","frag","createDocumentFragment","map","line","createTextNode","lineNode","createLabelNode","labelElement","valueElem","valueElement","LabelController","ButtonBladePlugin","id","accept","fromObject","api","ValueBladeController","createBlade","positions","Foldable","ValueMap1","styleExpanded","exHeight","expandedClassName","coreObj","completed","expandedHeight","shouldFixHeight","temporaryExpanded","applyHeight","foldable","style","height","styleHeight","bindFoldable","folder","containerElement","callback","t","transition","disableTransitionTemporarily","clientHeight","propertyName","RackLikeApi","rackApi","rackApi_","NestedOrderedSet","extract","items_","cache_","Set","onSubListAdd_","onSubListRemove_","extract_","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","allItems","next","done","err","return","item1","opt_index","includes","shouldNeverHappen","splice","subList","root","indexOf","delete","off","InputBindingApi","onBindingChange_","emitter_","binding","InputBindingController","MonitorBindingApi","onBindingUpdate_","MonitorBindingController","ticker","dispose","findSubBladeApiSet","RackApi","getApiByController","apiSet","api1","find","createBindingTarget","pool","onRackAdd_","onRackRemove_","onRackInputChange_","onRackMonitorUpdate_","apiSet_","pool_","rack","bc","setUpApi_","opt_params","ownerDocument","createInput","createMonitor","addBlade","addFolderAsBlade","addButtonAsBlade","addSeparatorAsBlade","addTabAsBlade","gapi","createBladeApi","bladeController","isRoot","api3","FolderApi","rackController","addInput","addMonitor","addFolder","addButton","addSeparator","addTab","RackLikeController","PlainView","findSubRack","RackController","findSubBladeControllerSet","BladeRack","onBladePositionsChange_","onSetAdd_","onSetRemove_","onChildDispose_","onChildPositionsChange_","onChildInputChange_","onChildMonitorUpdate_","onChildValueChange_","onChildViewPropsChange_","onDescendantLayout_","onDescendantInputChange_","onDescendantMonitorUpdate_","blade_","bcSet_","items","parent","controllerClass","updatePositions_","visibleItems","firstVisibleItem","lastVisibleItem","ps","_ev","bcs","b","findInputBindingController","findMonitorBindingController","findValueBladeController","_","bladeContainerClassName","FolderView","className_","foldable_","bindExpandedClass","titleElement","markElem","containerElem","FolderController","rc","onTitleClick_","FolderBladePlugin","LabeledValueController","SeparatorApi","className$n","SeparatorView","hrElem","SeparatorController","SeparatorBladePlugin","className$m","valueToModifier","modifier","ViewProps","ValueMap2","tabIndex","disposed","opt_initialValue","_b","className$l","TabItemView","selected","TabItemController","TabPageController","onItemClick_","ic_","itemProps","cc_","itemController","contentController","TabPageApi","contentRackApi","TabApi","onPageAdd_","onPageRemove_","pageApiMap_","Map","pageSet","pc","setUpPageApi_","api4","className$k","TabView","empty","itemsElem","itemsElement","contentsElem","contentsElement","TabController","cr","onPageSelectedChange_","pageSet_","empty_","applyPages_","keepSelection_","firstSelIndex","findIndex","TabBladePlugin","pages","c","createBladeController","plugin","ac","ManualTicker","IntervalTicker","interval","disabled_","timerId_","onTick_","doc_","interval_","setTimer_","inactive","clearTimer_","win","defaultView","clearInterval","setInterval","CompositeConstraint","constraints","findConstraint","constraintClass","tmpResult","sc","ListConstraint","RangeConstraint","maxValue","max","minValue","min","Math","StepConstraint","step","round","className$j","ListView","onValueChange_","props_","selectElem","optionElem","dataset","String","selectElement","update_","ListController","onSelectChange_","optElem","currentTarget","selectedOptions","itemIndex","Number","className$i","PopupView","shows","PopupController","className$h","TextView","onChange_","inputElem","inputElement","refresh","formatter","TextController","onInputChange_","parser_","parsedValue","boolFromUnknown","BooleanFormatter","boolToString","NumberLiteralNode","BINARY_OPERATION_MAP","pow","BinaryOperationNode","operator","left","right","op","evaluate","UNARY_OPERATION_MAP","UnaryOperationNode","expr","expression","combineReader","parsers","cursor","readWhitespace","m","substr","match","readDecimalDigits","readExponentPart","toLowerCase","si","ds","sign","sds","readSignedInteger","readDecimalIntegerLiteral","ch","nzd","readNonZeroDigit","readDecimalLiteral","dil","dot","dds","readNonDecimalIntegerLiteral","prefix","bds","parseBinaryDigits","ods","readOctalDigits","hds","readHexDigits","readNumericLiteral","parsePrimaryExpression","num","evaluable","parseLiteral","parseExpression","cl","parseParenthesizedExpression","readBinaryOperator","ops","op1","startsWith","parseBinaryOperationExpression","exprParser","firstExpr","nextExpr","createBinaryOperationExpressionParser","parseUnaryExpression","parseNumber","r","parseEcmaNumberExpression","numberFromUnknown","pv","numberToString","createNumberFormatter","digits","toFixed","innerFormatter","formatPercentage","stringFromUnknown","formatString","fillBuffer","buffer","bufferSize","initializeBuffer","connectValues","param","primary","secondary","forward","backward","changing","preventFeedback","getStepForKey","baseStep","altKey","shiftKey","upKey","downKey","getVerticalStepKeys","getHorizontalStepKeys","isArrowKey","isVerticalArrowKey","computeOffset$1","rect","getBoundingClientRect","x","pageX","scrollX","y","pageY","scrollY","top","PointerHandler","lastTouch_","onDocumentMouseMove_","onDocumentMouseUp_","onMouseDown_","onTouchEnd_","onTouchMove_","onTouchStart_","elem_","passive","offset","bounds","width","point","preventDefault","focus","data","computePosition_","removeEventListener","touch","targetTouches","clientX","clientY","mapRange","start1","end1","start2","end2","getDecimalDigits","replace","constrainRange","loopRange","className$g","NumberTextView","arrayPosition","onDraggingChange_","dragging_","dragging","knobElem","knobElement","guideElem","bodyElem","guideBodyElem_","headElem","guideHeadElem_","tooltipElem","tooltipElem_","aox","adx","setAttributeNS","NumberTextController","originRawValue_","onInputKeyDown_","onInputKeyUp_","onPointerDown_","onPointerMove_","onPointerUp_","baseStep_","ph","dx","computeDraggingValue_","className$f","SliderView","trackElem","bindTabIndex","trackElement","SliderController","onKeyDown_","onKeyUp_","onPointerDownOrMove_","ptHandler_","d","handlePointerEvent_","className$e","SliderTextView","sliderElem","sliderView_","sliderView","textElem","textView_","textView","SliderTextController","sliderC_","sliderProps","textC_","textProps","writePrimitive","write","parseListOptions","parsePickerLayout","parsePointDimensionParams","normalizeListOptions","createListConstraint","findListItems","getSuitableDecimalDigits","getBaseStep","findStep","getSuitableDraggingScale","abs","floor","log10","className$d","CheckboxView","wrapperElem","checked","CheckboxController","BooleanInputPlugin","reader","_args","lc","writer","className$c","ColorView","swatchElem","swatchElement","textElement","pickerLayout","pickerElem","pickerElement","hsvToRgb","h","s","rp","gp","bp","hp","sp","vp","ref6","ref7","ref8","ref9","ref10","removeAlphaComponent","comps","appendAlphaComponent","alpha","MODE_CONVERTER_MAP","hsl","l","hsv","sd","rgb","lp","ref1","ref2","ref3","ref4","ref5","g","cmax","cmin","CONSTRAINT_MAP","isRgbColorComponent","Color","mode","mode_","comps_","opt_mode","components","fromMode","toMode","_fromMode","rgbComps","getComponents","color","toRgbaObject","isRgbColorObject","comps1","comps2","className$b","ColorPickerView","alphaViews_","hsvElem","svElem","svPaletteView_","svPaletteView","hElem","hPaletteView_","hPaletteView","rgbElem","alphaViews","palette","aElem","apElem","atElem","elems","modeSelectElement","textViews","parseColorInputParams","picker","getBaseStepForColor","forAlpha","parseCssNumberOrPercentage","parseFloat","ANGLE_TO_DEG_MAP","deg","angle","grad","rad","PI","turn","parseCssNumberOrAngle","unit","NOTATION_TO_PARSER_MAP","isNaN","mRgb","mRrggbb","getColorNotation","notation","subparser","CompositeColorParser","hasAlphaComponent","colorFromString","cv","black","zerofill","comp","hex","colorToHexRgbString","hexes","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","colorToFunctionalRgbaString","aFormatter","rgbFormatter","NOTATION_TO_STRINGIFIER_MAP","formatters","getColorStringifier","className$a","APaletteView","barElem","colorElem","colorElem_","markerElem","markerElem_","previewElem","previewElem_","leftColor","rightColor","gradientComps","background","backgroundColor","APaletteController","className$9","ColorTextView","modeElem","modeElem_","createModeSelectElement","modeMarkerElem","textsElem","textsElem_","textViews_","applyTextViews_","colorMode","compElem","FORMATTER","MODE_TO_CONSTRAINT_MAP","createComponentController","draggingScale","ColorTextController","onModeSelectChange_","ccs_","createComponentControllers_","cc","ccs","cs","_this2","pickedMode","className$8","HPaletteView","HPaletteController","hue","className$7","SvPaletteView","canvasElem","canvasElement","ctx","getContext","hsvComps","imgData","getImageData","iy","ix","putImageData","SvPaletteController","saturation","dv","ColorPickerController","hPaletteC_","svPaletteC_","alphaIcs_","supportsAlpha","className$6","ColorSwatchView","swatchElem_","ColorSwatchController","ColorController","onButtonBlur_","onButtonClick_","onPopupChildBlur_","onPopupChildKeydown_","swatchC_","popC_","pickerC","allFocusableElements","pickerC_","nextTarget","contains","colorFromObject","isColorObject","colorToRgbNumber","colorToRgbaNumber","colorFromRgbNumber","colorFromRgbaNumber","writeRgbaColorObject","writeProperty","writeRgbColorObject","shouldSupportAlpha$1","inputParams","createFormatter$1","NumberColorInputPlugin","colorToNumber","ObjectColorInputPlugin","isRgbaColorObject","StringColorInputPlugin","createColorStringWriter","stringifier","PointNdConstraint","asm_","assembly","toComponents","fromComponents","className$5","PointNdTextView","axisElem","PointNdTextController","acs_","axes","createAxisController","createConstraint$4","createStepConstraint","createRangeConstraint","estimateSuitableRange","findRange","NumberInputPlugin","format","Point2d","Point2dAssembly","$fb222e0933d810ce$export$2e2bcd8739ae039","className$4","Point2dView","className$3","Point2dPickerView","onFoldableChange_","invertsY_","invertsY","maxValue_","layout","padElem","padElement","svgElem","svgElem_","xAxisElem","yAxisElem","lineElem","lineElem_","px","py","ipy","computeOffset","baseSteps","Point2dPickerController","onPadKeyDown_","onPadKeyUp_","baseSteps_","dy","Point2dController","onPadButtonBlur_","onPadButtonClick_","padC","point2dFromUnknown","isObject","writePoint2d","createDimensionConstraint$2","getSuitableMaxDimensionValue","createAxis$2","shouldInvertY","yParams","inverted","Point2dInputPlugin","xc","yc","xr","yr","Point3d","z","Point3dAssembly","point3dFromUnknown","writePoint3d","createDimensionConstraint$1","createAxis$1","Point3dInputPlugin","Point4d","w","Point4dAssembly","point4dFromUnknown","writePoint4d","createDimensionConstraint","Point4dInputPlugin","StringInputPlugin","Constants","defaultInterval","defaultLineCount","className$2","MultiLogView","onValueUpdate_","formatter_","textareaElem","lineCount","readOnly","textareaElem_","shouldScroll","scrollTop","scrollHeight","lines","MultiLogController","className$1","SingleLogView","values","lastValue","SingleLogController","BooleanMonitorPlugin","GraphCursor","index_","className1","GraphLogView","onCursorChange_","minValue_","cursor_","maxIndex","points","tx","ty","GraphLogController","onGraphMouseMove_","onGraphMouseLeave_","onGraphPointerDown_","onGraphPointerMove_","onGraphPointerUp_","offsetX","createFormatter","shouldShowGraph","NumberMonitorPlugin","defaultBufferSize","_c","createGraphMonitor","createTextMonitor","StringMonitorPlugin","multiline","InputBinding","targetValue","write_","MonitorBinding","reader_","newValue","newBuffer","slice","createTrimmedBuffer","createPushedBuffer","createTicker","PluginPool","pluginsMap_","blades","inputs","monitors","unshift","valueArgs","createInputBindingController","P","bindingArgs","createMonitorBindingController","ListApi","SliderApi","sliderController","TextApi","ListBladePlugin","ic","RootApi","preset","targets","importPresetJson","ibc","exportPresetJson","mbc","RootController","SliderBladePlugin","vc","TextBladePlugin","embedStyle","css","querySelector","styleElem","tpStyle","head","Pane","opt_config","register","createDefaultPluginPool","rootController","containerElem_","container","body","createDefaultWrapperElement","usesDefaultWrapper_","setUpDefaultPlugins_","alreadyDisposed","reciever","parentElem","bundle","plugins","embedPluginStyle_","getAll","registerPlugin","VERSION","$ad914f4ec673f32c$exports","define","amd","globalThis","Tweakpane","$bddce99c0c610ba2$export$fd293b15f47e270","$bddce99c0c610ba2$export$b67359430d3b1b2","Float32Array","$bddce99c0c610ba2$export$5ada478c8a628231","random","$2e616e7f2b93d8b0$export$185802fd694ee1f5","out","$2e616e7f2b93d8b0$export$9cd59f9826255e47","$2e616e7f2b93d8b0$export$784d13d8ee351f07","$2e616e7f2b93d8b0$export$a82be99ed2a44a7d","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","$2e616e7f2b93d8b0$export$adaa4cf7ef1b65be","$2e616e7f2b93d8b0$export$f0954fd7d5368655","$2e616e7f2b93d8b0$export$9cb09a71b7d66923","a01","a02","a03","a12","a13","a23","$2e616e7f2b93d8b0$export$6897c284b6f9f4dc","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","$2e616e7f2b93d8b0$export$33f3c024b4ae00a1","$2e616e7f2b93d8b0$export$a04698f914c55ed9","$2e616e7f2b93d8b0$export$2060d2db72cce88f","b0","b1","b2","b3","$2e616e7f2b93d8b0$export$d73ee8ef04f5226a","$2e616e7f2b93d8b0$export$dcdf75081b88279d","$2e616e7f2b93d8b0$export$bb628a54ab399bc9","axis","b12","b20","b21","b22","len","hypot","sin","cos","$2e616e7f2b93d8b0$export$a59c8716592e09af","$2e616e7f2b93d8b0$export$cf71e4d4ca4d1cfd","$2e616e7f2b93d8b0$export$ea6eae3365de5b9c","$2e616e7f2b93d8b0$export$bc9e79e74e9fddf6","$2e616e7f2b93d8b0$export$832ca188ffb1955d","$2e616e7f2b93d8b0$export$926fc125ff3c666c","$2e616e7f2b93d8b0$export$dd47cc2f828c32ef","$2e616e7f2b93d8b0$export$7dc997d67d2b7f33","$2e616e7f2b93d8b0$export$ad5ddaedc8f405df","$2e616e7f2b93d8b0$export$9545ac307f2a256b","q","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","$2e616e7f2b93d8b0$export$ff497f2be31cc6a","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","$2e616e7f2b93d8b0$export$202e99f82f7f0395","mat","$2e616e7f2b93d8b0$export$71dc54d92bd04b57","$2e616e7f2b93d8b0$export$df3937d3b537df0a","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","sqrt","$2e616e7f2b93d8b0$export$ddf9c55c9f2be172","sx","sy","sz","$2e616e7f2b93d8b0$export$1def1f860edc4b1f","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","$2e616e7f2b93d8b0$export$2ff2bbe382249af7","yx","zx","zy","$2e616e7f2b93d8b0$export$89b5708c387cac6c","bottom","near","far","rl","tb","nf","$2e616e7f2b93d8b0$export$4cf19729ec9a96b8","fovy","aspect","f","tan","Infinity","$2e616e7f2b93d8b0$export$541149539f3a4684","$2e616e7f2b93d8b0$export$294bba99a6af0c0c","$2e616e7f2b93d8b0$export$58ae211c788e338f","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","$2e616e7f2b93d8b0$export$c5f65ef3eb668f27","lr","bt","$2e616e7f2b93d8b0$export$4f2167e613cfc87b","$2e616e7f2b93d8b0$export$b1d31ea7b4d854e","$2e616e7f2b93d8b0$export$d924e14fd6d9aa66","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","$2e616e7f2b93d8b0$export$aa67782f4dc9e52c","$2e616e7f2b93d8b0$export$42d51816ce590c93","$2e616e7f2b93d8b0$export$326827e8268e9cdb","$2e616e7f2b93d8b0$export$e16d8520af44a096","$2e616e7f2b93d8b0$export$4e2d2ead65e5f7e3","$2e616e7f2b93d8b0$export$c697bed75648cdb7","$2e616e7f2b93d8b0$export$553579f63bdd7137","$2e616e7f2b93d8b0$export$f2599a5cf1109d8","$2e616e7f2b93d8b0$export$e9bab7fafb253603","a0","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","$2e616e7f2b93d8b0$export$6e3a27864ab166fe","$2e616e7f2b93d8b0$export$f93b5905241a7cca","$b817ce0f5cdadb29$export$185802fd694ee1f5","$b817ce0f5cdadb29$export$9cd59f9826255e47","$b817ce0f5cdadb29$export$f24224f1c91d8156","$b817ce0f5cdadb29$export$a82be99ed2a44a7d","$b817ce0f5cdadb29$export$784d13d8ee351f07","$b817ce0f5cdadb29$export$adaa4cf7ef1b65be","$b817ce0f5cdadb29$export$e16d8520af44a096","$b817ce0f5cdadb29$export$4e2d2ead65e5f7e3","$b817ce0f5cdadb29$export$2060d2db72cce88f","$b817ce0f5cdadb29$export$cd007d971a5a2143","$b817ce0f5cdadb29$export$803ce6b71a0a94b2","ceil","$b817ce0f5cdadb29$export$a3fe094919f356fd","$b817ce0f5cdadb29$export$96ec731ed4dcb222","$b817ce0f5cdadb29$export$8960430cfd85939f","$b817ce0f5cdadb29$export$2077e0241d6afd3c","$b817ce0f5cdadb29$export$dcdf75081b88279d","$b817ce0f5cdadb29$export$19cedf1da84ba854","$b817ce0f5cdadb29$export$9f17032d917177de","$b817ce0f5cdadb29$export$88e6ebb4fe54f538","$b817ce0f5cdadb29$export$ab44e1323ffc8376","$b817ce0f5cdadb29$export$aef51622e549b8b0","$b817ce0f5cdadb29$export$70ae2c07e401031b","$b817ce0f5cdadb29$export$a3295358bff77e","$b817ce0f5cdadb29$export$fc1400facf92c78","$b817ce0f5cdadb29$export$94132a0e348806d4","$b817ce0f5cdadb29$export$bb646b20bb93d339","$b817ce0f5cdadb29$export$3a89f8d6f6bf6c9f","$b817ce0f5cdadb29$export$ae8865616f30561c","factorTimes2","factor1","factor2","factor3","factor4","$b817ce0f5cdadb29$export$b9c5f84610baddaf","inverseFactor","inverseFactorTimesTwo","$b817ce0f5cdadb29$export$4385e60b38654f68","zScale","$b817ce0f5cdadb29$export$5ffbd13800309d59","$b817ce0f5cdadb29$export$f0bfa0a0024626ee","$b817ce0f5cdadb29$export$c32adef9e939ce85","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","$b817ce0f5cdadb29$export$a59c8716592e09af","$b817ce0f5cdadb29$export$cf71e4d4ca4d1cfd","$b817ce0f5cdadb29$export$ea6eae3365de5b9c","$b817ce0f5cdadb29$export$944b09d2ad10b378","mag","cosine","acos","$b817ce0f5cdadb29$export$7f9972325ebfd559","$b817ce0f5cdadb29$export$42d51816ce590c93","$b817ce0f5cdadb29$export$f2599a5cf1109d8","$b817ce0f5cdadb29$export$e9bab7fafb253603","vec","$b817ce0f5cdadb29$export$f93b5905241a7cca","$b817ce0f5cdadb29$export$6e3a27864ab166fe","$b817ce0f5cdadb29$export$159d9494db57879b","$b817ce0f5cdadb29$export$6c4a311cc157c764","$b817ce0f5cdadb29$export$2422cd6c492a8b3a","$b817ce0f5cdadb29$export$99d8dd3f32a3435","$b817ce0f5cdadb29$export$4b80e395e36b5a56","stride","count","arg","$3843f3adc77d8e3a$export$f24224f1c91d8156","$3843f3adc77d8e3a$export$ab44e1323ffc8376","$3612f84116b201a9$export$185802fd694ee1f5","$3612f84116b201a9$export$f0954fd7d5368655","$3612f84116b201a9$export$4286ddefc8f49512","$3612f84116b201a9$export$3f70be5e7d7dc51","out_axis","$3612f84116b201a9$export$b363da9ded343252","dotproduct","$3612f84116b201a9$export$94132a0e348806d4","$3612f84116b201a9$export$2060d2db72cce88f","$3612f84116b201a9$export$a59c8716592e09af","$3612f84116b201a9$export$cf71e4d4ca4d1cfd","$3612f84116b201a9$export$ea6eae3365de5b9c","$3612f84116b201a9$export$fb72b72e8d764d4e","$3612f84116b201a9$export$b310ec824aaee37f","et","exp","$3612f84116b201a9$export$876cb1b29620556f","atan2","log","$3612f84116b201a9$export$9c297f60e22e3389","$3612f84116b201a9$export$dcdf75081b88279d","$3612f84116b201a9$export$1544d9bc2995de08","omega","cosom","sinom","scale0","scale1","$3612f84116b201a9$export$4385e60b38654f68","u1","u2","u3","sqrt1MinusU1","sqrtU1","$3612f84116b201a9$export$6897c284b6f9f4dc","invDot","$3612f84116b201a9$export$7679f47e72c62560","$3612f84116b201a9$export$272a1eb8e5a4b55b","fRoot","fTrace","j","k","$3612f84116b201a9$export$7a404a587ea85af","halfToRad","cx","cy","cz","$3612f84116b201a9$export$42d51816ce590c93","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","$3612f84116b201a9$export$9cd59f9826255e47","$3612f84116b201a9$export$a82be99ed2a44a7d","$3612f84116b201a9$export$784d13d8ee351f07","$3612f84116b201a9$export$adaa4cf7ef1b65be","$3612f84116b201a9$export$e16d8520af44a096","$3612f84116b201a9$export$6e3a27864ab166fe","$3612f84116b201a9$export$3a89f8d6f6bf6c9f","$3612f84116b201a9$export$f24224f1c91d8156","$3612f84116b201a9$export$fc1400facf92c78","$3612f84116b201a9$export$ab44e1323ffc8376","$3612f84116b201a9$export$99d8dd3f32a3435","$3612f84116b201a9$export$a3295358bff77e","$3843f3adc77d8e3a$export$fc1400facf92c78","$3612f84116b201a9$export$f2599a5cf1109d8","$3612f84116b201a9$export$e9bab7fafb253603","$3612f84116b201a9$export$72d66f5842c00904","$3612f84116b201a9$export$699b0866ca50f6cb","$3612f84116b201a9$export$937ca0a544b2d712","$fb2eb0662db21c15$export$5dc878ab9e1f1ddf","canvas","camera","updateCallback","pointerDown","pointerDownPos","pointerPos","followPos","prevFollowPos","phi","theta","pointerDownCameraUp","pointerDownRotation","rotation","delta","$d48ddae4a704ec47$export$2e2bcd8739ae039","$3612f84116b201a9$exports","fromEuler","orbit","$b817ce0f5cdadb29$exports","transformQuat","position","distance","$d30a187f4772cbec$var$Grad","dot2","dot3","$d30a187f4772cbec$var$grad3","$d30a187f4772cbec$var$p","$d30a187f4772cbec$var$perm","$d30a187f4772cbec$var$gradP","$d30a187f4772cbec$export$7f7d45814fc23e4d","$d30a187f4772cbec$var$F2","$d30a187f4772cbec$var$G2","_render","WeakSet","_renderBlurPass","_init","_createXYPlaneGeometry","_createBuffer","_initOrbitControls","_createFramebuffer","_makeVertexArray","_createShader","_createProgram","_setFramebuffer","_createAndSetupTexture","_resizeTextures","_updateCameraMatrix","_updateProjectionMatrix","_resizeCanvasToDisplaySize","_initTweakpane","_createTweakpaneSlider","$82a6767c6f190a98$export$501e333efb002ee5","pane","oninit","_time","_frames","_deltaTime","_isDestroyed","matrix","$2e616e7f2b93d8b0$exports","fromValues","radius","scale","init","gl","resizeCanvasToDisplaySize","viewport","drawingBufferWidth","drawingBufferHeight","resizeTextures","updateProjectionMatrix","time","$8670bb7693f1be6c$export$2e2bcd8739ae039","control","update","worldInvers","invert","drawUniforms","u_worldMatrix","transpose","u_worldInverseTransposeMatrix","render","requestAnimationFrame","run","WeakMap","enable","DEPTH_TEST","disable","CULL_FACE","setFramebuffer","drawFramebuffer","drawFramebufferWidth","drawFramebufferHeight","useProgram","drawProgram","bindVertexArray","objectVAO","uniformMatrix4fv","drawLocations","u_viewMatrix","u_projectionMatrix","uniform3f","u_cameraPosition","uniform1f","u_frames","clearBufferfv","COLOR","DEPTH","drawElements","TRIANGLES","objectBuffers","numElem","UNSIGNED_SHORT","BLEND","blendFunc","ONE","SRC_COLOR","blendEquation","FUNC_SUBTRACT","portalProgram","centerObjectVAO","portalLocations","portalUniforms","drawArrays","centerObjectBuffers","bindFramebuffer","READ_FRAMEBUFFER","DRAW_FRAMEBUFFER","blitFramebuffer","COLOR_BUFFER_BIT","NEAREST","DEPTH_BUFFER_BIT","renderBlurPass","hexBlur1Framebuffer","hexBlur1Program","hexBlur1Locations","u_colorTexture","colorTexture","u_depthTexture","depthTexture","u_radiusScale","blur","u_maxCoCRadius","hexBlur2Framebuffer","hexBlur2Program","hexBlur2Locations","u_verticalBlurTexture","hex1VerticalBlurTexture","u_diagonalBlurTexture","hex1DiagonalBlurTexture","clearColor","clear","compositeProgram","quadVAO","uniform1i","compositeLocations","u_texture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","hex2BlurTexture","quadBuffers","fbo","program","locTex","locFloat","locInt","ndx","loc","_param","texture","antialias","$45c6f556fa958784$export$2e2bcd8739ae039","createProgram","$parcel$interopDefault","a_position","getAttribLocation","a_normal","a_uv","getUniformLocation","rotate","translate","objectGeometry","createXYPlaneGeometry","n","xin","yin","i1","j1","gi0","gi1","gi2","t0","t1","t2","$d30a187f4772cbec$export$d2c234accf62d50d","lw","asin","createBuffer","vertices","normal","normals","uv","uvs","makeVertexArray","indices","quadPositions","pR","rot","centerObjectPositions","clientWidth","createFramebuffer","FRAMEBUFFER","depthRenderbuffer","createRenderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorageMultisample","DEPTH_COMPONENT32F","framebufferRenderbuffer","DEPTH_ATTACHMENT","colorRenderbuffer","getParameter","MAX_SAMPLES","RGBA8","COLOR_ATTACHMENT0","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","console","error","createAndSetupTexture","texImage2D","DEPTH_COMPONENT","FLOAT","framebufferTexture2D","LINEAR","RGBA","UNSIGNED_BYTE","resize","updateCameraMatrix","initOrbitControls","initTweakpane","wSegments","hSegments","distort","wOff","dd","cross","normalize","iy1","ix1","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","colorAttachements","drawBuffers","attachmentPoint","bufLocNumElmPairs","va","createVertexArray","_value","enableVertexAttribArray","vertexAttribPointer","indexBuffer","ELEMENT_ARRAY_BUFFER","Uint16Array","createShader","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","shaderSources","transformFeedbackVaryings","attribLocations","VERTEX_SHADER","FRAGMENT_SHADER","attachShader","SEPARATE_ATTRIBS","attrib","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","minFilter","magFilter","createTexture","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","targetTo","perspective","displayWidth","displayHeight","needResize","cameraFolder","createTweakpaneSlider","blurSettings","propName","stepSize","slider","$3015b282b063971c$var$sketch","$3015b282b063971c$var$resizeTimeoutId","$3015b282b063971c$var$queryString","window","location","search","$3015b282b063971c$var$DEBUG","URLSearchParams","sketch","clearTimeout","setTimeout"],"version":3,"file":"index.96bedaae.js.map"}